(function(_0x212404,_0x5f2171){const _0x106ba9=_0x8deb,_0x33536d=_0x212404();while(!![]){try{const _0x1fc5eb=parseInt(_0x106ba9(0x17f))/0x1*(-parseInt(_0x106ba9(0x13a))/0x2)+parseInt(_0x106ba9(0x148))/0x3*(parseInt(_0x106ba9(0x150))/0x4)+-parseInt(_0x106ba9(0x1cf))/0x5+parseInt(_0x106ba9(0x132))/0x6*(-parseInt(_0x106ba9(0x1ad))/0x7)+parseInt(_0x106ba9(0x163))/0x8*(parseInt(_0x106ba9(0x109))/0x9)+parseInt(_0x106ba9(0x14e))/0xa*(-parseInt(_0x106ba9(0x178))/0xb)+-parseInt(_0x106ba9(0x100))/0xc*(-parseInt(_0x106ba9(0x12b))/0xd);if(_0x1fc5eb===_0x5f2171)break;else _0x33536d['push'](_0x33536d['shift']());}catch(_0x35f43a){_0x33536d['push'](_0x33536d['shift']());}}}(_0x5082,0x56b87));let currentWavePatternIndex=-0x1,aiNeedsStabilization=!![],aiStabilizationEndTime=0x0,smoothedShipX=undefined;function resetGame(){const _0x429042=_0x8deb;try{level=0x1,currentWavePatternIndex=-0x1,isPaused=![],isShowingIntro=![],introStep=0x0,isWaveTransitioning=![],isGridSoundPlaying=![],isEntrancePhaseActive=![],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,enemySpawnTimeouts[_0x429042(0x17b)](clearTimeout),enemySpawnTimeouts=[],squadronCompletionStatus={},squadronEntranceFiringStatus={},isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0,isCsCompletionDelayActive=![],csCompletionDelayStartTime=0x0,csCompletionResultIsPerfect=![],csIntroSoundPlayed=![],gameOverSequenceStartTime=0x0,gameStartTime=0x0,stopAllGameSounds(),player1CompletedLevel=-0x1,forceCenterShipNextReset=![],isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',isShipCaptured=![],capturingBossId=null,captureBeamActive=![],captureBeamSource={'x':0x0,'y':0x0},captureBeamTargetY=0x0,captureBeamProgress=0x0,captureAttemptMadeThisLevel=![],isShowingCaptureMessage=![],captureMessageStartTime=0x0,capturedBossIdWithMessage=null,fallingShips=[],isDualShipActive=![],player1IsDualShipActive=![],player2IsDualShipActive=![],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,player1Score=0x0,player2Score=0x0,player1Lives=0x3,player2Lives=0x3,player1ShotsFired=0x0,player2ShotsFired=0x0,player1EnemiesHit=0x0,player2EnemiesHit=0x0,player1MaxLevelReached=0x1,player2MaxLevelReached=0x1,lastGridFireCheckTime=0x0,firstEnemyLanded=![],player1LifeThresholdsMet=new Set(),player2LifeThresholdsMet=new Set(),currentPlayer=0x1,score=player1Score,playerLives=player1Lives,player1TriggeredHighScoreSound=![],player2TriggeredHighScoreSound=![],scoreEarnedThisCS=0x0,playerIntroSoundPlayed=![],stageIntroSoundPlayed=![],resetAllMessages(),explosions=[],isChallengingStage=![],challengingStageEnemiesHit=0x0,isShowingResultsScreen=![],currentWaveDefinition=null,isFullGridWave=![],hitSparks=[],resetWave();}catch(_0x2561f4){console[_0x429042(0x195)]('FATAL\x20Error\x20in\x20resetGame:',_0x2561f4),isWaveTransitioning=![],isGridSoundPlaying=![],isEntrancePhaseActive=![],isCsCompletionDelayActive=![],csCompletionDelayStartTime=0x0,csCompletionResultIsPerfect=![],csIntroSoundPlayed=![],isPaused=![],currentWavePatternIndex=-0x1,player1CompletedLevel=-0x1,isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',squadronCompletionStatus={},squadronEntranceFiringStatus={},isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0,resetAllMessages(),forceCenterShipNextReset=![],player1ShotsFired=0x0,player2ShotsFired=0x0,player1EnemiesHit=0x0,player2EnemiesHit=0x0,player1MaxLevelReached=0x1,player2MaxLevelReached=0x1,isShipCaptured=![],capturingBossId=null,captureBeamActive=![],captureBeamSource={'x':0x0,'y':0x0},captureBeamTargetY=0x0,captureBeamProgress=0x0,captureAttemptMadeThisLevel=![],isShowingCaptureMessage=![],captureMessageStartTime=0x0,capturedBossIdWithMessage=null,fallingShips=[],isDualShipActive=![],player1IsDualShipActive=![],player2IsDualShipActive=![],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,isFullGridWave=![],hitSparks=[],player1TriggeredHighScoreSound=![],player2TriggeredHighScoreSound=![],lastGridFireCheckTime=0x0,firstEnemyLanded=![],player1LifeThresholdsMet=new Set(),player2LifeThresholdsMet=new Set(),playerIntroSoundPlayed=![],stageIntroSoundPlayed=![];typeof enemySpawnTimeouts!==_0x429042(0x158)&&Array[_0x429042(0x1d1)](enemySpawnTimeouts)&&enemySpawnTimeouts[_0x429042(0x17b)](clearTimeout);enemySpawnTimeouts=[];if(typeof showMenuState===_0x429042(0x16c))showMenuState();}}function resetAllMessages(){showCsHitsMessage=![],csHitsMessageStartTime=0x0,showPerfectMessage=![],perfectMessageStartTime=0x0,showCsBonusScoreMessage=![],csBonusScoreMessageStartTime=0x0,showCSClearMessage=![],csClearMessageStartTime=0x0,showCsHitsForClearMessage=![],showCsScoreForClearMessage=![],showExtraLifeMessage=![],extraLifeMessageStartTime=0x0,showReadyMessage=![],readyMessageStartTime=0x0,readyForNextWave=![],readyForNextWaveReset=![];}function stopAllGameSounds(){const _0x3a5117=_0x8deb,_0x4230b0=[gridBackgroundSound,entranceSound,butterflyDiveSound,startSound,coinSound,bossGalagaDiveSound,enemyShootSound,levelUpSound,gameOverSound,playerShootSound,extraLifeSound,csPerfectSound,csClearSound,explosionSound,waveUpSound,readySound,tripleAttackSound,captureSound,shipCapturedSound,dualShipSound,resultsMusicSound,hiScoreSound];_0x4230b0[_0x3a5117(0x17b)](_0x1f5776=>stopSound(_0x1f5776)),isGridSoundPlaying=![];}function getWaveType(_0x43128f){const _0x1429df=_0x8deb,_0x1db4bb=(_0x43128f-0x1)%0x4;switch(_0x1db4bb){case 0x0:return _0x1429df(0xc2);case 0x1:return'entrance_flight_1';case 0x2:return _0x1429df(0xf1);case 0x3:return _0x1429df(0x172);default:console[_0x1429df(0x195)](_0x1429df(0x185)+_0x1db4bb+_0x1429df(0x11c)+_0x43128f);return'unknown';}}function generateWaveDefinition(_0x134eab){const _0xc3aaca=_0x8deb;let _0x504306=[];currentWavePatternIndex=-0x1;const _0x4417f7=getWaveType(_0x134eab);if(typeof waveEntrancePatterns===_0xc3aaca(0x158)||!Array[_0xc3aaca(0x1d1)](waveEntrancePatterns)||waveEntrancePatterns[_0xc3aaca(0xe9)]<0x2)return console['error']('CRITICAL:\x20waveEntrancePatterns\x20is\x20not\x20defined\x20or\x20invalid\x20in\x20generateWaveDefinition\x20(Level\x20'+_0x134eab+')!'),[];if(_0x4417f7===_0xc3aaca(0xf1))_0x504306=[];else{if(_0x4417f7===_0xc3aaca(0xc2)){currentWavePatternIndex=0x0;const _0x3fabb4=waveEntrancePatterns[0x0];if(!_0x3fabb4||_0x3fabb4[_0xc3aaca(0xe9)]===0x0)console[_0xc3aaca(0x195)](_0xc3aaca(0x18b)+_0x134eab+_0xc3aaca(0x191)),_0x504306=[];else try{_0x504306=JSON[_0xc3aaca(0xb9)](JSON[_0xc3aaca(0x15c)](_0x3fabb4),(_0x34ddbd,_0x3d29ad)=>{const _0x33c569=_0xc3aaca;return _0x3d29ad&&typeof _0x3d29ad===_0x33c569(0x1bc)&&_0x3d29ad[_0x33c569(0x16b)]===ENEMY3_TYPE&&typeof _0x3d29ad[_0x33c569(0x1c5)]===_0x33c569(0x158)&&(_0x3d29ad[_0x33c569(0x1c5)]=![]),_0x3d29ad;});}catch(_0x54f3fd){console[_0xc3aaca(0x195)](_0xc3aaca(0x1d6),_0x54f3fd),_0x504306=[];}}else{if(_0x4417f7===_0xc3aaca(0x18a)){currentWavePatternIndex=0x0;const _0x5a9d33=waveEntrancePatterns[0x0];if(!_0x5a9d33||_0x5a9d33[_0xc3aaca(0xe9)]===0x0)console['error'](_0xc3aaca(0x18b)+_0x134eab+_0xc3aaca(0x14f)),_0x504306=[];else try{_0x504306=JSON[_0xc3aaca(0xb9)](JSON[_0xc3aaca(0x15c)](_0x5a9d33),(_0x114132,_0x3480db)=>{const _0x700b88=_0xc3aaca;return _0x3480db&&typeof _0x3480db===_0x700b88(0x1bc)&&_0x3480db[_0x700b88(0x16b)]===ENEMY3_TYPE&&typeof _0x3480db['hasCapturedShip']==='undefined'&&(_0x3480db[_0x700b88(0x1c5)]=![]),_0x3480db;});}catch(_0x34ac75){console[_0xc3aaca(0x195)]('Error\x20deep\x20copying\x20selected\x20pattern\x200\x20for\x20Entrance\x201:',_0x34ac75),_0x504306=[];}}else{if(_0x4417f7===_0xc3aaca(0x172)){currentWavePatternIndex=0x1;const _0x4f7176=waveEntrancePatterns[0x1];if(!_0x4f7176||_0x4f7176['length']===0x0)console['error'](_0xc3aaca(0x18b)+_0x134eab+_0xc3aaca(0xfb)),_0x504306=[];else try{_0x504306=JSON['parse'](JSON[_0xc3aaca(0x15c)](_0x4f7176),(_0x4661ae,_0x409de0)=>{const _0x2e1cc8=_0xc3aaca;return _0x409de0&&typeof _0x409de0==='object'&&_0x409de0[_0x2e1cc8(0x16b)]===ENEMY3_TYPE&&typeof _0x409de0[_0x2e1cc8(0x1c5)]===_0x2e1cc8(0x158)&&(_0x409de0[_0x2e1cc8(0x1c5)]=![]),_0x409de0;});}catch(_0x2063d3){console[_0xc3aaca(0x195)](_0xc3aaca(0xe2),_0x2063d3),_0x504306=[];}}else _0x504306=[];}}}if(_0x4417f7!=='challenging_stage'){if(typeof normalWaveEntrancePaths===_0xc3aaca(0x158)||Object['keys'](normalWaveEntrancePaths)[_0xc3aaca(0xe9)]===0x0)return console[_0xc3aaca(0x195)](_0xc3aaca(0xc9)+_0x134eab+_0xc3aaca(0xbb)),_0x504306;for(let _0x37d424=_0x504306[_0xc3aaca(0xe9)]-0x1;_0x37d424>=0x0;_0x37d424--){const _0x32c047=_0x504306[_0x37d424];if(!normalWaveEntrancePaths?.[_0x32c047[_0xc3aaca(0xb8)]]){console['warn'](_0xc3aaca(0x18b)+_0x134eab+_0xc3aaca(0x13f)+currentWavePatternIndex+_0xc3aaca(0xbd)+_0x32c047[_0xc3aaca(0xb8)]+_0xc3aaca(0x13b)),_0x504306[_0xc3aaca(0x102)](_0x37d424,0x1);continue;}if(_0x32c047['enemies']&&Array[_0xc3aaca(0x1d1)](_0x32c047[_0xc3aaca(0x112)])){for(let _0x4e83db=_0x32c047[_0xc3aaca(0x112)]['length']-0x1;_0x4e83db>=0x0;_0x4e83db--){const _0x12b4b5=_0x32c047[_0xc3aaca(0x112)][_0x4e83db];(!_0x12b4b5||!normalWaveEntrancePaths?.[_0x12b4b5['entrancePathId']])&&(console[_0xc3aaca(0x113)](_0xc3aaca(0x18b)+_0x134eab+_0xc3aaca(0x13f)+currentWavePatternIndex+_0xc3aaca(0x124)+_0x32c047[_0xc3aaca(0xb8)]+_0xc3aaca(0x1c0)+_0x12b4b5?.[_0xc3aaca(0x1a2)]+'\x22\x20invalid\x20or\x20missing\x20in\x20normalWaveEntrancePaths!\x20Removing\x20enemy.'),_0x32c047[_0xc3aaca(0x112)][_0xc3aaca(0x102)](_0x4e83db,0x1)),_0x12b4b5&&_0x12b4b5[_0xc3aaca(0x16b)]===ENEMY3_TYPE&&typeof _0x12b4b5[_0xc3aaca(0x1c5)]===_0xc3aaca(0x158)&&(_0x12b4b5[_0xc3aaca(0x1c5)]=![]);}_0x32c047['enemies'][_0xc3aaca(0xe9)]===0x0&&(console[_0xc3aaca(0x113)](_0xc3aaca(0x18b)+_0x134eab+_0xc3aaca(0x13f)+currentWavePatternIndex+_0xc3aaca(0x15f)+_0x32c047[_0xc3aaca(0xb8)]+'\x22\x20became\x20empty\x20after\x20enemy\x20path\x20validation.\x20Removing.'),_0x504306['splice'](_0x37d424,0x1));}else console[_0xc3aaca(0x113)](_0xc3aaca(0x18b)+_0x134eab+_0xc3aaca(0x13f)+currentWavePatternIndex+_0xc3aaca(0x15f)+_0x32c047['pathId']+_0xc3aaca(0xcf)),_0x504306[_0xc3aaca(0x102)](_0x37d424,0x1);}}return _0x504306;}function resetWave(){const _0x115cc3=_0x8deb;stopAllGameSounds(),isWaveTransitioning=![],isGridSoundPlaying=![],scoreEarnedThisCS=0x0,resetAllMessages(),isCsCompletionDelayActive=![],csCompletionDelayStartTime=0x0,csCompletionResultIsPerfect=![],csIntroSoundPlayed=![],isPaused=![],isShipCaptured=![],capturingBossId=null,captureBeamActive=![],captureBeamSource={'x':0x0,'y':0x0},captureBeamTargetY=0x0,captureBeamProgress=0x0,captureAttemptMadeThisLevel=![],isShowingCaptureMessage=![],captureMessageStartTime=0x0,capturedBossIdWithMessage=null,fallingShips=[],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,playerIntroSoundPlayed=![],stageIntroSoundPlayed=![],lastGridFireCheckTime=0x0,firstEnemyLanded=![];const _0x2235ca=player1Score,_0x12909b=player2Score;_0x2235ca<highScore&&(player1TriggeredHighScoreSound=![]);_0x12909b<highScore&&(player2TriggeredHighScoreSound=![]);bullets=[],enemyBullets=[],enemies=[],explosions=[],gridMoveDirection=0x1,lastEnemyDetachTime=0x0,currentGridOffsetX=0x0,isEntrancePhaseActive=![],currentWaveDefinition=null,currentWavePatternIndex=-0x1,enemySpawnTimeouts['forEach'](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,squadronCompletionStatus={},squadronEntranceFiringStatus={},isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0,hitSparks=[],isFullGridWave=![],isChallengingStage=![];try{const _0x766170=getWaveType(level);isChallengingStage=_0x766170===_0x115cc3(0xf1),isFullGridWave=_0x766170===_0x115cc3(0xc2),challengingStageEnemiesHit=0x0,isShowingIntro=!![],introDisplayStartTime=Date[_0x115cc3(0x154)]();if(isChallengingStage)isTwoPlayerMode?introStep=0x1:introStep=0x3;else{if(isFullGridWave){if(isTwoPlayerMode)introStep=0x1;else level===0x1?introStep=0x1:introStep=0x2;}else isTwoPlayerMode?introStep=0x1:introStep=0x2;}level===0x1&&currentPlayer===0x1&&playSound(startSound),gameCanvas?.[_0x115cc3(0x166)]>0x0&&ship?(ship['y']=gameCanvas['height']-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,(!isManualControl||forceCenterShipNextReset)&&(isDualShipActive?ship['x']=gameCanvas[_0x115cc3(0x166)]/0x2-ship['width']:ship['x']=gameCanvas[_0x115cc3(0x166)]/0x2-ship[_0x115cc3(0x166)]/0x2,ship['targetX']=ship['x'],smoothedShipX=ship['x'],aiNeedsStabilization=!![])):console[_0x115cc3(0x113)](_0x115cc3(0x14c)),forceCenterShipNextReset=![];}catch(_0x2c402c){console['error']('FATAL\x20Error\x20in\x20resetWave:',_0x2c402c),isWaveTransitioning=![],isGridSoundPlaying=![],isShowingIntro=![],introStep=0x0,isChallengingStage=![],isFullGridWave=![],resetAllMessages(),isCsCompletionDelayActive=![],csCompletionDelayStartTime=0x0,csCompletionResultIsPerfect=![],csIntroSoundPlayed=![],isPaused=![],currentWavePatternIndex=-0x1,squadronCompletionStatus={},squadronEntranceFiringStatus={},isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0,forceCenterShipNextReset=![],isShipCaptured=![],capturingBossId=null,captureBeamActive=![],captureBeamSource={'x':0x0,'y':0x0},captureBeamTargetY=0x0,captureBeamProgress=0x0,captureAttemptMadeThisLevel=![],isShowingCaptureMessage=![],captureMessageStartTime=0x0,capturedBossIdWithMessage=null,fallingShips=[],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,hitSparks=[],player1TriggeredHighScoreSound=![],player2TriggeredHighScoreSound=![],lastGridFireCheckTime=0x0,firstEnemyLanded=![],playerIntroSoundPlayed=![],stageIntroSoundPlayed=![];typeof enemySpawnTimeouts!==_0x115cc3(0x158)&&Array[_0x115cc3(0x1d1)](enemySpawnTimeouts)&&enemySpawnTimeouts['forEach'](clearTimeout);enemySpawnTimeouts=[];if(typeof showMenuState===_0x115cc3(0x16c))showMenuState();}}const createBulletSimple=(_0x2202e4,_0x5d8726=null)=>{const _0x47b9cd=_0x8deb;if(!_0x2202e4||playerLives<=0x0||!isInGameState||!ship||isShipCaptured)return![];const _0x1d600a=scaleValue(level,BASE_ENEMY_BULLET_SPEED,MAX_ENEMY_BULLET_SPEED),_0x57e050=_0x5d8726?_0x5d8726['x']:_0x2202e4['x']+_0x2202e4[_0x47b9cd(0x166)]/0x2,_0x4fa1b8=_0x5d8726?_0x5d8726['y']:_0x2202e4['y']+_0x2202e4['height']/0x2;let _0x1cd6fd=0x0,_0x346825=_0x1d600a;const _0x47e99f=ship['x']+ship[_0x47b9cd(0x166)]/0x2-_0x57e050,_0x34b5dc=ship['y']+ship[_0x47b9cd(0xe6)]/0x2-_0x4fa1b8,_0x27dc6d=Math[_0x47b9cd(0x127)](_0x47e99f*_0x47e99f+_0x34b5dc*_0x34b5dc);if(_0x27dc6d>0x0){let _0x3d2afb=0x0;!isChallengingStage&&(_0x3d2afb=scaleValue(level,BASE_ENEMY_AIM_FACTOR,MAX_ENEMY_AIM_FACTOR));let _0x3017d0=Math[_0x47b9cd(0x16f)](_0x34b5dc,_0x47e99f);return _0x1cd6fd=Math['cos'](_0x3017d0)*_0x1d600a*_0x3d2afb,_0x346825=Math['sqrt'](_0x1d600a**0x2-_0x1cd6fd**0x2),_0x346825=Math[_0x47b9cd(0x1be)](_0x1d600a*(0x1-_0x3d2afb)*0.5,_0x346825),_0x34b5dc<0x0&&(_0x346825=Math[_0x47b9cd(0x12e)](_0x346825)),enemyBullets[_0x47b9cd(0x155)]({'x':_0x57e050-ENEMY_BULLET_WIDTH/0x2,'y':_0x4fa1b8,'width':ENEMY_BULLET_WIDTH,'height':ENEMY_BULLET_HEIGHT,'vx':_0x1cd6fd,'vy':_0x346825,'type':_0x2202e4[_0x47b9cd(0x16b)]}),!![];}return![];};function scheduleSingleEntranceSquadron(_0x2f2648,_0x5cab3f,_0x59c20b){const _0x5a9ecb=_0x8deb;if(isFullGridWave||isChallengingStage)return console[_0x5a9ecb(0x113)](_0x5a9ecb(0x1a9)+level+',\x20isFullGrid:\x20'+isFullGridWave+_0x5a9ecb(0xe5)+isChallengingStage+_0x5a9ecb(0xe7)),_0x2f2648?.[_0x5a9ecb(0x112)]?.[_0x5a9ecb(0xe9)]>0x0&&(enemiesSpawnedThisWave+=_0x2f2648[_0x5a9ecb(0x112)]['length'],squadronCompletionStatus[_0x5cab3f]&&(squadronCompletionStatus[_0x5cab3f]['completed']=squadronCompletionStatus[_0x5cab3f]['total'])),![];const _0x1904e0=normalWaveEntrancePaths,_0x187548=_0x2f2648[_0x5a9ecb(0xb8)],_0x26b65e=_0x1904e0[_0x187548];if(!_0x26b65e||_0x26b65e[_0x5a9ecb(0xe9)]===0x0)return console['error'](_0x5a9ecb(0x12a)+_0x187548+_0x5a9ecb(0x1c4)+_0x5cab3f+_0x5a9ecb(0x1c8)),_0x2f2648?.[_0x5a9ecb(0x112)]?.[_0x5a9ecb(0xe9)]>0x0&&(enemiesSpawnedThisWave+=_0x2f2648[_0x5a9ecb(0x112)][_0x5a9ecb(0xe9)],squadronCompletionStatus[_0x5cab3f]&&(squadronCompletionStatus[_0x5cab3f][_0x5a9ecb(0xd2)]=squadronCompletionStatus[_0x5cab3f][_0x5a9ecb(0x18f)])),![];const _0x4b9494=setTimeout(()=>{const _0x4745a4=_0x5a9ecb,_0x1d42e5=enemySpawnTimeouts[_0x4745a4(0x1b9)](_0x4b9494);if(_0x1d42e5>-0x1)enemySpawnTimeouts[_0x4745a4(0x102)](_0x1d42e5,0x1);if(isPaused||!isInGameState||!isEntrancePhaseActive||isChallengingStage||isWaveTransitioning||playerLives<=0x0||isShipCaptured||isFullGridWave){_0x2f2648?.[_0x4745a4(0x112)]?.[_0x4745a4(0xe9)]>0x0&&(enemiesSpawnedThisWave+=_0x2f2648[_0x4745a4(0x112)]['length'],squadronCompletionStatus[_0x5cab3f]&&(squadronCompletionStatus[_0x5cab3f]['completed']=squadronCompletionStatus[_0x5cab3f][_0x4745a4(0x18f)]));return;}try{squadronEntranceFiringStatus[_0x5cab3f]?(squadronEntranceFiringStatus[_0x5cab3f][_0x4745a4(0x17c)]=Date[_0x4745a4(0x154)]()+_0x59c20b,squadronEntranceFiringStatus[_0x5cab3f][_0x4745a4(0x11a)]=![]):(console['warn'](_0x4745a4(0xf5)+_0x5cab3f+'\x20not\x20found.'),squadronEntranceFiringStatus[_0x5cab3f]={'hasFired':![],'scheduledStartTime':Date['now']()+_0x59c20b});const _0x290670=ENEMY_SPAWN_DELAY_IN_SQUADRON,_0x59fb13=_0x290670*0x2,_0x4c98f4=0x1;_0x2f2648[_0x4745a4(0x112)][_0x4745a4(0x17b)]((_0x304cda,_0x22a8c2)=>{const _0x1fd9a0=_0x4745a4;if(!_0x304cda||!_0x304cda[_0x1fd9a0(0x16b)]||typeof _0x304cda[_0x1fd9a0(0x1c3)]===_0x1fd9a0(0x158)||typeof _0x304cda[_0x1fd9a0(0x159)]===_0x1fd9a0(0x158)||!_0x304cda['entrancePathId']){console[_0x1fd9a0(0x195)](_0x1fd9a0(0x131)+_0x5cab3f+_0x1fd9a0(0xed)+_0x187548+_0x1fd9a0(0x165)+_0x22a8c2+'.\x20Skipping.'),enemiesSpawnedThisWave++;squadronCompletionStatus[_0x5cab3f]&&squadronCompletionStatus[_0x5cab3f]['completed']++;return;}const _0x17e42b=_0x1904e0[_0x304cda[_0x1fd9a0(0x1a2)]];(!_0x17e42b||_0x17e42b['length']===0x0)&&console[_0x1fd9a0(0x113)](_0x1fd9a0(0xeb)+_0x304cda[_0x1fd9a0(0x1a2)]+_0x1fd9a0(0x114)+_0x5cab3f+',\x20index\x20'+_0x22a8c2+'\x20not\x20found.\x20Enemy\x20will\x20follow\x20squadron\x20path\x20\x22'+_0x187548+'\x22.');let _0x2c0434=0x0;const _0x5c0b27=getWaveType(level),_0x36f057=_0x5c0b27===_0x1fd9a0(0x172)&&(_0x5cab3f===0x2||_0x5cab3f===0x3);if(_0x36f057){const _0x16e5bd=Math[_0x1fd9a0(0x10c)](_0x22a8c2/0x2);_0x22a8c2%0x2===0x0?_0x2c0434=_0x16e5bd*_0x59fb13:_0x2c0434=_0x16e5bd*_0x59fb13+_0x4c98f4;}else _0x2c0434=_0x22a8c2*ENEMY_SPAWN_DELAY_IN_SQUADRON;const _0x13ed8b=setTimeout(()=>{const _0x96605e=_0x1fd9a0,_0x188ddb=enemySpawnTimeouts[_0x96605e(0x1b9)](_0x13ed8b);if(_0x188ddb>-0x1)enemySpawnTimeouts[_0x96605e(0x102)](_0x188ddb,0x1);if(isPaused||!isInGameState||!isEntrancePhaseActive||isChallengingStage||isWaveTransitioning||playerLives<=0x0||isShipCaptured||isFullGridWave){enemiesSpawnedThisWave++;squadronCompletionStatus[_0x5cab3f]&&squadronCompletionStatus[_0x5cab3f][_0x96605e(0xd2)]++;return;}try{let _0x497598=_0x304cda[_0x96605e(0x16b)],_0x39e7b8=_0x497598===ENEMY3_TYPE?ENEMY3_MAX_HITS:0x1,_0x4da79c,_0x4cf2af;if(_0x497598===ENEMY1_TYPE)_0x4da79c=ENEMY1_WIDTH,_0x4cf2af=ENEMY1_HEIGHT;else _0x497598===ENEMY3_TYPE?(_0x4da79c=BOSS_WIDTH,_0x4cf2af=BOSS_HEIGHT):(_0x4da79c=ENEMY_WIDTH,_0x4cf2af=ENEMY_HEIGHT);let _0x19aae9=0x0,_0x3c3356=0x0;if(_0x26b65e&&_0x26b65e[0x0]?.['p0'])_0x19aae9=_0x26b65e[0x0]['p0']['x'],_0x3c3356=_0x26b65e[0x0]['p0']['y'];else throw new Error('Invalid\x20start\x20segment\x20for\x20squadron\x20path\x20'+_0x187548);let _0x17c614,_0x7cd33d;try{const {x:_0x1f1fe4,y:_0x4fea3c}=getCurrentGridSlotPosition(_0x304cda[_0x96605e(0x1c3)],_0x304cda[_0x96605e(0x159)],_0x4da79c);_0x17c614=_0x1f1fe4,_0x7cd33d=_0x4fea3c;}catch(_0x492cb9){console['error'](_0x96605e(0xd7)+_0x304cda[_0x96605e(0x16b)]+_0x96605e(0x12d)+_0x304cda[_0x96605e(0x1c3)]+','+_0x304cda[_0x96605e(0x159)]+']',_0x492cb9),_0x17c614=gameCanvas?.[_0x96605e(0x166)]/0x2||0xc8,_0x7cd33d=ENEMY_TOP_MARGIN+_0x304cda[_0x96605e(0x1c3)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}let _0x15fd17=0x0;const _0x188b5d=_0x36f057,_0x486c06=_0x188b5d&&_0x22a8c2%0x2!==0x0;_0x486c06?_0x15fd17=-ENTRANCE_PAIR_PATH_T_OFFSET:_0x15fd17=-_0x22a8c2*PATH_T_OFFSET_PER_ENEMY;const _0x1cc286={'x':_0x19aae9,'y':_0x3c3356,'width':_0x4da79c,'height':_0x4cf2af,'targetGridX':_0x17c614,'targetGridY':_0x7cd33d,'speed':0x0,'state':'following_entrance_path','gridRow':_0x304cda['gridRow'],'gridCol':_0x304cda[_0x96605e(0x159)],'type':_0x497598,'health':_0x39e7b8,'isDamaged':![],'velocityX':0x0,'velocityY':0x0,'attackPathStep':0x0,'initialY':0x0,'initialX':0x0,'diveDirection':0x1,'lastFiredTime':0x0,'targetX1':0x0,'targetY1':0x0,'targetX2':0x0,'targetY2':0x0,'targetX3':0x0,'targetY3':0x0,'attackPathSegments':[],'attackPathSegmentIndex':0x0,'attackPathT':0x0,'attackStartTime':0x0,'attackFormationOffsetX':0x0,'attackGroupId':null,'entrancePathId':_0x187548,'pathSegmentIndex':0x0,'pathT':_0x15fd17,'squadronId':_0x5cab3f,'squadronEnemyIndex':_0x22a8c2,'id':_0x96605e(0x19a)+_0x5cab3f+'-'+_0x22a8c2+'-'+Date[_0x96605e(0x154)]()+'-'+Math[_0x96605e(0xce)]()['toString'](0x24)['substring'](0x2,0x7),'justReturned':![],'canFireThisDive':![],'attackType':_0x96605e(0x1cd),'hasCapturedShip':_0x497598===ENEMY3_TYPE?![]:undefined,'capturedShipX':undefined,'capturedShipY':undefined,'capturedShipLastFiredTime':_0x497598===ENEMY3_TYPE?0x0:undefined,'captureStartTime':0x0,'capturePrepareTimeout':null,'pathSpeedMultiplier':0x1};enemies[_0x96605e(0x155)](_0x1cc286),enemiesSpawnedThisWave++;squadronCompletionStatus[_0x5cab3f]&&squadronCompletionStatus[_0x5cab3f][_0x96605e(0xd2)]++;if(_0x22a8c2===0x0){let _0x2dea1b=0x5dc;(_0x5cab3f===0x0||_0x5cab3f===0x1)&&(_0x2dea1b=0xfa);const _0x58b498=_0x1cc286['id'],_0x3821cf=setTimeout(()=>{const _0x149af3=_0x96605e,_0x2410d4=enemySpawnTimeouts[_0x149af3(0x1b9)](_0x3821cf);if(_0x2410d4>-0x1)enemySpawnTimeouts[_0x149af3(0x102)](_0x2410d4,0x1);if(isPaused||!isInGameState||playerLives<=0x0||isChallengingStage||isWaveTransitioning||isShipCaptured||isFullGridWave)return;fireFixedEnemyBurst(_0x58b498,null,0x0,0x3);},_0x2dea1b);enemySpawnTimeouts[_0x96605e(0x155)](_0x3821cf);}}catch(_0x189692){console['error'](_0x96605e(0x15e)+_0x5cab3f+',\x20Idx\x20'+_0x22a8c2+',\x20Path\x20'+_0x187548+'):',_0x189692),enemiesSpawnedThisWave++,squadronCompletionStatus[_0x5cab3f]&&squadronCompletionStatus[_0x5cab3f][_0x96605e(0xd2)]++;}},_0x2c0434);enemySpawnTimeouts['push'](_0x13ed8b);});}catch(_0x5d436e){console['error']('Entrance\x20Wave:\x20Error\x20processing\x20enemies\x20for\x20squadron\x20'+_0x5cab3f+'\x20(Path\x20'+_0x187548+'):',_0x5d436e),_0x2f2648?.[_0x4745a4(0x112)]?.[_0x4745a4(0xe9)]>0x0&&(enemiesSpawnedThisWave+=_0x2f2648[_0x4745a4(0x112)][_0x4745a4(0xe9)],squadronCompletionStatus[_0x5cab3f]&&(squadronCompletionStatus[_0x5cab3f]['completed']=squadronCompletionStatus[_0x5cab3f][_0x4745a4(0x18f)]));}},_0x59c20b);return enemySpawnTimeouts[_0x5a9ecb(0x155)](_0x4b9494),!![];};function startChallengingStageSequence(){const _0x1ce08e=_0x8deb;currentWaveDefinition=[],isEntrancePhaseActive=![],enemySpawnTimeouts[_0x1ce08e(0x17b)](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,squadronEntranceFiringStatus={};Object[_0x1ce08e(0x15b)](challengingStagePaths)['length']===0x0&&defineChallengingStagePaths();if(Object[_0x1ce08e(0x15b)](challengingStagePaths)['length']===0x0){console[_0x1ce08e(0x195)](_0x1ce08e(0x18d)),isWaveTransitioning=!![],setTimeout(()=>{const _0x1c7bb8=_0x1ce08e;(isInGameState||!isInGameState&&playerLives>0x0)&&typeof resetWave===_0x1c7bb8(0x16c)&&resetWave();},NEXT_WAVE_DELAY_AFTER_MESSAGE);return;}const _0x1f21be=[_0x1ce08e(0xe4),_0x1ce08e(0xd0),_0x1ce08e(0xf0),'CS_HorizontalFlyByR'],_0x4434be=[_0x1ce08e(0x136),_0x1ce08e(0x146),_0x1ce08e(0x18c),_0x1ce08e(0x18e)],_0x2e22a0=[..._0x1f21be,..._0x4434be];for(const _0x3cd430 of _0x2e22a0){if(!challengingStagePaths[_0x1ce08e(0x188)](_0x3cd430)){console[_0x1ce08e(0x195)](_0x1ce08e(0x1b3)+_0x3cd430+_0x1ce08e(0x199)),isWaveTransitioning=!![],setTimeout(()=>{const _0x26363c=_0x1ce08e;(isInGameState||!isInGameState&&playerLives>0x0)&&typeof resetWave===_0x26363c(0x16c)&&resetWave();},NEXT_WAVE_DELAY_AFTER_MESSAGE);return;}}let _0x54015c=[..._0x1f21be],_0x5964fa=[..._0x4434be]['sort'](()=>Math['random']()-0.5);_0x54015c[_0x1ce08e(0x155)](..._0x5964fa),currentWaveDefinition=[];for(let _0x161a13=0x0;_0x161a13<CHALLENGING_STAGE_SQUADRON_COUNT;_0x161a13++){const _0x176f93=_0x54015c[_0x161a13],_0x379826={'pathId':_0x176f93,'enemies':[]};for(let _0x82f3c8=0x0;_0x82f3c8<CHALLENGING_STAGE_SQUADRON_SIZE;_0x82f3c8++){let _0x5d9df3=_0x82f3c8<Math[_0x1ce08e(0x10c)](CHALLENGING_STAGE_SQUADRON_SIZE/0x2)?ENEMY1_TYPE:ENEMY2_TYPE;_0x379826['enemies'][_0x1ce08e(0x155)]({'type':_0x5d9df3,'entrancePathId':_0x176f93});}currentWaveDefinition[_0x1ce08e(0x155)](_0x379826);}challengingStageTotalEnemies=CHALLENGING_STAGE_ENEMY_COUNT,totalEnemiesScheduledForWave=challengingStageTotalEnemies,enemiesSpawnedThisWave=0x0;if(currentWaveDefinition[_0x1ce08e(0xe9)]>0x0){isEntrancePhaseActive=!![],enemySpawnTimeouts=[];let _0x57e277=0x0;const _0xaefe91=-0x1c,_0x25cb9e=Math[_0x1ce08e(0x10c)](Math[_0x1ce08e(0x1be)](0x0,level-0x3)/0x4)+0x1,_0x2ab5b1=scaleValue(_0x25cb9e,BASE_CS_SPEED_MULTIPLIER,MAX_CS_SPEED_MULTIPLIER);currentWaveDefinition[_0x1ce08e(0x17b)]((_0x963153,_0x5e2d42)=>{const _0x2bbb32=_0x1ce08e;let _0x20812d=0x0;if(_0x5e2d42<=0x1)_0x20812d=0x0;else _0x5e2d42<=0x3?_0x20812d=CHALLENGING_STAGE_SQUADRON_INTERVAL:_0x20812d=(_0x5e2d42-0x2)*CHALLENGING_STAGE_SQUADRON_INTERVAL;let _0x235904=_0x2ab5b1;(_0x5e2d42===0x2||_0x5e2d42===0x3)&&(_0x235904*=CS_HORIZONTAL_FLYBY_SPEED_FACTOR);const _0x5ed62d=setTimeout(()=>{const _0x32bf47=_0x8deb,_0x5bf3de=enemySpawnTimeouts[_0x32bf47(0x1b9)](_0x5ed62d);if(_0x5bf3de>-0x1)enemySpawnTimeouts[_0x32bf47(0x102)](_0x5bf3de,0x1);if(!isPaused&&isInGameState&&isEntrancePhaseActive&&isChallengingStage&&!isWaveTransitioning&&playerLives>0x0)try{const _0x519e6b=_0x963153[_0x32bf47(0xb8)],_0x4d2f62=challengingStagePaths,_0x3cb66c=_0x4d2f62[_0x519e6b];if(!_0x3cb66c||_0x3cb66c[_0x32bf47(0xe9)]===0x0){console[_0x32bf47(0x195)](_0x32bf47(0x175)+_0x519e6b+_0x32bf47(0x1c4)+_0x5e2d42+_0x32bf47(0xbf)),enemiesSpawnedThisWave+=_0x963153['enemies'][_0x32bf47(0xe9)];return;}let _0x54da16=CS_ENEMY_SPAWN_DELAY_IN_SQUADRON;if(_0x5e2d42>=0x2&&_0x5e2d42<=0x3)_0x54da16=CS_HORIZONTAL_FLYBY_SPAWN_DELAY;else _0x5e2d42>=0x4&&(_0x54da16=CS_LOOP_ATTACK_SPAWN_DELAY);_0x963153['enemies'][_0x32bf47(0x17b)]((_0xa56986,_0x7e6f8)=>{const _0x336a18=_0x32bf47;if(!_0xa56986||!_0xa56986['type']){console[_0x336a18(0x195)](_0x336a18(0xf9)+_0x5e2d42+_0x336a18(0x1a4)+_0x7e6f8+_0x336a18(0x16a)),enemiesSpawnedThisWave++;return;}const _0x47d2c7=_0x7e6f8*_0x54da16,_0x298025=setTimeout(()=>{const _0x50d2d8=_0x336a18,_0x406a71=enemySpawnTimeouts[_0x50d2d8(0x1b9)](_0x298025);if(_0x406a71>-0x1)enemySpawnTimeouts[_0x50d2d8(0x102)](_0x406a71,0x1);if(isPaused||!isInGameState||!isEntrancePhaseActive||!isChallengingStage||isWaveTransitioning||playerLives<=0x0){enemiesSpawnedThisWave++;return;}try{let _0x314422=_0xa56986[_0x50d2d8(0x16b)],_0x4bde49=_0x314422===ENEMY3_TYPE?ENEMY3_MAX_HITS:0x1,_0xad518d,_0x4635f0;if(_0x314422===ENEMY1_TYPE)_0xad518d=ENEMY1_WIDTH,_0x4635f0=ENEMY1_HEIGHT;else _0x314422===ENEMY3_TYPE?(_0xad518d=BOSS_WIDTH,_0x4635f0=BOSS_HEIGHT):(_0xad518d=ENEMY_WIDTH,_0x4635f0=ENEMY_HEIGHT);let _0x45a2a1=0x0,_0x68121d=0x0;if(_0x3cb66c[0x0]?.['p0'])_0x45a2a1=_0x3cb66c[0x0]['p0']['x'],_0x68121d=_0x3cb66c[0x0]['p0']['y'];else throw new Error(_0x50d2d8(0x173)+_0x519e6b);(_0x5e2d42===0x0||_0x5e2d42===0x1)&&(_0x45a2a1+=_0xaefe91);const _0x1251ca=-_0x7e6f8*PATH_T_OFFSET_PER_ENEMY,_0x5d5d7c={'x':_0x45a2a1,'y':_0x68121d,'width':_0xad518d,'height':_0x4635f0,'targetGridX':0x0,'targetGridY':0x0,'speed':0x0,'state':_0x50d2d8(0xd9),'gridRow':-0x1,'gridCol':-0x1,'type':_0x314422,'health':_0x4bde49,'isDamaged':![],'velocityX':0x0,'velocityY':0x0,'attackPathStep':0x0,'initialY':0x0,'initialX':0x0,'diveDirection':0x1,'lastFiredTime':0x0,'targetX1':0x0,'targetY1':0x0,'targetX2':0x0,'targetY2':0x0,'targetX3':0x0,'targetY3':0x0,'attackPathSegments':[],'attackPathSegmentIndex':0x0,'attackPathT':0x0,'attackStartTime':0x0,'attackFormationOffsetX':0x0,'attackGroupId':null,'entrancePathId':_0x519e6b,'pathSegmentIndex':0x0,'pathT':_0x1251ca,'squadronId':_0x5e2d42,'id':_0x50d2d8(0x129)+_0x5e2d42+'-'+_0x7e6f8+'-'+Date[_0x50d2d8(0x154)]()+'-'+Math[_0x50d2d8(0xce)]()[_0x50d2d8(0x142)](0x24)[_0x50d2d8(0x144)](0x2,0x7),'justReturned':![],'canFireThisDive':![],'attackType':_0x50d2d8(0x1cd),'hasCapturedShip':_0x314422===ENEMY3_TYPE?![]:undefined,'capturedShipX':undefined,'capturedShipY':undefined,'capturedShipLastFiredTime':_0x314422===ENEMY3_TYPE?0x0:undefined,'captureStartTime':0x0,'capturePrepareTimeout':null,'pathSpeedMultiplier':_0x235904};enemies[_0x50d2d8(0x155)](_0x5d5d7c),enemiesSpawnedThisWave++;}catch(_0x38bd22){console[_0x50d2d8(0x195)](_0x50d2d8(0x108)+_0x5e2d42+_0x50d2d8(0x1aa)+_0x7e6f8+',\x20Path\x20'+_0x519e6b+'):',_0x38bd22),enemiesSpawnedThisWave++;}},_0x47d2c7);enemySpawnTimeouts['push'](_0x298025),_0x57e277++;});}catch(_0x31f574){console[_0x32bf47(0x195)](_0x32bf47(0xcd)+_0x5e2d42+':',_0x31f574),enemiesSpawnedThisWave+=_0x963153[_0x32bf47(0x112)][_0x32bf47(0xe9)];}else _0x963153?.[_0x32bf47(0x112)]?.[_0x32bf47(0xe9)]>0x0&&(enemiesSpawnedThisWave+=_0x963153[_0x32bf47(0x112)][_0x32bf47(0xe9)]);},_0x20812d);enemySpawnTimeouts[_0x2bbb32(0x155)](_0x5ed62d);});}else console[_0x1ce08e(0x113)]('CS:\x20No\x20squadrons\x20generated.\x20Skipping\x20CS\x20sequence.'),isWaveTransitioning=!![],setTimeout(()=>{(isInGameState||!isInGameState&&playerLives>0x0)&&typeof resetWave==='function'&&resetWave();},NEXT_WAVE_DELAY_AFTER_MESSAGE);}function fireEnemyBurst(_0x38edc6,_0x353e88,_0x5cda9e){const _0x536532=_0x8deb;if(!_0x38edc6||isPaused||!isInGameState||playerLives<=0x0||isChallengingStage||isWaveTransitioning||isShipCaptured)return;const _0x421320=Math[_0x536532(0x177)](scaleValue(level,BASE_ENEMY_BULLET_BURST_COUNT,MAX_ENEMY_BULLET_BURST_COUNT));for(let _0xbe858f=0x0;_0xbe858f<_0x421320;_0xbe858f++){const _0x56fef7=_0x5cda9e+_0xbe858f*ENTRANCE_FIRE_BURST_DELAY_MS,_0x4b8f73=setTimeout(()=>{const _0x535f3a=_0x536532;try{const _0x4d42ba=enemySpawnTimeouts[_0x535f3a(0x1b9)](_0x4b8f73);_0x4d42ba>-0x1&&enemySpawnTimeouts[_0x535f3a(0x102)](_0x4d42ba,0x1);if(isPaused||!isInGameState||playerLives<=0x0||isChallengingStage||isWaveTransitioning||isShipCaptured)return;const _0x332677=enemies[_0x535f3a(0x15a)](_0x13143e=>_0x13143e&&_0x13143e['id']===_0x38edc6);_0x332677&&_0x332677[_0x535f3a(0x167)]===_0x353e88&&(createBulletSimple(_0x332677)&&(_0xbe858f===0x0&&playSound(enemyShootSound),_0x332677[_0x535f3a(0x1b1)]=Date['now']()));}catch(_0x9e798){console[_0x535f3a(0x195)](_0x535f3a(0xda)+(_0xbe858f+0x1)+'/'+_0x421320+_0x535f3a(0x1a7)+_0x38edc6+':',_0x9e798);}},_0x56fef7);enemySpawnTimeouts[_0x536532(0x155)](_0x4b8f73);}}function fireFixedEnemyBurst(_0x459883,_0x291143,_0x5562d1,_0x28e647){if(!_0x459883||isPaused||!isInGameState||playerLives<=0x0||isChallengingStage||isWaveTransitioning||isShipCaptured||_0x28e647<=0x0)return;for(let _0x2162a2=0x0;_0x2162a2<_0x28e647;_0x2162a2++){const _0x1bd471=_0x5562d1+_0x2162a2*ENTRANCE_FIRE_BURST_DELAY_MS,_0x2657e9=setTimeout(()=>{const _0x16872c=_0x8deb;try{const _0x3c8391=enemySpawnTimeouts[_0x16872c(0x1b9)](_0x2657e9);_0x3c8391>-0x1&&enemySpawnTimeouts[_0x16872c(0x102)](_0x3c8391,0x1);if(isPaused||!isInGameState||playerLives<=0x0||isChallengingStage||isWaveTransitioning||isShipCaptured)return;const _0x2524c4=enemies[_0x16872c(0x15a)](_0xc173d8=>_0xc173d8&&_0xc173d8['id']===_0x459883);if(_0x2524c4)createBulletSimple(_0x2524c4)&&(_0x2162a2===0x0&&playSound(enemyShootSound),_0x2524c4[_0x16872c(0x1b1)]=Date['now']());else{}}catch(_0x4f9cc4){console[_0x16872c(0x195)](_0x16872c(0x1b0)+(_0x2162a2+0x1)+'/'+_0x28e647+_0x16872c(0x1a7)+_0x459883+':',_0x4f9cc4);}},_0x1bd471);enemySpawnTimeouts['push'](_0x2657e9);}}function _0x8deb(_0x577069,_0x264d2d){const _0x508247=_0x5082();return _0x8deb=function(_0x8deb96,_0x2739bc){_0x8deb96=_0x8deb96-0xb7;let _0x1b932d=_0x508247[_0x8deb96];return _0x1b932d;},_0x8deb(_0x577069,_0x264d2d);}function startFullGridWave(){const _0x4f8cf5=_0x8deb;if(!currentWaveDefinition||currentWaveDefinition[_0x4f8cf5(0xe9)]===0x0||!isFullGridWave){console[_0x4f8cf5(0x195)]('Attempted\x20to\x20start\x20Full\x20Grid\x20wave\x20without\x20valid\x20definition\x20or\x20when\x20not\x20in\x20Full\x20Grid\x20mode.'),isWaveTransitioning=!![],readyForNextWaveReset=!![];return;}playSound(entranceSound),enemySpawnTimeouts[_0x4f8cf5(0x17b)](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,squadronCompletionStatus={},squadronEntranceFiringStatus={};let _0x570b00=0x0;currentWaveDefinition[_0x4f8cf5(0x17b)]((_0x245103,_0x3d8047)=>{const _0x40bb8a=_0x4f8cf5;let _0x4f25b3=0x0;_0x245103&&_0x245103[_0x40bb8a(0x112)]&&Array[_0x40bb8a(0x1d1)](_0x245103[_0x40bb8a(0x112)])?(_0x4f25b3=_0x245103[_0x40bb8a(0x112)][_0x40bb8a(0xe9)],_0x245103[_0x40bb8a(0x112)][_0x40bb8a(0x17b)]((_0x1e572d,_0x37de76)=>{const _0x2a6799=_0x40bb8a;try{if(!_0x1e572d||!_0x1e572d['type']||typeof _0x1e572d['gridRow']===_0x2a6799(0x158)||typeof _0x1e572d[_0x2a6799(0x159)]===_0x2a6799(0x158)){console[_0x2a6799(0x195)](_0x2a6799(0xc4)+_0x3d8047+',\x20index\x20'+_0x37de76+'.\x20Skipping.');return;}let _0x4f9a2a=_0x1e572d['type'],_0x4a89c4=_0x4f9a2a===ENEMY3_TYPE?ENEMY3_MAX_HITS:0x1,_0x2a673d,_0xd57fcd;if(_0x4f9a2a===ENEMY1_TYPE)_0x2a673d=ENEMY1_WIDTH,_0xd57fcd=ENEMY1_HEIGHT;else _0x4f9a2a===ENEMY3_TYPE?(_0x2a673d=BOSS_WIDTH,_0xd57fcd=BOSS_HEIGHT):(_0x2a673d=ENEMY_WIDTH,_0xd57fcd=ENEMY_HEIGHT);let _0x36e2fb,_0x4d7b74;try{const {x:_0x54a247,y:_0xa2f601}=getCurrentGridSlotPosition(_0x1e572d['gridRow'],_0x1e572d[_0x2a6799(0x159)],_0x2a673d);_0x36e2fb=_0x54a247,_0x4d7b74=_0xa2f601;}catch(_0x2b5c74){console[_0x2a6799(0x195)]('Full\x20Grid:\x20Error\x20getting\x20target\x20grid\x20pos\x20for\x20enemy\x20'+_0x1e572d[_0x2a6799(0x16b)]+_0x2a6799(0x12d)+_0x1e572d[_0x2a6799(0x1c3)]+','+_0x1e572d['gridCol']+']',_0x2b5c74),_0x36e2fb=gameCanvas?.[_0x2a6799(0x166)]/0x2||0xc8,_0x4d7b74=ENEMY_TOP_MARGIN+_0x1e572d[_0x2a6799(0x1c3)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}const _0x520e9c={'x':_0x36e2fb,'y':_0x4d7b74,'width':_0x2a673d,'height':_0xd57fcd,'targetGridX':_0x36e2fb,'targetGridY':_0x4d7b74,'speed':0x0,'state':_0x2a6799(0x11e),'gridRow':_0x1e572d[_0x2a6799(0x1c3)],'gridCol':_0x1e572d['gridCol'],'type':_0x4f9a2a,'health':_0x4a89c4,'isDamaged':![],'velocityX':0x0,'velocityY':0x0,'attackPathStep':0x0,'initialY':0x0,'initialX':0x0,'diveDirection':0x1,'lastFiredTime':0x0,'targetX1':0x0,'targetY1':0x0,'targetX2':0x0,'targetY2':0x0,'targetX3':0x0,'targetY3':0x0,'attackPathSegments':[],'attackPathSegmentIndex':0x0,'attackPathT':0x0,'attackStartTime':0x0,'attackFormationOffsetX':0x0,'attackGroupId':null,'entrancePathId':null,'pathSegmentIndex':0x0,'pathT':0x0,'squadronId':_0x3d8047,'squadronEnemyIndex':_0x37de76,'id':_0x2a6799(0x116)+_0x3d8047+'-'+_0x37de76+'-'+Date[_0x2a6799(0x154)]()+'-'+Math[_0x2a6799(0xce)]()[_0x2a6799(0x142)](0x24)['substring'](0x2,0x7),'justReturned':![],'canFireThisDive':![],'attackType':'normal','hasCapturedShip':_0x4f9a2a===ENEMY3_TYPE?![]:undefined,'capturedShipX':undefined,'capturedShipY':undefined,'capturedShipLastFiredTime':_0x4f9a2a===ENEMY3_TYPE?0x0:undefined,'captureStartTime':0x0,'capturePrepareTimeout':null,'pathSpeedMultiplier':0x1};enemies[_0x2a6799(0x155)](_0x520e9c),_0x570b00++;}catch(_0x5f5649){console['error'](_0x2a6799(0x1ba)+_0x3d8047+',\x20Idx\x20'+_0x37de76+'):',_0x5f5649);}})):console[_0x40bb8a(0x113)](_0x40bb8a(0x17a)+_0x3d8047+_0x40bb8a(0x138)),squadronCompletionStatus[_0x3d8047]={'completed':_0x4f25b3,'total':_0x4f25b3};}),totalEnemiesScheduledForWave=_0x570b00,enemiesSpawnedThisWave=_0x570b00,isEntrancePhaseActive=![],gridJustCompleted=!![],!isGridSoundPlaying&&(isGridSoundPlaying=!![],playSound(gridBackgroundSound)),GRID_BREATH_ENABLED&&!isGridBreathingActive&&(isGridBreathingActive=!![],gridBreathStartTime=Date['now'](),currentGridBreathFactor=0x0),lastGridFireCheckTime=Date[_0x4f8cf5(0x154)](),firstEnemyLanded=!![];}function scheduleEntranceFlightWave(){const _0x16587c=_0x8deb;if(isFullGridWave||isChallengingStage){console[_0x16587c(0x113)](_0x16587c(0xf7)+level+_0x16587c(0x192)+isFullGridWave+_0x16587c(0xe5)+isChallengingStage+_0x16587c(0xe7)),isEntrancePhaseActive=![];return;}if(!currentWaveDefinition||currentWaveDefinition[_0x16587c(0xe9)]===0x0){console[_0x16587c(0x113)](_0x16587c(0x115)),isEntrancePhaseActive=![],stopSound(entranceSound),isWaveTransitioning=!![],readyForNextWaveReset=!![];return;}const _0x2388ce=normalWaveEntrancePaths;if(Object['keys'](_0x2388ce)[_0x16587c(0xe9)]===0x0){console['error']('CRITICAL:\x20Failed\x20to\x20define\x20Normal\x20Wave\x20entrance\x20paths!'),isEntrancePhaseActive=![],stopSound(entranceSound),isWaveTransitioning=!![],readyForNextWaveReset=!![];return;}enemySpawnTimeouts[_0x16587c(0x17b)](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,currentWaveDefinition[_0x16587c(0x17b)](_0x258444=>totalEnemiesScheduledForWave+=_0x258444['enemies'][_0x16587c(0xe9)]),enemiesSpawnedThisWave=0x0,squadronCompletionStatus={},squadronEntranceFiringStatus={},isEntrancePhaseActive=!![],playSound(entranceSound),currentWaveDefinition[_0x16587c(0x17b)]((_0x30161c,_0x3b4303)=>{const _0x5d48a1=_0x16587c;squadronCompletionStatus[_0x3b4303]={'completed':0x0,'total':_0x30161c[_0x5d48a1(0x112)]?.['length']||0x0,'hasFiredPostLanding':![]};const _0xb20b76=_0x3b4303*NORMAL_WAVE_SQUADRON_INTERVAL;squadronEntranceFiringStatus[_0x3b4303]={'hasFired':![],'scheduledStartTime':0x0},scheduleSingleEntranceSquadron(_0x30161c,_0x3b4303,_0xb20b76);});}function checkAndScheduleNextSquadron(_0x31da1c){}function resetJustReturnedFlags(_0x1606c1){const _0x31b53d=_0x8deb;enemies[_0x31b53d(0x17b)](_0x55587c=>{const _0x314a99=_0x31b53d;let _0x1364f2=![];if(_0x1606c1 instanceof Set)_0x1364f2=_0x1606c1['has'](_0x55587c['id']);else typeof _0x1606c1===_0x314a99(0x143)&&(_0x1364f2=_0x55587c['id']===_0x1606c1);_0x55587c&&_0x55587c[_0x314a99(0x167)]===_0x314a99(0x11e)&&_0x55587c[_0x314a99(0x156)]&&!_0x1364f2&&(_0x55587c[_0x314a99(0x156)]=![]);});}function generateAttackPath(_0x4d02d5){const _0x50192e=_0x8deb;try{if(!_0x4d02d5||!gameCanvas)return[];const _0x5668e2=_0x4d02d5[_0x50192e(0x16b)]===ENEMY3_TYPE?BOSS_WIDTH:_0x4d02d5[_0x50192e(0x16b)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x1e8692=_0x4d02d5[_0x50192e(0x16b)]===ENEMY3_TYPE?BOSS_HEIGHT:_0x4d02d5[_0x50192e(0x16b)]===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT,_0xb0983=_0x5668e2*0.5,_0x1a2241=gameCanvas[_0x50192e(0x166)],_0x1bd3d6=gameCanvas[_0x50192e(0xe6)];let _0x4cb039=[];const _0x2690a2={'x':_0x4d02d5['x'],'y':_0x4d02d5['y']},_0x62d319=Math[_0x50192e(0x117)](_0x1bd3d6*0.06,_0x1e8692*1.8),_0x3f1a84=Math[_0x50192e(0x117)](_0x1a2241*0.04,_0x5668e2*1.2),_0x5c513b=_0x4d02d5['x']+_0x5668e2/0x2<_0x1a2241/0x2?0x1:-0x1,_0x2ebf99={'x':_0x2690a2['x']-_0x5c513b*_0x3f1a84*0.6,'y':_0x2690a2['y']-_0x62d319};_0x2ebf99['x']=Math[_0x50192e(0x1be)](_0xb0983,Math[_0x50192e(0x117)](_0x1a2241-_0xb0983-_0x5668e2,_0x2ebf99['x'])),_0x2ebf99['y']=Math[_0x50192e(0x1be)](_0xb0983,_0x2ebf99['y']);const _0x2a8770={'x':_0x2690a2['x']+_0x5c513b*_0x3f1a84*0.1,'y':_0x2690a2['y']-_0x62d319*1.4},_0x418772={'x':_0x2ebf99['x']+_0x5c513b*_0x3f1a84*0.3,'y':_0x2690a2['y']-_0x62d319*1.5},_0x21281f={'p0':_0x2690a2,'p1':_0x2a8770,'p2':_0x418772,'p3':_0x2ebf99};_0x4cb039[_0x50192e(0x155)](_0x21281f);const _0x20cf78=_0x2ebf99,_0x442762=_0x1bd3d6*0.45,_0x285e53=_0x1a2241*0.22,_0x5f51a4=_0x1bd3d6*0.28,_0x4c3413=0.5,_0x197e37=0.6,_0x458bef=_0x1bd3d6*0.85,_0x143186=Math[_0x50192e(0x10c)](Math['random']()*0x3);let _0x156732=[];if(_0x143186===0x0){const _0x336fdd=_0x442762+Math['random']()*_0x1bd3d6*0.1,_0x12a494=_0x285e53+Math['random']()*_0x1a2241*0.08,_0x3b99d0=_0x5f51a4+Math['random']()*_0x1bd3d6*0.08,_0x2a2e72=_0x20cf78['x']+_0x5c513b*_0x12a494*0.5,_0x43b145=Math[_0x50192e(0x117)](_0x458bef,_0x20cf78['y']+_0x336fdd),_0x416547=_0x2a2e72+_0x5c513b*_0x12a494*0.5,_0x1d9ff8=Math['max'](_0x20cf78['y']+0x14,_0x43b145-_0x3b99d0),_0x5efe3f=_0x416547-_0x5c513b*_0x12a494*0.9,_0x43d7fd=Math[_0x50192e(0x1be)](_0x20cf78['y']+0x28,_0x1d9ff8+_0x3b99d0*0.6),_0x1fc3d2=_0x5efe3f-_0x5c513b*_0x12a494*0.3,_0x111827=_0x1bd3d6+_0x1e8692*0x2,_0x5c1b06=Math[_0x50192e(0x1be)](_0xb0983,Math[_0x50192e(0x117)](_0x1a2241-_0xb0983-_0x5668e2,_0x2a2e72)),_0xc5c96e=Math[_0x50192e(0x1be)](_0xb0983,Math[_0x50192e(0x117)](_0x1a2241-_0xb0983-_0x5668e2,_0x416547)),_0x3a8071=Math[_0x50192e(0x1be)](_0xb0983,Math['min'](_0x1a2241-_0xb0983-_0x5668e2,_0x5efe3f)),_0x11daf4={'x':_0x20cf78['x'],'y':_0x20cf78['y']+_0x336fdd*_0x197e37*0.5},_0x324167={'x':_0x5c1b06-_0x5c513b*_0x12a494*_0x4c3413,'y':_0x43b145},_0x50f828={'x':_0x5c1b06,'y':_0x43b145},_0x55825c={'x':_0x5c1b06+_0x5c513b*_0x12a494*_0x4c3413,'y':_0x43b145},_0x14c69c={'x':_0xc5c96e,'y':_0x1d9ff8+_0x3b99d0*_0x197e37},_0x27af5e={'x':_0xc5c96e,'y':_0x1d9ff8},_0x1b2714={'x':_0xc5c96e,'y':_0x1d9ff8-_0x3b99d0*_0x197e37*0.5},_0x51c876={'x':_0x3a8071+_0x5c513b*_0x12a494*_0x4c3413,'y':_0x43d7fd},_0x9dec8d={'x':_0x3a8071,'y':_0x43d7fd},_0x5817c9={'x':_0x9dec8d['x'],'y':_0x9dec8d['y']+_0x1bd3d6*0.1},_0x2161c1={'x':_0x1fc3d2,'y':_0x111827-_0x1bd3d6*0.2},_0x51f100={'x':_0x1fc3d2,'y':_0x111827};_0x156732=[{'p0':_0x20cf78,'p1':_0x11daf4,'p2':_0x324167,'p3':_0x50f828},{'p0':_0x50f828,'p1':_0x55825c,'p2':_0x14c69c,'p3':_0x27af5e},{'p0':_0x27af5e,'p1':_0x1b2714,'p2':_0x51c876,'p3':_0x9dec8d},{'p0':_0x9dec8d,'p1':_0x5817c9,'p2':_0x2161c1,'p3':_0x51f100}];}else{if(_0x143186===0x1){const _0x3bd6f7=_0x442762*0.8+Math['random']()*_0x1bd3d6*0.1,_0x423d04=_0x285e53*1.2+Math[_0x50192e(0xce)]()*_0x1a2241*0.1,_0x506256=_0x5f51a4*0.7+Math[_0x50192e(0xce)]()*_0x1bd3d6*0.1,_0x1167d9=_0x20cf78['x']+_0x5c513b*_0x423d04*0.4,_0x5a8872=Math[_0x50192e(0x117)](_0x458bef-_0x506256*0.5,_0x20cf78['y']+_0x3bd6f7*0.6),_0x5bfca4=_0x1167d9+_0x5c513b*_0x423d04*0.6,_0x28e27e=Math[_0x50192e(0x117)](_0x458bef,_0x5a8872+_0x506256),_0x4c4de5=_0x5bfca4-_0x5c513b*_0x423d04*0.5,_0x4b460a=_0x1bd3d6+_0x1e8692*0x2,_0x213f64=Math[_0x50192e(0x1be)](_0xb0983,Math[_0x50192e(0x117)](_0x1a2241-_0xb0983-_0x5668e2,_0x1167d9)),_0x37bdc1=Math[_0x50192e(0x1be)](_0xb0983,Math['min'](_0x1a2241-_0xb0983-_0x5668e2,_0x5bfca4)),_0x3dd683={'x':_0x20cf78['x']-_0x5c513b*_0x423d04*0.1,'y':_0x20cf78['y']+_0x3bd6f7*0.3},_0xa523c={'x':_0x213f64-_0x5c513b*_0x423d04*_0x4c3413*0.8,'y':_0x5a8872+_0x506256*_0x197e37*0.4},_0x5e833f={'x':_0x213f64,'y':_0x5a8872},_0x855f7e={'x':_0x213f64+_0x5c513b*_0x423d04*_0x4c3413*0.8,'y':_0x5a8872-_0x506256*_0x197e37*0.4},_0x4bef2a={'x':_0x37bdc1+_0x5c513b*_0x423d04*_0x4c3413*0.6,'y':_0x28e27e+_0x506256*_0x197e37*0.5},_0x21a9e2={'x':_0x37bdc1,'y':_0x28e27e},_0x4f7d89={'x':_0x37bdc1-_0x5c513b*_0x423d04*0.2,'y':_0x28e27e+_0x1bd3d6*0.1},_0x5969f1={'x':_0x4c4de5,'y':_0x4b460a-_0x1bd3d6*0.3},_0x3d4948={'x':_0x4c4de5,'y':_0x4b460a};_0x156732=[{'p0':_0x20cf78,'p1':_0x3dd683,'p2':_0xa523c,'p3':_0x5e833f},{'p0':_0x5e833f,'p1':_0x855f7e,'p2':_0x4bef2a,'p3':_0x21a9e2},{'p0':_0x21a9e2,'p1':_0x4f7d89,'p2':_0x5969f1,'p3':_0x3d4948}];}else{const _0x30e93a=_0x442762*0.6+Math['random']()*_0x1bd3d6*0.05,_0x273297=_0x285e53*0.7+Math['random']()*_0x1a2241*0.05,_0x36b1eb=_0x5f51a4*0.6+Math['random']()*_0x1bd3d6*0.05,_0x5dc056=_0x36b1eb*1.5,_0x55534d=_0x20cf78['x']+_0x5c513b*_0x273297*0.5,_0x132dd3=Math[_0x50192e(0x117)](_0x458bef-_0x5dc056,_0x20cf78['y']+_0x30e93a),_0xc8bfd3=_0x55534d+_0x5c513b*_0x273297*0.5,_0x2fb369=_0x132dd3+_0x36b1eb,_0x1902b2=_0xc8bfd3-_0x5c513b*_0x273297*0.8,_0xfa203e=Math[_0x50192e(0x117)](_0x458bef,_0x2fb369+_0x5dc056*0.7),_0x3d26bd=_0x1902b2+_0x5c513b*_0x273297*0.4,_0xe3379e=_0xfa203e+_0x36b1eb*0.8,_0x3b90bc=_0x3d26bd,_0x761073=_0x1bd3d6+_0x1e8692*0x2,_0x110381=Math[_0x50192e(0x1be)](_0xb0983,Math[_0x50192e(0x117)](_0x1a2241-_0xb0983-_0x5668e2,_0x55534d)),_0xafa253=Math[_0x50192e(0x1be)](_0xb0983,Math[_0x50192e(0x117)](_0x1a2241-_0xb0983-_0x5668e2,_0xc8bfd3)),_0x25921e=Math[_0x50192e(0x1be)](_0xb0983,Math[_0x50192e(0x117)](_0x1a2241-_0xb0983-_0x5668e2,_0x1902b2)),_0x4a650e=Math[_0x50192e(0x1be)](_0xb0983,Math['min'](_0x1a2241-_0xb0983-_0x5668e2,_0x3d26bd)),_0x15f749={'x':_0x20cf78['x'],'y':_0x20cf78['y']+_0x30e93a*0.5},_0x14d959={'x':_0x110381-_0x5c513b*_0x273297*_0x4c3413,'y':_0x132dd3+_0x36b1eb*_0x197e37*0.3},_0x27ade9={'x':_0x110381,'y':_0x132dd3},_0xf97249={'x':_0x110381+_0x5c513b*_0x273297*_0x4c3413,'y':_0x132dd3-_0x36b1eb*_0x197e37*0.3},_0x180aa7={'x':_0xafa253+_0x5c513b*_0x273297*_0x4c3413,'y':_0x2fb369+_0x36b1eb*_0x197e37*0.5},_0x4361a6={'x':_0xafa253,'y':_0x2fb369},_0x5127b9={'x':_0xafa253-_0x5c513b*_0x273297*_0x4c3413,'y':_0x2fb369-_0x36b1eb*_0x197e37*0.5},_0x2641c={'x':_0x25921e-_0x5c513b*_0x273297*_0x4c3413,'y':_0xfa203e+_0x36b1eb*_0x197e37*0.4},_0x47fcd6={'x':_0x25921e,'y':_0xfa203e},_0x46ff43={'x':_0x25921e+_0x5c513b*_0x273297*_0x4c3413,'y':_0xfa203e-_0x36b1eb*_0x197e37*0.4},_0x2f3b62={'x':_0x4a650e+_0x5c513b*_0x273297*_0x4c3413,'y':_0xe3379e+_0x36b1eb*_0x197e37*0.6},_0x12b3c4={'x':_0x4a650e,'y':_0xe3379e},_0x592638={'x':_0x4a650e-_0x5c513b*_0x273297*0.1,'y':_0xe3379e+_0x1bd3d6*0.05},_0x69cad4={'x':_0x3b90bc,'y':_0x761073-_0x1bd3d6*0.2},_0x2fe6ad={'x':_0x3b90bc,'y':_0x761073};_0x156732=[{'p0':_0x20cf78,'p1':_0x15f749,'p2':_0x14d959,'p3':_0x27ade9},{'p0':_0x27ade9,'p1':_0xf97249,'p2':_0x180aa7,'p3':_0x4361a6},{'p0':_0x4361a6,'p1':_0x5127b9,'p2':_0x2641c,'p3':_0x47fcd6},{'p0':_0x47fcd6,'p1':_0x46ff43,'p2':_0x2f3b62,'p3':_0x12b3c4},{'p0':_0x12b3c4,'p1':_0x592638,'p2':_0x69cad4,'p3':_0x2fe6ad}];}}return _0x4cb039[_0x50192e(0x155)](..._0x156732),_0x4cb039;}catch(_0x216a62){return console['error'](_0x50192e(0x123)+_0x4d02d5?.['id']+':',_0x216a62),[];}}function handleEnemyHit(_0x383847){const _0x2f4f55=_0x8deb;if(!_0x383847)return{'destroyed':![],'pointsAwarded':0x0};const _0x9b2932=Date[_0x2f4f55(0x154)]();let _0x3fccdd=0x0,_0x2a3c96=![],_0x51999c=_0x383847[_0x2f4f55(0x14b)],_0x48f19b=null;const _0x214e68=_0x383847[_0x2f4f55(0x16b)]===ENEMY3_TYPE?BOSS_WIDTH:_0x383847['type']===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x1239bb=_0x383847['type']===ENEMY3_TYPE?BOSS_HEIGHT:_0x383847[_0x2f4f55(0x16b)]===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT,_0x361172=_0x383847[_0x2f4f55(0x16b)]===ENEMY3_TYPE&&_0x383847['hasCapturedShip'],_0x2b41e4=_0x383847[_0x2f4f55(0x16b)]===ENEMY3_TYPE&&_0x383847[_0x2f4f55(0x13e)],_0x626bc6=_0x383847['x']+_0x214e68/0x2,_0x1ea329=_0x383847['y']+_0x1239bb*0.2;createHitSparks(_0x626bc6,_0x1ea329),_0x383847[_0x2f4f55(0x1a6)]--;_0x383847['type']===ENEMY3_TYPE&&(_0x383847[_0x2f4f55(0x14b)]=_0x383847[_0x2f4f55(0x1a6)]<ENEMY3_MAX_HITS);if(_0x383847['health']<=0x0){_0x2a3c96=!![];if(_0x361172&&_0x2b41e4){if(_0x383847[_0x2f4f55(0x13e)]){const _0x2ff2aa=_0x383847[_0x2f4f55(0x13e)][_0x2f4f55(0x166)],_0x1ab55c=_0x383847[_0x2f4f55(0x13e)][_0x2f4f55(0xe6)],_0x289215=_0x383847['x']+(_0x214e68-_0x2ff2aa)/0x2+CAPTURED_SHIP_OFFSET_X,_0x21c469=_0x383847['y']+CAPTURED_SHIP_OFFSET_Y,_0x222b0e=fallingShips[_0x2f4f55(0x1d2)](_0x1a9a25=>Math['abs'](_0x1a9a25['x']-_0x289215)<0x1&&Math['abs'](_0x1a9a25['y']-_0x21c469)<0x1);!_0x222b0e?fallingShips[_0x2f4f55(0x155)]({'x':_0x289215,'y':_0x21c469,'width':_0x2ff2aa,'height':_0x1ab55c,'creationTime':_0x9b2932,'tintProgress':0x1,'rotation':0x0}):console[_0x2f4f55(0x113)](_0x2f4f55(0x184));}else console[_0x2f4f55(0x195)](_0x2f4f55(0x1d3));_0x383847[_0x2f4f55(0x1c5)]=![],_0x383847[_0x2f4f55(0x13e)]=null;}else _0x361172&&!_0x2b41e4&&(console[_0x2f4f55(0x195)](_0x2f4f55(0x198)+_0x383847['id']+_0x2f4f55(0x1b6)),_0x383847[_0x2f4f55(0x1c5)]=![],_0x383847[_0x2f4f55(0x13e)]=null);if(isChallengingStage){let _0x4f0b37=0x64;const _0x200532=csLastHitTime;csLastHitTime=_0x9b2932,csLastChainHitPosition={'x':_0x383847['x'],'y':_0x383847['y']},csCurrentChainHits>0x0&&_0x9b2932-_0x200532<CS_CHAIN_BREAK_TIME_MS?csCurrentChainHits++:(csCurrentChainHits=0x1,csCurrentChainScore=0x0),csCurrentChainHits>=CS_CHAIN_SCORE_THRESHOLD&&(_0x4f0b37*=0x2),_0x3fccdd=_0x4f0b37,csCurrentChainScore+=_0x3fccdd,scoreEarnedThisCS+=_0x3fccdd,challengingStageEnemiesHit++,_0x48f19b=explosionSound;}else{if(_0x383847['state']==='in_grid')_0x3fccdd=_0x383847[_0x2f4f55(0x16b)]===ENEMY1_TYPE?0x32:_0x383847[_0x2f4f55(0x16b)]===ENEMY2_TYPE?0x50:0x0,_0x383847['type']===ENEMY3_TYPE&&(_0x3fccdd=0x96),_0x48f19b=explosionSound;else{_0x3fccdd=_0x383847[_0x2f4f55(0x16b)]===ENEMY1_TYPE?0x64:_0x383847['type']===ENEMY2_TYPE?0xa0:0x0;if(_0x383847['type']===ENEMY3_TYPE){if(_0x361172){const _0x49265c=[0x3e8,0x5dc,0x7d0,0xbb8];_0x3fccdd=_0x49265c[Math[_0x2f4f55(0x10c)](Math[_0x2f4f55(0xce)]()*_0x49265c[_0x2f4f55(0xe9)])],_0x48f19b=bossHit2Sound;}else _0x51999c?(_0x3fccdd=0x190,_0x48f19b=bossHit2Sound):(_0x3fccdd=0x0,console[_0x2f4f55(0x113)](_0x2f4f55(0x170)+_0x3fccdd+_0x2f4f55(0x141)+(_0x383847[_0x2f4f55(0x1a6)]+0x1)),_0x48f19b=explosionSound);}else _0x48f19b=explosionSound;if(_0x2a3c96&&_0x3fccdd>0x0){const _0x19e685=normalWaveLastHitTime;normalWaveLastHitTime=_0x9b2932,normalWaveLastChainHitPosition={'x':_0x383847['x'],'y':_0x383847['y']};normalWaveLastChainHitPosition&&_0x9b2932-_0x19e685<NORMAL_WAVE_CHAIN_BREAK_TIME_MS?normalWaveCurrentChainHits++:(normalWaveCurrentChainHits=0x1,normalWaveCurrentChainScore=0x0);if(NORMAL_WAVE_CHAIN_BONUS_ENABLED&&normalWaveCurrentChainHits>=NORMAL_WAVE_CHAIN_SCORE_THRESHOLD){const _0x1cc849=[0x12c,0x258,0x3e8,0x5dc,0x7d0,0xbb8],_0x4aa03c=Math[_0x2f4f55(0x117)](_0x1cc849['length']-0x1,normalWaveCurrentChainHits-NORMAL_WAVE_CHAIN_SCORE_THRESHOLD),_0x449bcb=_0x1cc849[_0x4aa03c];_0x3fccdd+=_0x449bcb,normalWaveCurrentChainScore+=_0x449bcb;}}}}if(_0x3fccdd>0x0){score+=_0x3fccdd,highScore=Math['max'](highScore,score);let _0x98ac1=![],_0x4c79c0=null;if(!isManualControl)_0x98ac1=player1TriggeredHighScoreSound,_0x4c79c0=()=>{player1TriggeredHighScoreSound=!![];};else isTwoPlayerMode?currentPlayer===0x1?(_0x98ac1=player1TriggeredHighScoreSound,_0x4c79c0=()=>{player1TriggeredHighScoreSound=!![];}):(_0x98ac1=player2TriggeredHighScoreSound,_0x4c79c0=()=>{player2TriggeredHighScoreSound=!![];}):(_0x98ac1=player1TriggeredHighScoreSound,_0x4c79c0=()=>{player1TriggeredHighScoreSound=!![];});if(!_0x98ac1){if(score>highScore-_0x3fccdd){if(_0x4c79c0)_0x4c79c0();playSound(hiScoreSound);}}_0x2a3c96&&(!isManualControl||currentPlayer===0x1||!isTwoPlayerMode?(player1Score=score,player1EnemiesHit++):(player2Score=score,player2EnemiesHit++));checkAndAwardExtraLife();const _0xddccb5=_0x383847[_0x2f4f55(0x167)]==='in_grid'||isChallengingStage?FLOATING_SCORE_COLOR_GRID:FLOATING_SCORE_COLOR_ACTIVE;floatingScores[_0x2f4f55(0x155)]({'text':_0x3fccdd[_0x2f4f55(0x142)](),'x':_0x383847['x']+_0x214e68/0x2,'y':_0x383847['y'],'color':_0xddccb5,'creationTime':_0x9b2932,'displayStartTime':_0x9b2932+FLOATING_SCORE_APPEAR_DELAY});}createExplosion(_0x383847['x']+_0x214e68/0x2,_0x383847['y']+_0x1239bb/0x2);_0x383847['id']===capturingBossId&&stopSound(captureSound);if(_0x383847[_0x2f4f55(0x167)]===_0x2f4f55(0x162)||_0x383847[_0x2f4f55(0x167)]===_0x2f4f55(0x10e)||_0x383847[_0x2f4f55(0x167)]===_0x2f4f55(0xf8)||_0x383847[_0x2f4f55(0x167)]===_0x2f4f55(0xd9)||_0x383847[_0x2f4f55(0x167)]===_0x2f4f55(0x1d7)||_0x383847[_0x2f4f55(0x167)]===_0x2f4f55(0xd3)){if(_0x383847['type']===ENEMY3_TYPE)stopSound(bossGalagaDiveSound);else stopSound(butterflyDiveSound);}}else _0x2a3c96=![],_0x383847[_0x2f4f55(0x16b)]===ENEMY3_TYPE?(_0x48f19b=bossHit1Sound,_0x3fccdd=0x0):_0x3fccdd=0x0;return _0x48f19b&&playSound(_0x48f19b),{'destroyed':_0x2a3c96,'pointsAwarded':_0x3fccdd};}function createHitSparks(_0xa6908,_0x2d9d9a){const _0x476215=_0x8deb;if(!gameCtx)return;const _0x1b0fbd=Date[_0x476215(0x154)]();for(let _0x417a28=0x0;_0x417a28<HIT_SPARK_COUNT;_0x417a28++){const _0x28b1b3=Math['random']()*Math['PI']*0x2,_0x12848b=HIT_SPARK_SPEED*(0.7+Math[_0x476215(0xce)]()*0.6),_0x5c89de=HIT_SPARK_LIFETIME*(0.8+Math[_0x476215(0xce)]()*0.4);hitSparks[_0x476215(0x155)]({'x':_0xa6908,'y':_0x2d9d9a,'vx':Math[_0x476215(0x17e)](_0x28b1b3)*_0x12848b,'vy':Math[_0x476215(0xba)](_0x28b1b3)*_0x12848b,'creationTime':_0x1b0fbd,'lifetime':_0x5c89de,'size':HIT_SPARK_SIZE,'color':HIT_SPARK_COLOR});}}function updateHitSparks(){const _0x2ebde5=_0x8deb,_0x12ec2e=Date[_0x2ebde5(0x154)]();for(let _0x249507=hitSparks[_0x2ebde5(0xe9)]-0x1;_0x249507>=0x0;_0x249507--){const _0x578767=hitSparks[_0x249507],_0x555874=_0x12ec2e-_0x578767[_0x2ebde5(0x119)];_0x555874>=_0x578767[_0x2ebde5(0xe0)]?hitSparks['splice'](_0x249507,0x1):(_0x578767['vy']+=HIT_SPARK_GRAVITY,_0x578767['x']+=_0x578767['vx'],_0x578767['y']+=_0x578767['vy'],_0x578767[_0x2ebde5(0x10b)]=Math['max'](0x0,0x1-_0x555874*HIT_SPARK_FADE_SPEED));}}function moveEntities(){const _0x7adb6=_0x8deb;if(isPaused)return;try{if(ship&&isInGameState&&playerLives>0x0&&gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage&&!isWaitingForRespawn){let _0x789e21=ship[_0x7adb6(0x166)];isDualShipActive&&(_0x789e21+=DUAL_SHIP_OFFSET_X);let _0x248a5a=ship['x'];if(isManualControl){let _0x16a06f=![],_0x5bcd4f=![];currentPlayer===0x1||!isTwoPlayerMode?(_0x16a06f=leftPressed,_0x5bcd4f=rightPressed):(_0x16a06f=p2LeftPressed,_0x5bcd4f=p2RightPressed);if(_0x16a06f&&ship['x']>0x0)_0x248a5a=ship['x']-ship['speed'];else _0x5bcd4f&&ship['x']<gameCanvas['width']-_0x789e21&&(_0x248a5a=ship['x']+ship[_0x7adb6(0x19f)]);ship['x']=Math[_0x7adb6(0x1be)](0x0,Math[_0x7adb6(0x117)](gameCanvas[_0x7adb6(0x166)]-_0x789e21,_0x248a5a)),ship[_0x7adb6(0x153)]=ship['x'];}else{if(typeof smoothedShipX!=='undefined'){const _0x585046=0.1,_0x32d7ae=1.2;smoothedShipX+=(ship[_0x7adb6(0x153)]-smoothedShipX)*AI_SMOOTHING_FACTOR_MOVE;const _0x463d40=smoothedShipX-ship['x'],_0x117587=ship['speed']*_0x32d7ae;let _0x1d845e=0x0;if(Math[_0x7adb6(0x12e)](_0x463d40)>_0x585046){const _0x2ffe6c=isChallengingStage?CS_AI_MOVE_FRACTION:NORMAL_MOVE_FRACTION;_0x1d845e=_0x463d40*_0x2ffe6c,_0x1d845e=Math[_0x7adb6(0x1be)](-_0x117587,Math[_0x7adb6(0x117)](_0x117587,_0x1d845e)),Math[_0x7adb6(0x12e)](_0x1d845e)>Math[_0x7adb6(0x12e)](_0x463d40)&&(_0x1d845e=_0x463d40),ship['x']+=_0x1d845e,ship['x']=Math['max'](0x0,Math[_0x7adb6(0x117)](gameCanvas[_0x7adb6(0x166)]-_0x789e21,ship['x']));}}else ship['x']=Math[_0x7adb6(0x1be)](0x0,Math[_0x7adb6(0x117)](gameCanvas[_0x7adb6(0x166)]-_0x789e21,ship[_0x7adb6(0x153)]));}}const _0x1200ed=Date['now']();for(let _0xf14f6e=bullets[_0x7adb6(0xe9)]-0x1;_0xf14f6e>=0x0;_0xf14f6e--){const _0x4f69b8=bullets[_0xf14f6e];_0x4f69b8?(_0x4f69b8['y']-=_0x4f69b8[_0x7adb6(0x19f)],_0x4f69b8['y']+PLAYER_BULLET_HEIGHT<0x0&&bullets['splice'](_0xf14f6e,0x1)):bullets[_0x7adb6(0x102)](_0xf14f6e,0x1);}for(let _0x118f8a=enemyBullets[_0x7adb6(0xe9)]-0x1;_0x118f8a>=0x0;_0x118f8a--){const _0x859a51=enemyBullets[_0x118f8a];if(!_0x859a51){enemyBullets[_0x7adb6(0x102)](_0x118f8a,0x1);continue;}_0x859a51['x']+=_0x859a51['vx'],_0x859a51['y']+=_0x859a51['vy'],(_0x859a51['y']>gameCanvas[_0x7adb6(0xe6)]||_0x859a51['y']<-ENEMY_BULLET_HEIGHT||_0x859a51['x']<-ENEMY_BULLET_WIDTH||_0x859a51['x']>gameCanvas[_0x7adb6(0x166)])&&enemyBullets[_0x7adb6(0x102)](_0x118f8a,0x1);}for(let _0x967b22=fallingShips[_0x7adb6(0xe9)]-0x1;_0x967b22>=0x0;_0x967b22--){const _0x554d0a=fallingShips[_0x967b22];if(!_0x554d0a){fallingShips['splice'](_0x967b22,0x1);continue;}_0x554d0a['y']+=FALLING_SHIP_SPEED;const _0x2fab97=_0x1200ed-_0x554d0a[_0x7adb6(0x119)];typeof _0x554d0a[_0x7adb6(0xd4)]===_0x7adb6(0x160)?_0x554d0a[_0x7adb6(0xd4)]=Math['max'](0x0,0x1-_0x2fab97/FALLING_SHIP_FADE_DURATION_MS):_0x554d0a[_0x7adb6(0xd4)]=0x0;if(typeof _0x554d0a[_0x7adb6(0x1cb)]===_0x7adb6(0x160)){const _0x5bff59=Math['min'](0x1,_0x2fab97/FALLING_SHIP_ROTATION_DURATION_MS);_0x554d0a[_0x7adb6(0x1cb)]=_0x5bff59*0x2*(0x2*Math['PI']);}else _0x554d0a[_0x7adb6(0x1cb)]=0x0;if(ship&&!isDualShipActive&&!isShipCaptured&&!isWaitingForRespawn&&_0x554d0a['y']+_0x554d0a[_0x7adb6(0xe6)]>=gameCanvas[_0x7adb6(0xe6)]-AUTO_DOCK_THRESHOLD){fallingShips[_0x7adb6(0x102)](_0x967b22,0x1),isDualShipActive=!![];currentPlayer===0x1?player1IsDualShipActive=!![]:player2IsDualShipActive=!![];playSound(dualShipSound);continue;}_0x554d0a['y']>gameCanvas[_0x7adb6(0xe6)]+_0x554d0a[_0x7adb6(0xe6)]&&fallingShips[_0x7adb6(0x102)](_0x967b22,0x1);}let _0x402242=0x0;if(!isChallengingStage&&!isWaveTransitioning&&isGridSoundPlaying&&enemies[_0x7adb6(0x1d2)](_0xb9a916=>_0xb9a916?.[_0x7adb6(0x167)]===_0x7adb6(0x11e))&&!isShowingPlayerGameOverMessage){const _0x5752e9=enemies[_0x7adb6(0x103)](_0x1c5535=>_0x1c5535?.[_0x7adb6(0x167)]==='in_grid');if(_0x5752e9[_0x7adb6(0xe9)]>0x0){let _0x308c82=gameCanvas[_0x7adb6(0x166)],_0x4f9394=0x0;_0x5752e9[_0x7adb6(0x17b)](_0x2fe0f0=>{const _0x3faaff=_0x7adb6;_0x2fe0f0&&(_0x308c82=Math[_0x3faaff(0x117)](_0x308c82,_0x2fe0f0['x']),_0x4f9394=Math[_0x3faaff(0x1be)](_0x4f9394,_0x2fe0f0['x']+_0x2fe0f0[_0x3faaff(0x166)]));});const _0x5890f0=gameCanvas[_0x7adb6(0x166)]*GRID_HORIZONTAL_MARGIN_PERCENT,_0x26fdfb=gameCanvas[_0x7adb6(0x166)]*(0x1-GRID_HORIZONTAL_MARGIN_PERCENT);if(gridMoveDirection===0x1&&_0x4f9394>=_0x26fdfb)gridMoveDirection=-0x1;else gridMoveDirection===-0x1&&_0x308c82<=_0x5890f0&&(gridMoveDirection=0x1);const _0x38fb57=scaleValue(level,BASE_GRID_MOVE_SPEED,MAX_GRID_MOVE_SPEED);_0x402242=_0x38fb57*gridMoveDirection,currentGridOffsetX+=_0x402242,enemies['forEach'](_0x3e9407=>{const _0x5e7f45=_0x7adb6;if(_0x3e9407&&(_0x3e9407[_0x5e7f45(0x167)]===_0x5e7f45(0x1d7)||_0x3e9407['state']===_0x5e7f45(0x11e)||_0x3e9407['state']===_0x5e7f45(0x14d)))try{const _0xcdb820=_0x3e9407[_0x5e7f45(0x16b)]===ENEMY3_TYPE?BOSS_WIDTH:_0x3e9407[_0x5e7f45(0x16b)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,{x:_0x16accf,y:_0x2d2761}=getCurrentGridSlotPosition(_0x3e9407['gridRow'],_0x3e9407[_0x5e7f45(0x159)],_0xcdb820);_0x3e9407[_0x5e7f45(0x161)]=_0x16accf,_0x3e9407[_0x5e7f45(0x126)]=_0x2d2761;}catch(_0x3c0500){console[_0x5e7f45(0x195)]('Error\x20updating\x20target\x20grid\x20pos\x20for\x20enemy\x20'+_0x3e9407?.['id']+_0x5e7f45(0xdd)+_0x3e9407?.[_0x5e7f45(0x167)]+_0x5e7f45(0x1c7),_0x3c0500);}});}else isGridSoundPlaying&&(stopSound(gridBackgroundSound),isGridSoundPlaying=![]);}else isGridSoundPlaying&&(!enemies[_0x7adb6(0x1d2)](_0x26016a=>_0x26016a?.['state']===_0x7adb6(0x11e))||isChallengingStage||isWaveTransitioning||isShowingPlayerGameOverMessage)&&(stopSound(gridBackgroundSound),isGridSoundPlaying=![]);for(let _0x4aeec7=enemies[_0x7adb6(0xe9)]-0x1;_0x4aeec7>=0x0;_0x4aeec7--){let _0x317a18=enemies[_0x4aeec7];if(!_0x317a18)continue;const _0x5ebaf3=_0x317a18['id'];if(_0x317a18[_0x7adb6(0xf6)]&&_0x317a18[_0x7adb6(0x167)]!=='preparing_capture'){clearTimeout(_0x317a18['capturePrepareTimeout']);const _0x584885=enemySpawnTimeouts[_0x7adb6(0x1b9)](_0x317a18[_0x7adb6(0xf6)]);if(_0x584885>-0x1)enemySpawnTimeouts[_0x7adb6(0x102)](_0x584885,0x1);_0x317a18[_0x7adb6(0xf6)]=null;}const _0x543c01=_0x317a18[_0x7adb6(0x16b)]===ENEMY3_TYPE?BOSS_WIDTH:_0x317a18[_0x7adb6(0x16b)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x2cd226=_0x317a18[_0x7adb6(0x16b)]===ENEMY3_TYPE?BOSS_HEIGHT:_0x317a18['type']===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT;switch(_0x317a18[_0x7adb6(0x167)]){case _0x7adb6(0xd9):{let _0x3e4780=CS_ENTRANCE_PATH_SPEED;const _0x2b7c4a=_0x317a18[_0x7adb6(0x1ce)]||0x1;_0x3e4780*=_0x2b7c4a;if(!isChallengingStage){enemies[_0x7adb6(0x102)](_0x4aeec7,0x1),_0x317a18=null;break;}let _0x193437=challengingStagePaths,_0x28156f=_0x193437[_0x317a18[_0x7adb6(0x1a2)]];if(!_0x28156f||_0x317a18[_0x7adb6(0x1af)]>=_0x28156f[_0x7adb6(0xe9)]){enemies[_0x7adb6(0x102)](_0x4aeec7,0x1),_0x317a18=null;break;}const _0x51415f=_0x28156f[_0x317a18[_0x7adb6(0x1af)]];if(!_0x51415f||!_0x51415f['p0']||!_0x51415f['p1']||!_0x51415f['p2']||!_0x51415f['p3']){console[_0x7adb6(0x195)](_0x7adb6(0x1ca)+_0x317a18['pathSegmentIndex']+_0x7adb6(0xe3)+_0x317a18[_0x7adb6(0x1a2)]+_0x7adb6(0x1a1)+_0x317a18['id']),enemies[_0x7adb6(0x102)](_0x4aeec7,0x1),_0x317a18=null;break;}_0x317a18['pathT']+=_0x3e4780;let _0x29c3b5,_0x24b02c,_0x7793b3=_0x317a18['x'],_0x19620e=_0x317a18['y'];if(_0x317a18[_0x7adb6(0xcb)]>=0x1){_0x317a18[_0x7adb6(0xcb)]=0x0,_0x317a18[_0x7adb6(0x1af)]++;if(_0x317a18[_0x7adb6(0x1af)]>=_0x28156f[_0x7adb6(0xe9)])enemies['splice'](_0x4aeec7,0x1),_0x317a18=null;else{const _0x15687a=_0x28156f[_0x317a18[_0x7adb6(0x1af)]];_0x15687a?.['p0']?(_0x29c3b5=_0x15687a['p0']['x'],_0x24b02c=_0x15687a['p0']['y']):(console[_0x7adb6(0x195)](_0x7adb6(0xc7)+_0x317a18[_0x7adb6(0x1af)]+_0x7adb6(0xe3)+_0x317a18[_0x7adb6(0x1a2)]+'.\x20Enemy\x20'+_0x5ebaf3),enemies['splice'](_0x4aeec7,0x1),_0x317a18=null);}}else try{_0x29c3b5=calculateBezierPoint(_0x317a18[_0x7adb6(0xcb)],_0x51415f['p0']['x'],_0x51415f['p1']['x'],_0x51415f['p2']['x'],_0x51415f['p3']['x']),_0x24b02c=calculateBezierPoint(_0x317a18[_0x7adb6(0xcb)],_0x51415f['p0']['y'],_0x51415f['p1']['y'],_0x51415f['p2']['y'],_0x51415f['p3']['y']);}catch(_0x4e8a35){console['error']('Error\x20calculating\x20CS\x20Bezier\x20point\x20for\x20enemy\x20'+_0x5ebaf3+':',_0x4e8a35),enemies[_0x7adb6(0x102)](_0x4aeec7,0x1),_0x317a18=null;}_0x317a18&&(isNaN(_0x29c3b5)||isNaN(_0x24b02c)?(console['error']('NaN\x20detected\x20in\x20CS\x20path\x20calculation\x20for\x20enemy\x20'+_0x5ebaf3+_0x7adb6(0x196)),enemies[_0x7adb6(0x102)](_0x4aeec7,0x1),_0x317a18=null):(_0x317a18[_0x7adb6(0x110)]=_0x29c3b5-_0x7793b3,_0x317a18[_0x7adb6(0xf3)]=_0x24b02c-_0x19620e,_0x317a18['x']=_0x29c3b5,_0x317a18['y']=_0x24b02c));break;}case _0x7adb6(0x10e):{if(isChallengingStage){enemies[_0x7adb6(0x102)](_0x4aeec7,0x1),_0x317a18=null;break;}let _0x50b7b9=normalWaveEntrancePaths,_0xe00382=_0x50b7b9[_0x317a18[_0x7adb6(0x1a2)]],_0x238a2e;_0x317a18[_0x7adb6(0x1a2)]===_0x7adb6(0x1d5)||_0x317a18[_0x7adb6(0x1a2)]===_0x7adb6(0x121)?_0x238a2e=BOSS_LOOP_ENTRANCE_PATH_SPEED:_0x238a2e=NORMAL_ENTRANCE_PATH_SPEED;if(!_0xe00382){console['warn']('Enemy\x20'+_0x5ebaf3+'\x20missing\x20SHARED\x20path\x20'+_0x317a18['entrancePathId']+'.\x20Switching\x20to\x20moving_to_grid.');try{_0x317a18[_0x7adb6(0x161)]=_0x317a18[_0x7adb6(0x161)]??gameCanvas[_0x7adb6(0x166)]/0x2,_0x317a18[_0x7adb6(0x126)]=_0x317a18[_0x7adb6(0x126)]??ENEMY_TOP_MARGIN;}catch(_0x1f9e90){console[_0x7adb6(0x195)]('Error\x20getting\x20grid\x20pos\x20for\x20'+_0x5ebaf3+_0x7adb6(0x152),_0x1f9e90),_0x317a18[_0x7adb6(0x161)]=gameCanvas['width']/0x2,_0x317a18[_0x7adb6(0x126)]=ENEMY_TOP_MARGIN;}_0x317a18['state']=_0x7adb6(0x14d),_0x317a18['pathT']=0x0,_0x317a18['pathSegmentIndex']=0x0,_0x317a18[_0x7adb6(0x110)]=0x0,_0x317a18['velocityY']=0x0;_0x317a18[_0x7adb6(0x10f)]!==undefined&&squadronCompletionStatus[_0x317a18['squadronId']]&&squadronCompletionStatus[_0x317a18[_0x7adb6(0x10f)]][_0x7adb6(0xd2)]++;break;}if(_0x317a18[_0x7adb6(0x1af)]>=_0xe00382[_0x7adb6(0xe9)]){console[_0x7adb6(0x113)](_0x7adb6(0xfd)+_0x5ebaf3+'\x20path\x20index\x20'+_0x317a18[_0x7adb6(0x1af)]+_0x7adb6(0x1ac)+_0x317a18['entrancePathId']+_0x7adb6(0x19b));try{_0x317a18[_0x7adb6(0x161)]=_0x317a18[_0x7adb6(0x161)]??gameCanvas[_0x7adb6(0x166)]/0x2,_0x317a18[_0x7adb6(0x126)]=_0x317a18[_0x7adb6(0x126)]??ENEMY_TOP_MARGIN;}catch(_0x1dc288){console['error'](_0x7adb6(0xf2)+_0x5ebaf3+_0x7adb6(0x1b5),_0x1dc288),_0x317a18[_0x7adb6(0x161)]=gameCanvas['width']/0x2,_0x317a18[_0x7adb6(0x126)]=ENEMY_TOP_MARGIN;}_0x317a18[_0x7adb6(0x167)]=_0x7adb6(0x14d),_0x317a18[_0x7adb6(0xcb)]=0x0,_0x317a18[_0x7adb6(0x1af)]=0x0,_0x317a18[_0x7adb6(0x110)]=0x0,_0x317a18[_0x7adb6(0xf3)]=0x0;_0x317a18[_0x7adb6(0x10f)]!==undefined&&squadronCompletionStatus[_0x317a18[_0x7adb6(0x10f)]]&&squadronCompletionStatus[_0x317a18[_0x7adb6(0x10f)]][_0x7adb6(0xd2)]++;break;}const _0x2a91af=_0xe00382[_0x317a18[_0x7adb6(0x1af)]];if(!_0x2a91af||!_0x2a91af['p0']||!_0x2a91af['p1']||!_0x2a91af['p2']||!_0x2a91af['p3']){console[_0x7adb6(0x195)](_0x7adb6(0x189)+_0x317a18['pathSegmentIndex']+'\x20for\x20SHARED\x20path\x20'+_0x317a18[_0x7adb6(0x1a2)]+'.\x20Enemy\x20'+_0x5ebaf3+_0x7adb6(0x19b));try{_0x317a18[_0x7adb6(0x161)]=_0x317a18['targetGridX']??gameCanvas[_0x7adb6(0x166)]/0x2,_0x317a18['targetGridY']=_0x317a18[_0x7adb6(0x126)]??ENEMY_TOP_MARGIN+_0x317a18[_0x7adb6(0x1c3)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}catch(_0x30b6c4){console[_0x7adb6(0x195)]('Error\x20getting\x20grid\x20pos\x20for\x20'+_0x5ebaf3+_0x7adb6(0x187),_0x30b6c4),_0x317a18['targetGridX']=gameCanvas['width']/0x2,_0x317a18['targetGridY']=ENEMY_TOP_MARGIN;}_0x317a18['state']=_0x7adb6(0x14d),_0x317a18[_0x7adb6(0xcb)]=0x0,_0x317a18[_0x7adb6(0x1af)]=0x0,_0x317a18['velocityX']=0x0,_0x317a18['velocityY']=0x0;_0x317a18[_0x7adb6(0x10f)]!==undefined&&squadronCompletionStatus[_0x317a18['squadronId']]&&squadronCompletionStatus[_0x317a18[_0x7adb6(0x10f)]][_0x7adb6(0xd2)]++;break;}_0x317a18['pathT']+=_0x238a2e;let _0xa1ba9c,_0x2ddfa9,_0x573456=_0x317a18['x'],_0x1b69f1=_0x317a18['y'];if(_0x317a18['pathT']>=0x1){_0x317a18[_0x7adb6(0xcb)]=0x0,_0x317a18['pathSegmentIndex']++;if(_0x317a18[_0x7adb6(0x1af)]>=_0xe00382[_0x7adb6(0xe9)]){let _0x3ce211,_0x58bd03;try{_0x3ce211=calculateBezierPoint(0x1,_0x2a91af['p0']['x'],_0x2a91af['p1']['x'],_0x2a91af['p2']['x'],_0x2a91af['p3']['x']),_0x58bd03=calculateBezierPoint(0x1,_0x2a91af['p0']['y'],_0x2a91af['p1']['y'],_0x2a91af['p2']['y'],_0x2a91af['p3']['y']);}catch(_0x43113f){console[_0x7adb6(0x195)](_0x7adb6(0x120)+_0x5ebaf3+_0x7adb6(0x182)+_0x317a18['entrancePathId'],_0x43113f),_0x3ce211=_0x2a91af['p3']['x'],_0x58bd03=_0x2a91af['p3']['y'];}_0x317a18['x']=_0x3ce211,_0x317a18['y']=_0x58bd03;try{_0x317a18['targetGridX']=_0x317a18[_0x7adb6(0x161)]??gameCanvas[_0x7adb6(0x166)]/0x2,_0x317a18[_0x7adb6(0x126)]=_0x317a18[_0x7adb6(0x126)]??ENEMY_TOP_MARGIN;}catch(_0x5bafb7){console[_0x7adb6(0x195)](_0x7adb6(0xc8)+_0x5ebaf3+_0x7adb6(0x182)+_0x317a18['entrancePathId'],_0x5bafb7),_0x317a18[_0x7adb6(0x161)]=_0x317a18['x'],_0x317a18[_0x7adb6(0x126)]=ENEMY_TOP_MARGIN+_0x317a18['gridRow']*(ENEMY_HEIGHT+ENEMY_V_SPACING);}const _0x31283f=_0x317a18[_0x7adb6(0x167)];_0x317a18[_0x7adb6(0x167)]=_0x7adb6(0x14d),_0x317a18['velocityX']=0x0,_0x317a18[_0x7adb6(0xf3)]=0x0,_0x317a18[_0x7adb6(0x1af)]=0x0;_0x31283f===_0x7adb6(0x10e)&&_0x317a18[_0x7adb6(0x10f)]!==undefined&&squadronCompletionStatus[_0x317a18['squadronId']]&&squadronCompletionStatus[_0x317a18['squadronId']][_0x7adb6(0xd2)]++;break;}else{const _0x1e2ee4=_0xe00382[_0x317a18[_0x7adb6(0x1af)]];if(_0x1e2ee4?.['p0'])_0xa1ba9c=_0x1e2ee4['p0']['x'],_0x2ddfa9=_0x1e2ee4['p0']['y'];else{console['error']('Invalid\x20next\x20Normal\x20Bezier\x20segment\x20'+_0x317a18[_0x7adb6(0x1af)]+'\x20for\x20SHARED\x20path\x20'+_0x317a18[_0x7adb6(0x1a2)]+'.\x20Enemy\x20'+_0x5ebaf3+_0x7adb6(0x19b));try{_0x317a18['targetGridX']=_0x317a18['targetGridX']??gameCanvas[_0x7adb6(0x166)]/0x2,_0x317a18[_0x7adb6(0x126)]=_0x317a18['targetGridY']??ENEMY_TOP_MARGIN;}catch(_0x2d296c){console[_0x7adb6(0x195)]('Error\x20getting\x20grid\x20pos\x20for\x20'+_0x5ebaf3+_0x7adb6(0x145),_0x2d296c),_0x317a18[_0x7adb6(0x161)]=gameCanvas[_0x7adb6(0x166)]/0x2,_0x317a18[_0x7adb6(0x126)]=ENEMY_TOP_MARGIN;}_0x317a18['state']=_0x7adb6(0x14d),_0x317a18[_0x7adb6(0xcb)]=0x0,_0x317a18[_0x7adb6(0x1af)]=0x0,_0x317a18[_0x7adb6(0x110)]=0x0,_0x317a18[_0x7adb6(0xf3)]=0x0;_0x317a18[_0x7adb6(0x10f)]!==undefined&&squadronCompletionStatus[_0x317a18[_0x7adb6(0x10f)]]&&squadronCompletionStatus[_0x317a18[_0x7adb6(0x10f)]][_0x7adb6(0xd2)]++;break;}}}else try{_0xa1ba9c=calculateBezierPoint(_0x317a18[_0x7adb6(0xcb)],_0x2a91af['p0']['x'],_0x2a91af['p1']['x'],_0x2a91af['p2']['x'],_0x2a91af['p3']['x']),_0x2ddfa9=calculateBezierPoint(_0x317a18[_0x7adb6(0xcb)],_0x2a91af['p0']['y'],_0x2a91af['p1']['y'],_0x2a91af['p2']['y'],_0x2a91af['p3']['y']);}catch(_0x5504e3){console['error'](_0x7adb6(0x1d0)+_0x5ebaf3+':',_0x5504e3);try{_0x317a18['targetGridX']=_0x317a18[_0x7adb6(0x161)]??gameCanvas['width']/0x2,_0x317a18[_0x7adb6(0x126)]=_0x317a18['targetGridY']??ENEMY_TOP_MARGIN;}catch(_0x554e92){console['error'](_0x7adb6(0xf2)+_0x5ebaf3+_0x7adb6(0x133),_0x554e92),_0x317a18[_0x7adb6(0x161)]=gameCanvas[_0x7adb6(0x166)]/0x2,_0x317a18[_0x7adb6(0x126)]=ENEMY_TOP_MARGIN;}_0x317a18[_0x7adb6(0x167)]=_0x7adb6(0x14d),_0x317a18[_0x7adb6(0xcb)]=0x0,_0x317a18[_0x7adb6(0x1af)]=0x0,_0x317a18[_0x7adb6(0x110)]=0x0,_0x317a18[_0x7adb6(0xf3)]=0x0;_0x317a18[_0x7adb6(0x10f)]!==undefined&&squadronCompletionStatus[_0x317a18[_0x7adb6(0x10f)]]&&squadronCompletionStatus[_0x317a18['squadronId']][_0x7adb6(0xd2)]++;break;}if(_0x317a18&&_0x317a18[_0x7adb6(0x167)]===_0x7adb6(0x10e)){if(isNaN(_0xa1ba9c)||isNaN(_0x2ddfa9)){console[_0x7adb6(0x195)]('NaN\x20detected\x20in\x20Normal\x20path\x20calculation\x20for\x20enemy\x20'+_0x5ebaf3+_0x7adb6(0x19b));try{_0x317a18[_0x7adb6(0x161)]=_0x317a18[_0x7adb6(0x161)]??gameCanvas[_0x7adb6(0x166)]/0x2,_0x317a18[_0x7adb6(0x126)]=_0x317a18[_0x7adb6(0x126)]??ENEMY_TOP_MARGIN;}catch(_0x511c2){console['error']('Error\x20getting\x20grid\x20pos\x20for\x20'+_0x5ebaf3+_0x7adb6(0xfa),_0x511c2),_0x317a18[_0x7adb6(0x161)]=gameCanvas[_0x7adb6(0x166)]/0x2,_0x317a18[_0x7adb6(0x126)]=ENEMY_TOP_MARGIN;}_0x317a18['state']=_0x7adb6(0x14d),_0x317a18[_0x7adb6(0xcb)]=0x0,_0x317a18[_0x7adb6(0x1af)]=0x0,_0x317a18['velocityX']=0x0,_0x317a18[_0x7adb6(0xf3)]=0x0,_0x317a18[_0x7adb6(0x10f)]!==undefined&&squadronCompletionStatus[_0x317a18['squadronId']]&&squadronCompletionStatus[_0x317a18[_0x7adb6(0x10f)]][_0x7adb6(0xd2)]++;}else{let _0x16179e=_0xa1ba9c;const _0x1379ee=currentWavePatternIndex===0x1&&(_0x317a18['squadronId']===0x2||_0x317a18[_0x7adb6(0x10f)]===0x3),_0x118118=typeof _0x317a18[_0x7adb6(0x134)]===_0x7adb6(0x160)&&_0x317a18[_0x7adb6(0x134)]%0x2!==0x0;if(_0x1379ee&&_0x118118){const _0x38c868=_0x543c01+ENTRANCE_PAIR_HORIZONTAL_GAP;_0x16179e=_0xa1ba9c+_0x38c868;}_0x317a18['velocityX']=_0x16179e-_0x573456,_0x317a18[_0x7adb6(0xf3)]=_0x2ddfa9-_0x1b69f1,_0x317a18['x']=_0x16179e,_0x317a18['y']=_0x2ddfa9;}}break;}case'moving_to_grid':{if(_0x317a18[_0x7adb6(0x161)]==null||_0x317a18[_0x7adb6(0x126)]==null){console[_0x7adb6(0x113)](_0x7adb6(0xfd)+_0x5ebaf3+_0x7adb6(0x1c2));try{const {x:_0x497bd2,y:_0x5c4855}=getCurrentGridSlotPosition(_0x317a18[_0x7adb6(0x1c3)],_0x317a18[_0x7adb6(0x159)],_0x543c01);_0x317a18[_0x7adb6(0x161)]=_0x497bd2,_0x317a18[_0x7adb6(0x126)]=_0x5c4855;}catch(_0x5d9263){console[_0x7adb6(0x195)](_0x7adb6(0xf2)+_0x5ebaf3+_0x7adb6(0xde),_0x5d9263),_0x317a18[_0x7adb6(0x167)]='in_grid',_0x317a18['x']=gameCanvas['width']/0x2,_0x317a18['y']=ENEMY_TOP_MARGIN;break;}}const _0x4ce9ab=_0x317a18[_0x7adb6(0x161)],_0x1cfbc0=_0x317a18['targetGridY'],_0x5ef2ef=_0x4ce9ab-_0x317a18['x'],_0x20ce24=_0x1cfbc0-_0x317a18['y'],_0x6b9115=Math['sqrt'](_0x5ef2ef*_0x5ef2ef+_0x20ce24*_0x20ce24),_0x8f72=ENTRANCE_SPEED*1.2,_0x2a517e=_0x8f72*0.5;if(_0x6b9115>_0x2a517e)_0x317a18[_0x7adb6(0x110)]=_0x5ef2ef/_0x6b9115*_0x8f72,_0x317a18[_0x7adb6(0xf3)]=_0x20ce24/_0x6b9115*_0x8f72,_0x317a18['x']+=_0x317a18[_0x7adb6(0x110)],_0x317a18['y']+=_0x317a18[_0x7adb6(0xf3)];else{_0x317a18['x']=_0x4ce9ab,_0x317a18['y']=_0x1cfbc0,_0x317a18[_0x7adb6(0x110)]=0x0,_0x317a18['velocityY']=0x0;const _0x696208=_0x317a18[_0x7adb6(0x167)];_0x317a18[_0x7adb6(0x167)]=_0x7adb6(0x11e),_0x317a18[_0x7adb6(0x156)]=![];!isGridSoundPlaying&&!isChallengingStage&&(isGridSoundPlaying=!![],playSound(gridBackgroundSound));GRID_BREATH_ENABLED&&!isGridBreathingActive&&!isChallengingStage&&(isGridBreathingActive=!![],gridBreathStartTime=_0x1200ed,currentGridBreathFactor=0x0);!firstEnemyLanded&&!isFullGridWave&&!isChallengingStage&&(lastGridFireCheckTime=Date[_0x7adb6(0x154)](),firstEnemyLanded=!![]);if(_0x696208===_0x7adb6(0x14d)&&!isChallengingStage&&!isFullGridWave&&_0x317a18['squadronId']!==undefined){const _0x3e1d9a=_0x317a18[_0x7adb6(0x10f)],_0x45ec8b=squadronCompletionStatus[_0x3e1d9a];if(_0x45ec8b&&!_0x45ec8b[_0x7adb6(0x140)]){const _0xc3d94a=enemies[_0x7adb6(0xca)](_0x3723af=>{const _0x41abc3=_0x7adb6;if(_0x3723af&&_0x3723af[_0x41abc3(0x10f)]===_0x3e1d9a)return _0x3723af[_0x41abc3(0x167)]===_0x41abc3(0x11e)||!enemies['some'](_0x18c8ca=>_0x18c8ca['id']===_0x3723af['id']);return!![];});if(_0xc3d94a){_0x45ec8b['hasFiredPostLanding']=!![];const _0x435785=enemies[_0x7adb6(0x103)](_0x496624=>_0x496624&&_0x496624[_0x7adb6(0x10f)]===_0x3e1d9a&&_0x496624[_0x7adb6(0x167)]==='in_grid'&&(_0x496624[_0x7adb6(0x16b)]===ENEMY2_TYPE||_0x496624[_0x7adb6(0x16b)]===ENEMY3_TYPE)&&!(_0x496624[_0x7adb6(0x16b)]===ENEMY3_TYPE&&_0x496624[_0x7adb6(0x1c5)]));if(_0x435785['length']>0x0){const _0x148fa4=_0x435785[Math[_0x7adb6(0x10c)](Math[_0x7adb6(0xce)]()*_0x435785[_0x7adb6(0xe9)])],_0x2e92af=_0x148fa4['id'],_0x51226c=0xc8+Math[_0x7adb6(0xce)]()*0x190,_0x19c57b=setTimeout(()=>{const _0x36ad81=_0x7adb6;try{const _0x602b9a=enemySpawnTimeouts['indexOf'](_0x19c57b);if(_0x602b9a>-0x1)enemySpawnTimeouts[_0x36ad81(0x102)](_0x602b9a,0x1);if(isPaused||!isInGameState||playerLives<=0x0||isChallengingStage||isWaveTransitioning||isShipCaptured)return;const _0x2f4356=enemies[_0x36ad81(0x15a)](_0x378e9c=>_0x378e9c&&_0x378e9c['id']===_0x2e92af);_0x2f4356&&_0x2f4356[_0x36ad81(0x167)]===_0x36ad81(0x11e)&&(createBulletSimple(_0x2f4356)&&(playSound(enemyShootSound),_0x2f4356[_0x36ad81(0x1b1)]=Date[_0x36ad81(0x154)]()));}catch(_0x42dd7b){console['error'](_0x36ad81(0x1b4)+_0x2e92af+':',_0x42dd7b);}},_0x51226c);enemySpawnTimeouts[_0x7adb6(0x155)](_0x19c57b);}}}}}break;}case _0x7adb6(0x11e):{typeof _0x317a18[_0x7adb6(0x161)]===_0x7adb6(0x160)&&!isNaN(_0x317a18[_0x7adb6(0x161)])&&(_0x317a18['x']=_0x317a18[_0x7adb6(0x161)]);typeof _0x317a18[_0x7adb6(0x126)]==='number'&&!isNaN(_0x317a18[_0x7adb6(0x126)])&&(_0x317a18['y']=_0x317a18[_0x7adb6(0x126)]);_0x317a18[_0x7adb6(0x110)]=isGridSoundPlaying?_0x402242:0x0,_0x317a18['velocityY']=0x0;_0x317a18[_0x7adb6(0x16b)]===ENEMY3_TYPE&&_0x317a18[_0x7adb6(0x1c5)]&&_0x317a18['capturedShipDimensions']&&(_0x317a18[_0x7adb6(0x1d8)]=_0x317a18['x']+CAPTURED_SHIP_OFFSET_X,_0x317a18[_0x7adb6(0xc5)]=_0x317a18['y']+CAPTURED_SHIP_OFFSET_Y);break;}case _0x7adb6(0x1bd):{_0x317a18['velocityX']=0x0,_0x317a18['velocityY']=0x0;break;}case _0x7adb6(0xfe):{_0x317a18[_0x7adb6(0x110)]=0x0,_0x317a18[_0x7adb6(0xf3)]=0x0;break;}case'diving_to_capture_position':{if(isShipCaptured){_0x317a18[_0x7adb6(0x167)]=_0x7adb6(0x1d7);try{const {x:_0x32873d,y:_0x227393}=getCurrentGridSlotPosition(_0x317a18['gridRow'],_0x317a18[_0x7adb6(0x159)],_0x543c01);_0x317a18[_0x7adb6(0x161)]=_0x32873d,_0x317a18['targetGridY']=_0x227393;}catch(_0x4029f1){console[_0x7adb6(0x195)](_0x7adb6(0xd5)+_0x317a18['id']+':',_0x4029f1),_0x317a18[_0x7adb6(0x161)]=gameCanvas[_0x7adb6(0x166)]/0x2,_0x317a18[_0x7adb6(0x126)]=ENEMY_TOP_MARGIN;}break;}const _0x84f9e0=_0x317a18[_0x7adb6(0x153)],_0x495b63=_0x317a18[_0x7adb6(0x1a8)];if(_0x84f9e0==null||_0x495b63==null){console[_0x7adb6(0x195)](_0x7adb6(0x164)+_0x317a18['id']+_0x7adb6(0x135)),_0x317a18[_0x7adb6(0x167)]=_0x7adb6(0x1d7);try{const {x:_0x258bb6,y:_0x57160b}=getCurrentGridSlotPosition(_0x317a18['gridRow'],_0x317a18['gridCol'],_0x543c01);_0x317a18[_0x7adb6(0x161)]=_0x258bb6,_0x317a18['targetGridY']=_0x57160b;}catch(_0x110f9f){console[_0x7adb6(0x195)](_0x7adb6(0xd5)+_0x317a18['id']+':',_0x110f9f),_0x317a18[_0x7adb6(0x161)]=gameCanvas[_0x7adb6(0x166)]/0x2,_0x317a18[_0x7adb6(0x126)]=ENEMY_TOP_MARGIN;}break;}const _0x101f20=_0x84f9e0-_0x317a18['x'],_0x154466=_0x495b63-_0x317a18['y'],_0x342fe6=Math[_0x7adb6(0x127)](_0x101f20*_0x101f20+_0x154466*_0x154466),_0x1fe742=BOSS_CAPTURE_DIVE_SPEED_FACTOR*BASE_ENEMY_ATTACK_SPEED,_0x14f784=_0x1fe742*0.6;_0x342fe6>_0x14f784?(_0x317a18[_0x7adb6(0x110)]=_0x101f20/_0x342fe6*_0x1fe742,_0x317a18['velocityY']=_0x154466/_0x342fe6*_0x1fe742,_0x317a18['x']+=_0x317a18[_0x7adb6(0x110)],_0x317a18['y']+=_0x317a18[_0x7adb6(0xf3)]):(_0x317a18['x']=_0x84f9e0,_0x317a18['y']=_0x495b63,_0x317a18[_0x7adb6(0x110)]=0x0,_0x317a18['velocityY']=0x0,_0x317a18['state']=_0x7adb6(0x130),_0x317a18[_0x7adb6(0x122)]=_0x1200ed,capturingBossId=_0x317a18['id'],captureBeamActive=!![],captureBeamSource={'x':_0x317a18['x']+_0x543c01/0x2,'y':_0x317a18['y']+_0x2cd226},captureBeamTargetY=_0x317a18['y'],captureBeamProgress=0x0,playSound(captureSound));break;}case _0x7adb6(0x130):{_0x317a18[_0x7adb6(0x110)]=0x0,_0x317a18[_0x7adb6(0xf3)]=0x0;if(isShipCaptured&&_0x317a18['id']!==capturedBossIdWithMessage){console[_0x7adb6(0x113)]('[Capture\x20State]\x20Boss\x20'+_0x317a18['id']+_0x7adb6(0xdc)+capturedBossIdWithMessage+')\x20was\x20already\x20captured.\x20Returning.'),captureBeamActive=![];if(capturingBossId===_0x317a18['id'])capturingBossId=null;_0x317a18['state']=_0x7adb6(0x1d7);try{const {x:_0x496dae,y:_0x533ec1}=getCurrentGridSlotPosition(_0x317a18[_0x7adb6(0x1c3)],_0x317a18[_0x7adb6(0x159)],_0x543c01);_0x317a18[_0x7adb6(0x161)]=_0x496dae,_0x317a18[_0x7adb6(0x126)]=_0x533ec1;}catch(_0x29532c){console[_0x7adb6(0x195)](_0x7adb6(0xd5)+_0x317a18['id']+':',_0x29532c),_0x317a18['targetGridX']=gameCanvas[_0x7adb6(0x166)]/0x2,_0x317a18[_0x7adb6(0x126)]=ENEMY_TOP_MARGIN;}stopSound(captureSound);break;}const _0x535ba2=_0x1200ed-_0x317a18[_0x7adb6(0x122)],_0x429be2=CAPTURE_BEAM_ANIMATION_DURATION_MS/0x2,_0x467636=CAPTURE_BEAM_DURATION_MS;if(_0x535ba2<_0x429be2)captureBeamProgress=_0x535ba2/_0x429be2;else{if(_0x535ba2<_0x467636-_0x429be2)captureBeamProgress=0x1;else{if(_0x535ba2<_0x467636)captureBeamProgress=0x1-(_0x535ba2-(_0x467636-_0x429be2))/_0x429be2;else{captureBeamProgress=0x0,captureBeamActive=![],capturingBossId=null,stopSound(captureSound),_0x317a18[_0x7adb6(0x167)]='attacking',_0x317a18['attackPathSegments']=generateAttackPath(_0x317a18),_0x317a18[_0x7adb6(0x16e)]=0x0,_0x317a18[_0x7adb6(0xbe)]=0x0,_0x317a18[_0x7adb6(0x19f)]=BASE_ENEMY_ATTACK_SPEED*ENEMY3_ATTACK_SPEED_FACTOR,_0x317a18[_0x7adb6(0x1b1)]=0x0,_0x317a18['canFireThisDive']=!![],_0x317a18['attackFormationOffsetX']=0x0,_0x317a18[_0x7adb6(0x181)]=null;break;}}}captureBeamProgress=Math[_0x7adb6(0x1be)](0x0,Math[_0x7adb6(0x117)](0x1,captureBeamProgress));if(ship&&captureBeamActive&&captureBeamProgress>=0.95&&!isShipCaptured&&!isInvincible){const _0x1d1066=BOSS_WIDTH*CAPTURE_BEAM_WIDTH_TOP_FACTOR,_0x26cb32=SHIP_WIDTH*CAPTURE_BEAM_WIDTH_BOTTOM_FACTOR,_0x59d0e4=_0x317a18['x']+_0x543c01/0x2,_0x319d05=_0x317a18['y']+_0x2cd226,_0xb26c22=gameCanvas[_0x7adb6(0xe6)]-LIFE_ICON_MARGIN_BOTTOM-LIFE_ICON_SIZE-0xa,_0x173553=Math[_0x7adb6(0x1be)](_0x1d1066,_0x26cb32),_0x17398c=_0x59d0e4-_0x173553/0x2,_0x5b34ac=_0x319d05,_0x3a75a6=_0xb26c22-_0x319d05;if(_0x3a75a6>0x0){const _0x15f53e={'x':_0x17398c,'y':_0x5b34ac,'width':_0x173553,'height':_0x3a75a6},_0x30db3f={'x':ship['x'],'y':ship['y'],'width':ship[_0x7adb6(0x166)],'height':ship[_0x7adb6(0xe6)]};if(checkCollision(_0x30db3f,_0x15f53e)){isShipCaptured=!![],_0x317a18[_0x7adb6(0x13e)]={'width':ship[_0x7adb6(0x166)],'height':ship[_0x7adb6(0xe6)]},_0x317a18[_0x7adb6(0x1c5)]=!![],stopSound(captureSound),_0x317a18[_0x7adb6(0x167)]=_0x7adb6(0xd3),_0x317a18[_0x7adb6(0x161)]=null,_0x317a18['targetGridY']=null,_0x317a18[_0x7adb6(0x13c)]=ship['y'],_0x317a18[_0x7adb6(0x10d)]=0x0,isShowingCaptureMessage=!![],captureMessageStartTime=_0x1200ed,capturedBossIdWithMessage=_0x317a18['id'],playSound(shipCapturedSound);const _0x57b624=currentPlayer;playerLives--,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastChainHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![];if(playerLives<=0x0){if(_0x57b624===0x1)player1Lives=0x0;if(_0x57b624===0x2)player2Lives=0x0;if(isTwoPlayerMode){isShowingPlayerGameOverMessage=!![],playerGameOverMessageStartTime=_0x1200ed,playerWhoIsGameOver=_0x57b624;const _0x593d3b=_0x57b624===0x1?0x2:0x1,_0x4baff9=_0x593d3b===0x1?player1Lives:player2Lives;_0x4baff9>0x0?nextActionAfterPlayerGameOver='switch_player':nextActionAfterPlayerGameOver='show_results';bullets=[],enemyBullets=[],explosions=[],fallingShips=[],isDualShipActive=![];if(_0x57b624===0x1)player1IsDualShipActive=![];else player2IsDualShipActive=![];playSound(gameOverSound);}else triggerFinalGameOverSequence();break;}else{if(isTwoPlayerMode){if(_0x57b624===0x1)player1Lives=playerLives;else player2Lives=playerLives;}ship&&gameCanvas&&(ship['y']=gameCanvas[_0x7adb6(0xe6)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,!isManualControl&&(aiNeedsStabilization=!![])),(!isManualControl||isTwoPlayerMode)&&(forceCenterShipNextReset=!![]),isShipCaptured=![],isInvincible=!![],invincibilityEndTime=_0x1200ed+INVINCIBILITY_DURATION_MS;}}}else console[_0x7adb6(0x113)](_0x7adb6(0xe8),_0x3a75a6);}break;}case _0x7adb6(0xd3):{_0x317a18[_0x7adb6(0x110)]=0x0,_0x317a18[_0x7adb6(0xf3)]=0x0;if(_0x317a18[_0x7adb6(0x1c5)]&&_0x317a18[_0x7adb6(0x13e)]&&typeof _0x317a18['initialCaptureAnimationY']===_0x7adb6(0x160)){const _0x314355=_0x1200ed-captureMessageStartTime,_0x35c1ce=Math[_0x7adb6(0x117)](0x1,_0x314355/CAPTURE_MESSAGE_DURATION),_0x2f3c4f=_0x317a18['y']+CAPTURED_SHIP_OFFSET_Y,_0x5db257=_0x317a18[_0x7adb6(0x13c)];_0x317a18['capturedShipY']=_0x5db257+(_0x2f3c4f-_0x5db257)*_0x35c1ce,_0x317a18[_0x7adb6(0x1d8)]=_0x317a18['x']+CAPTURED_SHIP_OFFSET_X;}else _0x317a18[_0x7adb6(0x1d8)]=_0x317a18['x']+CAPTURED_SHIP_OFFSET_X,_0x317a18['capturedShipY']=_0x317a18['y']+CAPTURED_SHIP_OFFSET_Y;break;}case _0x7adb6(0x162):{if(isEntrancePhaseActive)break;const _0x256afd=_0x317a18[_0x7adb6(0xcc)],_0x306af8=3.8;if(!_0x256afd||_0x256afd[_0x7adb6(0xe9)]===0x0){console['error']('Enemy\x20'+_0x5ebaf3+_0x7adb6(0x180)),_0x317a18[_0x7adb6(0x167)]=_0x7adb6(0x1d7);try{const {x:_0x2967f3,y:_0x50ca2d}=getCurrentGridSlotPosition(_0x317a18['gridRow'],_0x317a18[_0x7adb6(0x159)],_0x543c01);_0x317a18[_0x7adb6(0x161)]=_0x2967f3,_0x317a18[_0x7adb6(0x126)]=_0x50ca2d;}catch(_0x29216e){console[_0x7adb6(0x195)](_0x7adb6(0x197)+_0x5ebaf3+_0x7adb6(0x14a),_0x29216e),_0x317a18[_0x7adb6(0x161)]=gameCanvas[_0x7adb6(0x166)]/0x2,_0x317a18['targetGridY']=ENEMY_TOP_MARGIN;}break;}if(_0x317a18[_0x7adb6(0x16e)]>=_0x256afd[_0x7adb6(0xe9)]){console[_0x7adb6(0x113)](_0x7adb6(0xfd)+_0x5ebaf3+'\x20attacking,\x20index\x20'+_0x317a18['attackPathSegmentIndex']+_0x7adb6(0x157)+_0x256afd[_0x7adb6(0xe9)]+')!\x20Returning.'),_0x317a18[_0x7adb6(0x167)]=_0x7adb6(0x1d7);try{const {x:_0x1b983a,y:_0x118770}=getCurrentGridSlotPosition(_0x317a18[_0x7adb6(0x1c3)],_0x317a18[_0x7adb6(0x159)],_0x543c01);_0x317a18[_0x7adb6(0x161)]=_0x1b983a,_0x317a18[_0x7adb6(0x126)]=_0x118770;}catch(_0x1bb990){console['error']('Error\x20getting\x20grid\x20pos\x20for\x20returning\x20enemy\x20'+_0x5ebaf3+_0x7adb6(0x168),_0x1bb990),_0x317a18[_0x7adb6(0x161)]=gameCanvas[_0x7adb6(0x166)]/0x2,_0x317a18[_0x7adb6(0x126)]=ENEMY_TOP_MARGIN;}break;}const _0x473686=_0x256afd[_0x317a18[_0x7adb6(0x16e)]];if(!_0x473686||!_0x473686['p0']||!_0x473686['p1']||!_0x473686['p2']||!_0x473686['p3']){console[_0x7adb6(0x195)](_0x7adb6(0xfd)+_0x5ebaf3+'\x20attacking,\x20invalid\x20segment\x20'+_0x317a18['attackPathSegmentIndex']+'!\x20Returning.'),_0x317a18[_0x7adb6(0x167)]=_0x7adb6(0x1d7);try{const {x:_0x322bcc,y:_0x35b334}=getCurrentGridSlotPosition(_0x317a18[_0x7adb6(0x1c3)],_0x317a18['gridCol'],_0x543c01);_0x317a18[_0x7adb6(0x161)]=_0x322bcc,_0x317a18[_0x7adb6(0x126)]=_0x35b334;}catch(_0x26012a){console[_0x7adb6(0x195)](_0x7adb6(0x197)+_0x5ebaf3+_0x7adb6(0xf4),_0x26012a),_0x317a18[_0x7adb6(0x161)]=gameCanvas[_0x7adb6(0x166)]/0x2,_0x317a18[_0x7adb6(0x126)]=ENEMY_TOP_MARGIN;}break;}const _0x4984b2=_0x317a18[_0x7adb6(0x19f)]/0x3e8*_0x306af8;_0x317a18['attackPathT']+=_0x4984b2;let _0x54182c,_0x58fa06;const _0x5274fd=_0x317a18['x'],_0x212d42=_0x317a18['y'];if(_0x317a18['attackPathT']>=0x1){try{_0x54182c=calculateBezierPoint(0x1,_0x473686['p0']['x'],_0x473686['p1']['x'],_0x473686['p2']['x'],_0x473686['p3']['x']),_0x58fa06=calculateBezierPoint(0x1,_0x473686['p0']['y'],_0x473686['p1']['y'],_0x473686['p2']['y'],_0x473686['p3']['y']);}catch(_0x4e9447){console[_0x7adb6(0x195)](_0x7adb6(0x10a)+_0x317a18['id']+':',_0x4e9447),_0x54182c=_0x317a18['x'],_0x58fa06=_0x317a18['y'],_0x317a18[_0x7adb6(0x167)]='returning';try{const {x:_0x5ab695,y:_0x2c54ad}=getCurrentGridSlotPosition(_0x317a18[_0x7adb6(0x1c3)],_0x317a18[_0x7adb6(0x159)],_0x543c01);_0x317a18[_0x7adb6(0x161)]=_0x5ab695,_0x317a18[_0x7adb6(0x126)]=_0x2c54ad;}catch(_0x56120c){console[_0x7adb6(0x195)](_0x7adb6(0x118)+_0x317a18['id']+':',_0x56120c),_0x317a18['targetGridX']=gameCanvas[_0x7adb6(0x166)]/0x2,_0x317a18[_0x7adb6(0x126)]=ENEMY_TOP_MARGIN;}break;}_0x317a18['attackPathT']=0x0,_0x317a18[_0x7adb6(0x16e)]++;if(_0x317a18[_0x7adb6(0x16e)]>=_0x256afd[_0x7adb6(0xe9)]){_0x317a18[_0x7adb6(0x167)]='returning',_0x317a18[_0x7adb6(0x1b1)]=0x0,_0x317a18[_0x7adb6(0x12c)]=0x0,_0x317a18['attackGroupId']=null;try{const {x:_0x5bcad1,y:_0x33b3da}=getCurrentGridSlotPosition(_0x317a18[_0x7adb6(0x1c3)],_0x317a18[_0x7adb6(0x159)],_0x543c01);_0x317a18[_0x7adb6(0x161)]=_0x5bcad1,_0x317a18[_0x7adb6(0x126)]=_0x33b3da;}catch(_0x276bca){console[_0x7adb6(0x195)]('Error\x20getting\x20grid\x20pos\x20for\x20returning\x20enemy\x20'+_0x5ebaf3+_0x7adb6(0x128),_0x276bca),_0x317a18[_0x7adb6(0x161)]=gameCanvas[_0x7adb6(0x166)]/0x2,_0x317a18['targetGridY']=ENEMY_TOP_MARGIN;}}else{const _0x149991=_0x256afd[_0x317a18[_0x7adb6(0x16e)]];if(!_0x149991?.['p0']){console[_0x7adb6(0x195)]('Enemy\x20'+_0x5ebaf3+'\x20attacking,\x20invalid\x20NEXT\x20segment\x20'+_0x317a18['attackPathSegmentIndex']+_0x7adb6(0x106)),_0x54182c=_0x317a18['x'],_0x58fa06=_0x317a18['y'],_0x317a18[_0x7adb6(0x167)]=_0x7adb6(0x1d7);try{const {x:_0x4f9018,y:_0x1ed82b}=getCurrentGridSlotPosition(_0x317a18['gridRow'],_0x317a18[_0x7adb6(0x159)],_0x543c01);_0x317a18[_0x7adb6(0x161)]=_0x4f9018,_0x317a18[_0x7adb6(0x126)]=_0x1ed82b;}catch(_0x1974a5){console[_0x7adb6(0x195)](_0x7adb6(0x179)+_0x317a18['id']+':',_0x1974a5),_0x317a18['targetGridX']=gameCanvas[_0x7adb6(0x166)]/0x2,_0x317a18[_0x7adb6(0x126)]=ENEMY_TOP_MARGIN;}break;}}}else try{_0x54182c=calculateBezierPoint(_0x317a18['attackPathT'],_0x473686['p0']['x'],_0x473686['p1']['x'],_0x473686['p2']['x'],_0x473686['p3']['x']),_0x58fa06=calculateBezierPoint(_0x317a18[_0x7adb6(0xbe)],_0x473686['p0']['y'],_0x473686['p1']['y'],_0x473686['p2']['y'],_0x473686['p3']['y']);}catch(_0x1277d0){console[_0x7adb6(0x195)](_0x7adb6(0x1ab)+_0x317a18['id']+':',_0x1277d0),_0x54182c=_0x317a18['x'],_0x58fa06=_0x317a18['y'],_0x317a18[_0x7adb6(0x167)]=_0x7adb6(0x1d7);try{const {x:_0x340b82,y:_0x5cd962}=getCurrentGridSlotPosition(_0x317a18[_0x7adb6(0x1c3)],_0x317a18[_0x7adb6(0x159)],_0x543c01);_0x317a18[_0x7adb6(0x161)]=_0x340b82,_0x317a18[_0x7adb6(0x126)]=_0x5cd962;}catch(_0x47c4d1){console['error'](_0x7adb6(0x17d)+_0x317a18['id']+':',_0x47c4d1),_0x317a18[_0x7adb6(0x161)]=gameCanvas[_0x7adb6(0x166)]/0x2,_0x317a18[_0x7adb6(0x126)]=ENEMY_TOP_MARGIN;}break;}if(_0x317a18&&_0x317a18[_0x7adb6(0x167)]===_0x7adb6(0x162)){const _0x21b75e=_0x317a18[_0x7adb6(0x12c)]||0x0,_0x154b2a=_0x54182c+_0x21b75e,_0x61bc15=_0x58fa06;_0x317a18[_0x7adb6(0x110)]=_0x154b2a-_0x5274fd,_0x317a18[_0x7adb6(0xf3)]=_0x61bc15-_0x212d42,_0x317a18['x']=_0x154b2a,_0x317a18['y']=_0x61bc15;if(_0x317a18['y']>gameCanvas[_0x7adb6(0xe6)]+_0x2cd226*1.5){_0x317a18[_0x7adb6(0x167)]=_0x7adb6(0x1d7),_0x317a18[_0x7adb6(0x16e)]=0x0,_0x317a18[_0x7adb6(0xbe)]=0x0,_0x317a18[_0x7adb6(0x1b1)]=0x0,_0x317a18['attackFormationOffsetX']=0x0,_0x317a18[_0x7adb6(0x181)]=null,_0x317a18['y']=-_0x2cd226*(1.1+Math[_0x7adb6(0xce)]()*0.4),_0x317a18['x']=Math[_0x7adb6(0xce)]()*(gameCanvas[_0x7adb6(0x166)]-_0x543c01),_0x317a18[_0x7adb6(0x110)]=0x0,_0x317a18[_0x7adb6(0xf3)]=0x0;try{const {x:_0xcb719a,y:_0x343f8e}=getCurrentGridSlotPosition(_0x317a18[_0x7adb6(0x1c3)],_0x317a18['gridCol'],_0x543c01);_0x317a18[_0x7adb6(0x161)]=_0xcb719a,_0x317a18[_0x7adb6(0x126)]=_0x343f8e;}catch(_0x210ff9){console[_0x7adb6(0x195)](_0x7adb6(0x197)+_0x5ebaf3+_0x7adb6(0xc1),_0x210ff9),_0x317a18[_0x7adb6(0x161)]=gameCanvas['width']/0x2,_0x317a18[_0x7adb6(0x126)]=ENEMY_TOP_MARGIN;}}}break;}case _0x7adb6(0x1d7):{if(isEntrancePhaseActive)break;if(_0x317a18[_0x7adb6(0x161)]==null||_0x317a18[_0x7adb6(0x126)]==null){console['warn'](_0x7adb6(0xfd)+_0x5ebaf3+_0x7adb6(0x19e));try{const {x:_0x6bf82a,y:_0x45c3ae}=getCurrentGridSlotPosition(_0x317a18[_0x7adb6(0x1c3)],_0x317a18[_0x7adb6(0x159)],_0x543c01);_0x317a18['targetGridX']=_0x6bf82a,_0x317a18['targetGridY']=_0x45c3ae;}catch(_0x2c55ef){console['error'](_0x7adb6(0xf2)+_0x5ebaf3+_0x7adb6(0xef),_0x2c55ef),_0x317a18[_0x7adb6(0x167)]=_0x7adb6(0x11e),_0x317a18['x']=gameCanvas[_0x7adb6(0x166)]/0x2,_0x317a18['y']=ENEMY_TOP_MARGIN;break;}}const _0xa4adca=_0x317a18[_0x7adb6(0x161)],_0x5abca2=_0x317a18[_0x7adb6(0x126)],_0xa226b6=_0xa4adca-_0x317a18['x'],_0x17fea3=_0x5abca2-_0x317a18['y'],_0x361492=Math[_0x7adb6(0x127)](_0xa226b6*_0xa226b6+_0x17fea3*_0x17fea3),_0x485929=scaleValue(level,BASE_RETURN_SPEED_FACTOR,MAX_RETURN_SPEED_FACTOR),_0x288d56=BASE_RETURN_SPEED*_0x485929,_0xf5d5ae=_0x288d56*0.5;_0x361492>_0xf5d5ae?(_0x317a18[_0x7adb6(0x110)]=_0xa226b6/_0x361492*_0x288d56,_0x317a18['velocityY']=_0x17fea3/_0x361492*_0x288d56,_0x317a18['x']+=_0x317a18[_0x7adb6(0x110)],_0x317a18['y']+=_0x317a18[_0x7adb6(0xf3)]):(_0x317a18['x']=_0xa4adca,_0x317a18['y']=_0x5abca2,_0x317a18[_0x7adb6(0x110)]=0x0,_0x317a18[_0x7adb6(0xf3)]=0x0,_0x317a18[_0x7adb6(0x167)]=_0x7adb6(0x11e),_0x317a18[_0x7adb6(0x156)]=!![],_0x317a18[_0x7adb6(0x12c)]=0x0,_0x317a18[_0x7adb6(0x181)]=null,_0x317a18[_0x7adb6(0x188)]('returnLogDone')&&delete _0x317a18[_0x7adb6(0xe1)],!isGridSoundPlaying&&!isChallengingStage&&(isGridSoundPlaying=!![],playSound(gridBackgroundSound)));break;}}if(_0x317a18&&!isShowingPlayerGameOverMessage&&!(isShipCaptured&&_0x317a18[_0x7adb6(0x167)]==='capturing')){const _0x367f0a={'x':0x0,'y':0x0,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT},_0x4e598e={'x':_0x317a18['x'],'y':_0x317a18['y'],'width':_0x543c01,'height':_0x2cd226};for(let _0x3d9c7d=bullets[_0x7adb6(0xe9)]-0x1;_0x3d9c7d>=0x0;_0x3d9c7d--){const _0x35249d=bullets[_0x3d9c7d];if(!_0x35249d)continue;_0x367f0a['x']=_0x35249d['x'],_0x367f0a['y']=_0x35249d['y'];if(checkCollision(_0x367f0a,_0x4e598e)){const _0xd55938=handleEnemyHit(_0x317a18);bullets['splice'](_0x3d9c7d,0x1);if(_0xd55938[_0x7adb6(0x171)]){enemies[_0x7adb6(0x102)](_0x4aeec7,0x1),_0x317a18=null;break;}}}}if(_0x317a18&&ship&&!isShipCaptured&&!isWaitingForRespawn&&!isShowingPlayerGameOverMessage&&!isInvincible){const _0x1bec85=[_0x7adb6(0x162),'following_entrance_path','following_bezier_path',_0x7adb6(0xf8)];if(_0x1bec85[_0x7adb6(0x1a5)](_0x317a18[_0x7adb6(0x167)])){const _0x2568e5={'x':_0x317a18['x'],'y':_0x317a18['y'],'width':_0x543c01,'height':_0x2cd226},_0x2394da={'x':ship['x'],'y':ship['y'],'width':ship[_0x7adb6(0x166)],'height':ship['height']},_0x21d3ea=isDualShipActive?{'x':ship['x']+DUAL_SHIP_OFFSET_X,'y':ship['y'],'width':ship[_0x7adb6(0x166)],'height':ship[_0x7adb6(0xe6)]}:null;let _0x24e0f7=![],_0x368da5=![];if(checkCollision(_0x2568e5,_0x2394da))_0x24e0f7=!![],_0x368da5=![];else _0x21d3ea&&checkCollision(_0x2568e5,_0x21d3ea)&&(_0x24e0f7=!![],_0x368da5=!![]);if(_0x24e0f7){createExplosion(_0x317a18['x']+_0x543c01/0x2,_0x317a18['y']+_0x2cd226/0x2),playSound(lostLifeSound),enemies[_0x7adb6(0x102)](_0x4aeec7,0x1),_0x317a18=null;if(isDualShipActive){isDualShipActive=![];if(currentPlayer===0x1)player1IsDualShipActive=![];else player2IsDualShipActive=![];_0x368da5?createExplosion(_0x21d3ea['x']+ship[_0x7adb6(0x166)]/0x2,_0x21d3ea['y']+ship[_0x7adb6(0xe6)]/0x2):createExplosion(_0x2394da['x']+ship[_0x7adb6(0x166)]/0x2,_0x2394da['y']+ship['height']/0x2),isInvincible=!![],invincibilityEndTime=_0x1200ed+INVINCIBILITY_DURATION_MS;}else{playerLives--,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastChainHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],fallingShips=[],isInvincible=!![],invincibilityEndTime=_0x1200ed+INVINCIBILITY_DURATION_MS;ship&&gameCanvas?(ship['y']=gameCanvas[_0x7adb6(0xe6)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,!isManualControl&&(aiNeedsStabilization=!![])):console[_0x7adb6(0x195)](_0x7adb6(0x176));if(playerLives<=0x0){const _0x4ace68=currentPlayer;if(_0x4ace68===0x1)player1Lives=0x0;if(_0x4ace68===0x2)player2Lives=0x0;if(isTwoPlayerMode){isShowingPlayerGameOverMessage=!![],playerGameOverMessageStartTime=_0x1200ed,playerWhoIsGameOver=_0x4ace68;const _0x16890a=_0x4ace68===0x1?0x2:0x1,_0x41ff5a=_0x16890a===0x1?player1Lives:player2Lives;_0x41ff5a>0x0?nextActionAfterPlayerGameOver=_0x7adb6(0x1a0):nextActionAfterPlayerGameOver=_0x7adb6(0xbc),bullets=[],enemyBullets=[],explosions=[],playSound(gameOverSound);}else triggerFinalGameOverSequence();break;}else{if(isTwoPlayerMode){if(currentPlayer===0x1)player1Lives=playerLives;else player2Lives=playerLives;}break;}}}}}}if(ship&&!isShowingPlayerGameOverMessage&&!isShipCaptured&&!isWaitingForRespawn&&!isInvincible){const _0x55bd2a={'x':ship['x'],'y':ship['y'],'width':ship[_0x7adb6(0x166)],'height':ship[_0x7adb6(0xe6)]},_0x58a9bb=isDualShipActive?{'x':ship['x']+DUAL_SHIP_OFFSET_X,'y':ship['y'],'width':ship[_0x7adb6(0x166)],'height':ship['height']}:null;for(let _0x2db862=enemyBullets['length']-0x1;_0x2db862>=0x0;_0x2db862--){const _0x4913a7=enemyBullets[_0x2db862];if(!_0x4913a7){enemyBullets[_0x7adb6(0x102)](_0x2db862,0x1);continue;}const _0x245b1d={'x':_0x4913a7['x'],'y':_0x4913a7['y'],'width':_0x4913a7[_0x7adb6(0x166)],'height':_0x4913a7[_0x7adb6(0xe6)]};let _0x5ba60d=checkCollision(_0x55bd2a,_0x245b1d),_0x316b2c=0x0;!_0x5ba60d&&_0x58a9bb&&checkCollision(_0x58a9bb,_0x245b1d)&&(_0x5ba60d=!![],_0x316b2c=0x1);if(_0x5ba60d){enemyBullets['splice'](_0x2db862,0x1);if(isDualShipActive){isDualShipActive=![];if(currentPlayer===0x1)player1IsDualShipActive=![];else player2IsDualShipActive=![];_0x316b2c===0x1?createExplosion(_0x58a9bb['x']+ship['width']/0x2,_0x58a9bb['y']+ship[_0x7adb6(0xe6)]/0x2):createExplosion(_0x55bd2a['x']+ship['width']/0x2,_0x55bd2a['y']+ship[_0x7adb6(0xe6)]/0x2),playSound(lostLifeSound),isInvincible=!![],invincibilityEndTime=_0x1200ed+INVINCIBILITY_DURATION_MS;}else{playerLives--,playSound(lostLifeSound),createExplosion(ship['x']+ship[_0x7adb6(0x166)]/0x2,ship['y']+ship[_0x7adb6(0xe6)]/0x2),csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastChainHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],fallingShips=[],isInvincible=!![],invincibilityEndTime=_0x1200ed+INVINCIBILITY_DURATION_MS;ship&&gameCanvas?(ship['y']=gameCanvas['height']-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,!isManualControl&&(aiNeedsStabilization=!![])):console[_0x7adb6(0x195)](_0x7adb6(0x176));if(playerLives<=0x0){const _0x19fb9c=currentPlayer;if(_0x19fb9c===0x1)player1Lives=0x0;if(_0x19fb9c===0x2)player2Lives=0x0;if(isTwoPlayerMode){isShowingPlayerGameOverMessage=!![],playerGameOverMessageStartTime=_0x1200ed,playerWhoIsGameOver=_0x19fb9c;const _0x43675d=_0x19fb9c===0x1?0x2:0x1,_0x2375b2=_0x43675d===0x1?player1Lives:player2Lives;_0x2375b2>0x0?nextActionAfterPlayerGameOver='switch_player':nextActionAfterPlayerGameOver='show_results',bullets=[],enemyBullets=[],explosions=[],playSound(gameOverSound);}else triggerFinalGameOverSequence();break;}else{if(isTwoPlayerMode){if(currentPlayer===0x1)player1Lives=playerLives;else player2Lives=playerLives;}break;}}}}}if(ship&&!isShipCaptured&&!isWaitingForRespawn&&!isDualShipActive&&fallingShips[_0x7adb6(0xe9)]>0x0&&!isInvincible){const _0x10f7bb={'x':ship['x'],'y':ship['y'],'width':ship['width'],'height':ship[_0x7adb6(0xe6)]};for(let _0x1895dc=fallingShips[_0x7adb6(0xe9)]-0x1;_0x1895dc>=0x0;_0x1895dc--){const _0x53e352=fallingShips[_0x1895dc];if(!_0x53e352)continue;const _0x490bde={'x':_0x53e352['x'],'y':_0x53e352['y'],'width':_0x53e352['width'],'height':_0x53e352[_0x7adb6(0xe6)]};if(checkCollision(_0x10f7bb,_0x490bde)){fallingShips['splice'](_0x1895dc,0x1),isDualShipActive=!![];if(currentPlayer===0x1)player1IsDualShipActive=!![];else player2IsDualShipActive=!![];playSound(dualShipSound);break;}}}updateHitSparks();}catch(_0x4f2202){console[_0x7adb6(0x195)](_0x7adb6(0x149),_0x4f2202,_0x4f2202[_0x7adb6(0x183)]),isGridSoundPlaying=![],stopSound(gridBackgroundSound),isEntrancePhaseActive=![],stopSound(entranceSound),isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',isShipCaptured=![],captureBeamActive=![],capturingBossId=null,stopSound(captureSound),stopSound(shipCapturedSound),isWaitingForRespawn=![],fallingShips=[],isDualShipActive=![],player1IsDualShipActive=![],player2IsDualShipActive=![],isInvincible=![],invincibilityEndTime=0x0,hitSparks=[];if(typeof showMenuState===_0x7adb6(0x16c))showMenuState();if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null,alert(_0x7adb6(0x11f));}}function switchPlayerTurn(){const _0x141fba=_0x8deb;if(!isTwoPlayerMode)return![];stopSound(hiScoreSound),highScore=Math[_0x141fba(0x1be)](highScore,score);currentPlayer===0x1?(player1Score=score,player1IsDualShipActive=isDualShipActive):(player2Score=score,player2IsDualShipActive=isDualShipActive);const _0x1a352a=currentPlayer===0x1?0x2:0x1,_0x2122ad=_0x1a352a===0x1?player1Lives:player2Lives;if(_0x2122ad<=0x0){const _0x2374d4=currentPlayer===0x1?player1Lives:player2Lives;return _0x2374d4<=0x0?(triggerFinalGameOverSequence(),![]):(forceCenterShipNextReset=![],![]);}return currentPlayer=_0x1a352a,score=currentPlayer===0x1?player1Score:player2Score,playerLives=currentPlayer===0x1?player1Lives:player2Lives,isDualShipActive=currentPlayer===0x1?player1IsDualShipActive:player2IsDualShipActive,forceCenterShipNextReset=!![],scoreEarnedThisCS=0x0,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastChainHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],isShipCaptured=![],captureBeamActive=![],capturingBossId=null,isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,fallingShips=[],hitSparks=[],showExtraLifeMessage=![],extraLifeMessageStartTime=0x0,!![];}function firePlayerBullet(_0x2a3bf1=![]){const _0x1b7e43=_0x8deb;let _0x516da1=_0x2a3bf1?0x1:currentPlayer,_0x1bf63d=selectedFiringMode===_0x1b7e43(0x1d4),_0x3d90fb=!_0x2a3bf1&&isTwoPlayerMode&&currentPlayer===0x2;if(isPaused||!isInGameState||playerLives<=0x0||gameOverSequenceStartTime>0x0||!ship||isShipCaptured||isWaitingForRespawn||isShowingIntro||showReadyMessage||isCsCompletionDelayActive||showCsHitsMessage||showPerfectMessage||showCsBonusScoreMessage||showCSClearMessage||isShowingPlayerGameOverMessage)return![];try{const _0x157aca=ship['y'];let _0x596711=0x0;if(isDualShipActive){const _0x5e6fc2=ship['x']+ship[_0x1b7e43(0x166)]/0x2,_0x18082d=ship['x']+DUAL_SHIP_OFFSET_X+ship[_0x1b7e43(0x166)]/0x2,_0x4ab979=_0x5e6fc2-PLAYER_BULLET_WIDTH/0x2,_0x5f2a23=_0x18082d-PLAYER_BULLET_WIDTH/0x2;bullets[_0x1b7e43(0x155)]({'x':_0x4ab979,'y':_0x157aca,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED}),bullets['push']({'x':_0x5f2a23,'y':_0x157aca,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED}),_0x596711=0x2;}else{const _0x14e85f=ship['x']+ship[_0x1b7e43(0x166)]/0x2-PLAYER_BULLET_WIDTH/0x2;bullets['push']({'x':_0x14e85f,'y':_0x157aca,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED}),_0x596711=0x1;}_0x1bf63d&&!_0x2a3bf1&&(_0x3d90fb?p2JustFiredSingle=!![]:p1JustFiredSingle=!![]);playSound(playerShootSound);if(_0x516da1===0x1||_0x2a3bf1)player1ShotsFired+=_0x596711;else _0x516da1===0x2&&(player2ShotsFired+=_0x596711);return!![];}catch(_0x5a616f){return console[_0x1b7e43(0x195)]('Error\x20creating\x20player\x20bullet(s):',_0x5a616f),![];}}function handlePlayerInput(){const _0xbca5cc=_0x8deb;try{if(isPaused||!isManualControl||playerLives<=0x0||!ship||!gameCanvas||!isInGameState||gameOverSequenceStartTime>0x0||isShowingPlayerGameOverMessage||isWaitingForRespawn){leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1FireInputWasDown=![],p2FireInputWasDown=![],keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![];return;}leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![];let _0x1f9dc0=keyboardP1LeftDown,_0x3e4808=keyboardP1RightDown,_0x4ba6f5=keyboardP1ShootDown,_0x54bdc2=keyboardP2LeftDown,_0x5d425f=keyboardP2RightDown,_0xd4f423=keyboardP2ShootDown,_0x2521a6=![],_0x1cc5b9=![],_0x129eeb=![],_0x275806=![],_0x1e5ac9=![],_0x29b45a=![];const _0x1a9f70=selectedFiringMode==='single';if(connectedGamepadIndex!==null){const _0x577dd3=navigator[_0xbca5cc(0xc6)]();if(_0x577dd3?.[connectedGamepadIndex]){const _0x35859d=_0x577dd3[connectedGamepadIndex],_0x12ac06=processSingleController(_0x35859d,previousGameButtonStates);_0x2521a6=_0x12ac06[_0xbca5cc(0x105)],_0x1cc5b9=_0x12ac06[_0xbca5cc(0xd6)],_0x129eeb=_0x12ac06[_0xbca5cc(0xd1)];const _0x508924=previousGameButtonStates[PS5_BUTTON_CROSS]??![],_0x567ea7=!_0x129eeb&&_0x508924;if(_0x567ea7&&_0x1a9f70)p1JustFiredSingle=![];previousButtonStates=_0x12ac06[_0xbca5cc(0x1a3)];if(_0x12ac06[_0xbca5cc(0x1b7)]){togglePause();return;}if(_0x12ac06[_0xbca5cc(0xea)]){stopGameAndShowMenu();return;}}else{if(previousButtonStates[_0xbca5cc(0xe9)]>0x0)previousButtonStates=[];if(_0x1a9f70)p1JustFiredSingle=![];p1FireInputWasDown=![];}}else{if(previousButtonStates[_0xbca5cc(0xe9)]>0x0)previousButtonStates=[];}if(isTwoPlayerMode&&connectedGamepadIndexP2!==null){const _0x1c6e2e=navigator[_0xbca5cc(0xc6)]();if(_0x1c6e2e?.[connectedGamepadIndexP2]){const _0xe6423d=_0x1c6e2e[connectedGamepadIndexP2],_0x5497a8=processSingleController(_0xe6423d,previousGameButtonStatesP2);_0x275806=_0x5497a8[_0xbca5cc(0x105)],_0x1e5ac9=_0x5497a8[_0xbca5cc(0xd6)],_0x29b45a=_0x5497a8['shoot'];const _0x5e123f=previousGameButtonStatesP2[PS5_BUTTON_CROSS]??![],_0x33eca0=!_0x29b45a&&_0x5e123f;if(_0x33eca0&&_0x1a9f70)p2JustFiredSingle=![];previousGameButtonStatesP2=_0x5497a8['newButtonStates'];}else{if(previousGameButtonStatesP2[_0xbca5cc(0xe9)]>0x0)previousGameButtonStatesP2=[];if(_0x1a9f70)p2JustFiredSingle=![];p2FireInputWasDown=![];}}else{if(previousGameButtonStatesP2[_0xbca5cc(0xe9)]>0x0)previousGameButtonStatesP2=[];}let _0x5956d1=![],_0x192ab8=![];const _0x15838d=Date[_0xbca5cc(0x154)]();let _0x1ece8a=_0x4ba6f5||_0x129eeb,_0x52b185=![];const _0x4d17a2=isTwoPlayerMode&&connectedGamepadIndexP2===null&&connectedGamepadIndex!==null;isTwoPlayerMode&&(_0x52b185=_0xd4f423||_0x29b45a||_0x4d17a2&&_0x129eeb);const _0x353ff1=_0x1ece8a&&!p1FireInputWasDown,_0x3c7d8b=!_0x1ece8a&&p1FireInputWasDown,_0xaecff2=_0x52b185&&!p2FireInputWasDown,_0x1d09e9=!_0x52b185&&p2FireInputWasDown;if(currentPlayer===0x1||!isTwoPlayerMode)leftPressed=_0x1f9dc0||_0x2521a6,rightPressed=_0x3e4808||_0x1cc5b9,_0x1a9f70?(_0x353ff1&&!p1JustFiredSingle&&(_0x5956d1=!![]),_0x3c7d8b&&(p1JustFiredSingle=![])):_0x1ece8a&&_0x15838d-playerLastShotTime>=SHOOT_COOLDOWN&&(_0x5956d1=!![]),shootPressed=_0x5956d1;else{if(isTwoPlayerMode&&currentPlayer===0x2){p2LeftPressed=_0x54bdc2||_0x275806||_0x4d17a2&&_0x2521a6,p2RightPressed=_0x5d425f||_0x1e5ac9||_0x4d17a2&&_0x1cc5b9;const _0xe734b5=_0x4d17a2&&(!_0x129eeb&&(previousGameButtonStates[PS5_BUTTON_CROSS]??![]));_0x1a9f70?(_0xaecff2&&!p2JustFiredSingle&&(_0x192ab8=!![]),(_0x1d09e9||_0xe734b5)&&(p2JustFiredSingle=![])):_0x52b185&&_0x15838d-playerLastShotTime>=SHOOT_COOLDOWN&&(_0x192ab8=!![]),p2ShootPressed=_0x192ab8;}}(_0x5956d1||_0x192ab8)&&(firePlayerBullet(![])&&(!_0x1a9f70&&(playerLastShotTime=_0x15838d))),p1FireInputWasDown=_0x1ece8a,p2FireInputWasDown=_0x52b185;}catch(_0xd4fa2a){console[_0xbca5cc(0x195)](_0xbca5cc(0x12f),_0xd4fa2a),leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![];}}function _0x5082(){const _0x479499=['\x20after\x20attack:','enemy-cs-','Entrance\x20Wave:\x20Path\x20','91xYqElP','attackFormationOffsetX','\x20at\x20[','abs','Error\x20handling\x20player\x20input:','capturing','Entrance\x20Wave:\x20Invalid\x20enemy\x20def\x20in\x20squadron\x20','6IidwmO','\x20after\x20bezier\x20error','squadronEnemyIndex','\x20diving\x20to\x20capture\x20without\x20targetX/Y!\x20Aborting.','CS_LoopAttack_TL','\x20to\x20reset\x20state/rotation.','\x20has\x20invalid\x20enemy\x20data.','\x20for\x20MUST\x20DIVE\x20(Normal\x20attack).','2KfeHeh','\x22\x20does\x20not\x20exist\x20in\x20normalWaveEntrancePaths!\x20Removing\x20squadron.','initialCaptureAnimationY','Error:\x20Tried\x20to\x20start\x20wave\x20for\x20player\x20with\x200\x20lives.\x20Triggering\x20Game\x20Over.','capturedShipDimensions',',\x20Pattern\x20','hasFiredPostLanding','\x20points.\x20Health\x20was:\x20','toString','string','substring','\x20after\x20bad\x20next\x20segment','CS_LoopAttack_TR','findIndex','249765qPzuSX','FATAL\x20Error\x20in\x20moveEntities:','\x20(no\x20attack\x20path):','isDamaged','Canvas/ship\x20not\x20ready\x20in\x20resetWave.','moving_to_grid','430420HWLnSo','\x20(Entrance\x201):\x20Basis\x20patroon\x200\x20is\x20ongeldig\x20of\x20leeg!','16RnLGtm','NaN\x20detected\x20in\x20Normal\x20path\x20calculation\x20for\x20enemy\x20','\x20after\x20missing\x20path','targetX','now','push','justReturned','\x20out\x20of\x20bounds\x20(','undefined','gridCol','find','keys','stringify','Failed\x20to\x20return\x20to\x20menu\x20after\x20critical\x20error:','Entrance\x20Wave:\x20Error\x20during\x20enemy\x20spawn\x20execution\x20(Sq\x20',':\x20Squadron\x20\x22','number','targetGridX','attacking','484584JQoVKI','Boss\x20','),\x20index\x20','width','state','\x20(invalid\x20attack\x20index):','\x20attacking,\x20invalid\x20NEXT\x20segment\x20','.\x20Skipping.','type','function','log','attackPathSegmentIndex','atan2','[Destroyed\x20Boss\x20Score\x20-\x20Attack]\x20Boss\x20destroyed\x20on\x20first\x20hit?\x20Awarding\x20','destroyed','entrance_flight_2','Invalid\x20start\x20segment\x20for\x20path\x20','\x20attacking,\x20index\x20','CS:\x20Path\x20','Cannot\x20reposition\x20ship\x20Y\x20-\x20ship\x20or\x20canvas\x20not\x20ready.','round','22aZAFNP','Error\x20getting\x20grid\x20pos\x20after\x20invalid\x20NEXT\x20attack\x20segment\x20for\x20','Full\x20Grid:\x20Squadron\x20','forEach','scheduledStartTime','Error\x20getting\x20grid\x20pos\x20after\x20bezier\x20error\x20for\x20','cos','172229ieVzeA','\x20attacking\x20without\x20path!\x20Returning.','attackGroupId','\x20at\x20end\x20of\x20normal\x20path\x20','stack','[handleEnemyHit]\x20Attempted\x20to\x20create\x20falling\x20ship,\x20but\x20similar\x20one\x20already\x20exists.\x20Skipping.','Onbekend\x20wave\x20patroon\x20index\x20','\x20state\x20changed\x20unexpectedly.\x20Resetting\x20rotation.','\x20after\x20bad\x20segment','hasOwnProperty','Invalid\x20Normal\x20Bezier\x20segment\x20','entrance_flight_1','Wave\x20','CS_LoopAttack_BL','CRITICAL:\x20Failed\x20to\x20define\x20CS\x20paths!','CS_LoopAttack_BR','total','Error\x20starting\x20attack\x20for\x20','\x20(Full\x20Grid):\x20Basis\x20patroon\x200\x20is\x20ongeldig\x20of\x20leeg!',',\x20isFullGrid:\x20','add','Error\x20updating\x20target\x20grid\x20pos\x20for\x20enemy\x20','error','.\x20Removing.','Error\x20getting\x20grid\x20pos\x20for\x20returning\x20enemy\x20','[handleEnemyHit]\x20CRITICAL:\x20Boss\x20','\x22\x20not\x20found!\x20Aborting\x20CS.','enemy-entr-','.\x20Switching\x20to\x20moving_to_grid.','capturedShipLastFiredTime','\x20missing\x20SHARED\x20path\x20','\x20returning\x20without\x20target\x20coords.\x20Recalculating.','speed','switch_player','.\x20Enemy\x20','entrancePathId','newButtonStates',',\x20index\x20','includes','health',')\x20for\x20','targetY','[scheduleSingleEntranceSquadron]\x20Called\x20inappropriately\x20for\x20non-entrance\x20wave\x20type\x20(Level\x20',',\x20Idx\x20','Error\x20calculating\x20bezier\x20point\x20during\x20attack\x20for\x20','\x20out\x20of\x20bounds\x20for\x20SHARED\x20path\x20','571949lZNVVK','[Capture\x20Message\x20End]\x20Could\x20not\x20find\x20Boss\x20','pathSegmentIndex','Error\x20during\x20FIXED\x20enemy\x20burst\x20firing\x20(bullet\x20','lastFiredTime','A\x20critical\x20error\x20occurred\x20in\x20the\x20game\x20loop.\x20Please\x20refresh.','CRITICAL:\x20Required\x20CS\x20path\x20\x22','Error\x20during\x20post-landing\x20fire\x20for\x20','\x20after\x20invalid\x20path\x20index','\x20destroyed,\x20had\x20ship\x20initially\x20but\x20dimensions\x20missing!\x20Resetting\x20state\x20anyway.','pause','sort','indexOf','Full\x20Grid:\x20Error\x20placing\x20enemy\x20(Sq\x20','Invalid\x20next\x20Normal\x20Bezier\x20segment\x20','object','preparing_attack','max','\x20definition\x20failed.\x20Transitioning\x20immediately.',':\x20Enemy\x20entrancePathId\x20\x22','slice','\x20in\x20moving_to_grid\x20state\x20without\x20target.\x20Recalculating.','gridRow','\x20for\x20squadron\x20','hasCapturedShip','has',')\x20during\x20shift:','\x20invalid!\x20Skipping\x20squadron.','Error\x20updating\x20floating\x20scores:','Invalid\x20CS\x20Bezier\x20segment\x20','rotation','Error\x20checking/awarding\x20extra\x20life:','normal','pathSpeedMultiplier','2206630qJAgIy','Error\x20calculating\x20Normal\x20Bezier\x20point\x20for\x20enemy\x20','isArray','some','[handleEnemyHit]\x20CRITICAL:\x20Boss\x20destroyed,\x20had\x20ship\x20initially\x20but\x20dimensions\x20missing!','single','boss_loop_left','Error\x20deep\x20copying\x20selected\x20pattern\x200\x20for\x20Full\x20Grid:','returning','capturedShipX','[Player\x20GO\x20Delay\x20End]\x20Invalid\x20next\x20action:','pathId','parse','sin',')!\x20Cannot\x20validate\x20paths.','show_results',':\x20Squadron\x20pathId\x20\x22','attackPathT','\x20invalid!\x20Skipping.','attack-','\x20off\x20screen:','full_grid',')!\x20Returning.','Full\x20Grid:\x20Invalid\x20enemy\x20def\x20in\x20squadron\x20','capturedShipY','getGamepads','Invalid\x20next\x20CS\x20Bezier\x20segment\x20','Error\x20getting\x20target\x20grid\x20pos\x20for\x20','CRITICAL:\x20normalWaveEntrancePaths\x20is\x20not\x20defined\x20or\x20empty\x20in\x20generateWaveDefinition\x20(Level\x20','every','pathT','attackPathSegments','CS:\x20Error\x20setting\x20up\x20spawns\x20for\x20squadron\x20','random','\x22\x20has\x20no\x20valid\x20enemies\x20array.\x20Removing.','CS3_DiveLoopR_Sharp','shoot','completed','showing_capture_message','tintProgress','Error\x20getting\x20grid\x20pos\x20for\x20returning\x20boss\x20','right','Error\x20getting\x20target\x20grid\x20pos\x20for\x20new\x20enemy\x20','Error\x20getting\x20grid\x20pos\x20within\x20\x27in_grid\x27\x20for\x20','following_bezier_path','Error\x20during\x20enemy\x20burst\x20firing\x20(bullet\x20','[findAndDetachEnemy\x20-\x20PRIORITY]\x20Ship\x20captured.\x20Selecting\x20Boss\x20','\x20was\x20in\x20\x27capturing\x27,\x20but\x20another\x20ship\x20(','\x20(state:\x20','\x20in\x20moving_to_grid','Error\x20updating\x20explosions:','lifetime','returnLogDone','Error\x20deep\x20copying\x20selected\x20pattern\x201\x20for\x20Entrance\x202:','\x20for\x20path\x20','CS3_DiveLoopL_Sharp',',\x20isCS:\x20','height',').\x20Skipping.','Beam\x20collision\x20box\x20has\x20invalid\x20height:','length','back','Entrance\x20Wave:\x20Assigned\x20entrance\x20path\x20\x22','\x20attacking,\x20invalid\x20segment\x20','\x20(Path\x20','attackType','\x20in\x20returning','CS_HorizontalFlyByL','challenging_stage','Error\x20getting\x20grid\x20pos\x20for\x20','velocityY','\x20(invalid\x20attack\x20segment):','[scheduleSingleEntranceSquadron]\x20Firing\x20status\x20for\x20squadron\x20','capturePrepareTimeout','[scheduleEntranceFlightWave]\x20Called\x20inappropriately\x20for\x20non-entrance\x20wave\x20type\x20(Level\x20','diving_to_capture_position','CS:\x20Invalid\x20enemy\x20def\x20in\x20squadron\x20','\x20after\x20NaN','\x20(Entrance\x202):\x20Basis\x20patroon\x201\x20is\x20ongeldig\x20of\x20leeg!','Error\x20in\x20aiControl:','Enemy\x20','preparing_capture','canFireThisDive','858288ddofTX','NaN\x20detected\x20in\x20CS\x20path\x20calculation\x20for\x20enemy\x20','splice','filter','Error\x20calculating\x20CS\x20Bezier\x20point\x20for\x20enemy\x20','left','!\x20Returning.','\x20for\x20SHARED\x20path\x20','CS:\x20Error\x20during\x20enemy\x20spawn\x20execution\x20(Sq\x20','45UeDXdw','Error\x20calculating\x20FINAL\x20bezier\x20point\x20for\x20attack\x20','alpha','floor','captureAnimationRotation','following_entrance_path','squadronId','velocityX','particles','enemies','warn','\x22\x20for\x20enemy\x20in\x20squadron\x20','Attempted\x20to\x20schedule\x20entrance\x20flight\x20wave\x20without\x20valid\x20definition.','enemy-grid-','min','Error\x20getting\x20grid\x20pos\x20after\x20FINAL\x20bezier\x20error\x20for\x20','creationTime','hasFired','Error\x20in\x20findAndDetachEnemy:','\x20voor\x20level\x20','map','in_grid','Critical\x20error\x20during\x20entity\x20movement/collision.\x20Returning\x20to\x20menu.','Error\x20calculating\x20final\x20bezier\x20point\x20for\x20','boss_loop_right','captureStartTime','[DEBUG]\x20Error\x20generating\x20attack\x20path\x20for\x20enemy\x20',',\x20Squadron\x20','duration','targetGridY','sqrt'];_0x5082=function(){return _0x479499;};return _0x5082();}function aiControl(){const _0x2ecdae=_0x8deb;try{if(isPaused||isManualControl||playerLives<=0x0||!ship||!gameCanvas||!isInGameState||gameOverSequenceStartTime>0x0||isShowingPlayerGameOverMessage||isShipCaptured||isWaitingForRespawn){if(ship)ship[_0x2ecdae(0x153)]=ship['x'];aiNeedsStabilization=!![],smoothedShipX=undefined;return;}smoothedShipX===undefined&&(smoothedShipX=ship['x']);const _0x115b71=Date['now'](),_0x56e4ca=gameCanvas[_0x2ecdae(0x166)],_0x20fe6b=gameCanvas[_0x2ecdae(0xe6)];let _0x45dfc9=ship[_0x2ecdae(0x166)];isDualShipActive&&(_0x45dfc9=DUAL_SHIP_OFFSET_X+ship[_0x2ecdae(0x166)]);const _0x4154f9=ship['x']+_0x45dfc9/0x2,_0x5c81a2=ship['y'],_0x20ddaa=_0x56e4ca/0x2;let _0x542434;isDualShipActive?_0x542434=_0x20ddaa-_0x45dfc9/0x2:_0x542434=_0x20ddaa-ship[_0x2ecdae(0x166)]/0x2;const _0x3d8b5e=showReadyMessage||showCSClearMessage||showCsHitsMessage||showPerfectMessage||showCsBonusScoreMessage||showExtraLifeMessage||isCsCompletionDelayActive;let _0x191189=smoothedShipX,_0x452711=![],_0x391118=![],_0x513e12=smoothedShipX,_0x43783e=null,_0x4e88a9=![];aiNeedsStabilization&&!_0x3d8b5e&&(aiStabilizationEndTime=_0x115b71+AI_STABILIZATION_DURATION,aiNeedsStabilization=![],smoothedShipX=ship['x']);if(_0x115b71<aiStabilizationEndTime&&!_0x3d8b5e)_0x191189=_0x542434;else{_0x391118=![],_0x513e12=smoothedShipX;if(!isInvincible){let _0x8ba2d0=[];const _0x2ec281=isChallengingStage?FINAL_DODGE_LOOKAHEAD*0.8:isEntrancePhaseActive?ENTRANCE_BULLET_DODGE_LOOKAHEAD:FINAL_DODGE_LOOKAHEAD,_0x162303=isChallengingStage?FINAL_DODGE_BUFFER_BASE*0.8:isEntrancePhaseActive?ENTRANCE_BULLET_DODGE_BUFFER:FINAL_DODGE_BUFFER_BASE,_0x5489dd={'x':ship['x']-_0x162303/0x2,'y':ship['y']-_0x2ec281,'width':_0x45dfc9+_0x162303,'height':_0x2ec281+ship[_0x2ecdae(0xe6)]};for(const _0x369d27 of enemyBullets){if(_0x369d27&&_0x369d27['y']+_0x369d27[_0x2ecdae(0xe6)]>0x0&&_0x369d27['y']<_0x20fe6b){const _0x3cb3b8={'x':_0x369d27['x'],'y':_0x369d27['y'],'width':_0x369d27[_0x2ecdae(0x166)],'height':_0x369d27[_0x2ecdae(0xe6)]};checkCollision(_0x5489dd,_0x3cb3b8)&&_0x8ba2d0[_0x2ecdae(0x155)](_0x369d27);}}if(_0x8ba2d0[_0x2ecdae(0xe9)]>0x0){_0x391118=!![];let _0x2672fa=_0x56e4ca,_0x30b5af=0x0,_0x8ece3=Infinity;_0x8ba2d0['forEach'](_0x4200c5=>{const _0x394f50=_0x2ecdae;_0x2672fa=Math[_0x394f50(0x117)](_0x2672fa,_0x4200c5['x']),_0x30b5af=Math[_0x394f50(0x1be)](_0x30b5af,_0x4200c5['x']+_0x4200c5[_0x394f50(0x166)]),_0x8ece3=Math[_0x394f50(0x117)](_0x8ece3,_0x5c81a2-(_0x4200c5['y']+_0x4200c5[_0x394f50(0xe6)]));});const _0x15763d=(_0x2672fa+_0x30b5af)/0x2,_0x4e432f=_0x4154f9<_0x15763d?-0x1:0x1,_0xb182e3=0x1-Math['min'](0x1,Math[_0x2ecdae(0x1be)](0x0,_0x8ece3)/_0x2ec281),_0x16aba7=isChallengingStage?1.6:isEntrancePhaseActive?2.2:1.8,_0xdd9e95=isChallengingStage?1.3:isEntrancePhaseActive?1.8:1.5,_0x48ba89=Math[_0x2ecdae(0x1be)](0x0,_0x8ba2d0['length']-0x1)*_0x45dfc9*0.3,_0x103401=_0x45dfc9*(_0x16aba7+_0xb182e3*_0xdd9e95)+_0x48ba89;_0x513e12=smoothedShipX+_0x4e432f*_0x103401;}if(!_0x391118&&!isChallengingStage&&!isFullGridWave){let _0x799ae7=![],_0x4dde77=Infinity;for(const _0x4e656c of enemies){if(_0x4e656c&&_0x4e656c[_0x2ecdae(0x16b)]===ENEMY3_TYPE&&_0x4e656c[_0x2ecdae(0x167)]===_0x2ecdae(0xf8)&&_0x4e656c[_0x2ecdae(0x153)]!=null){const _0x180692=AI_COLLISION_LOOKAHEAD*1.5,_0x12469a=FINAL_DODGE_BUFFER_BASE*1.8,_0x3f67dc=0.2,_0x2a2c74=_0x4e656c['x']+(_0x4e656c['targetX']-_0x4e656c['x'])*_0x3f67dc,_0x21cbb9={'x':_0x2a2c74,'y':_0x4e656c['y'],'width':_0x4e656c['width'],'height':_0x4e656c['height']},_0x3426eb={'x':ship['x']-_0x12469a/0x2,'y':ship['y']-_0x180692,'width':_0x45dfc9+_0x12469a,'height':_0x180692+ship[_0x2ecdae(0xe6)]};if(checkCollision(_0x3426eb,_0x21cbb9)){const _0x489554=_0x5c81a2-(_0x4e656c['y']+_0x4e656c['height']);if(_0x489554<_0x4dde77){_0x4dde77=_0x489554,_0x391118=!![],_0x799ae7=!![];const _0x2e465d=_0x4e656c[_0x2ecdae(0x153)]+_0x4e656c[_0x2ecdae(0x166)]/0x2,_0x3394a9=_0x56e4ca/0x2,_0x3e86fc=_0x2e465d<_0x3394a9?0x1:-0x1,_0x129c3d=0x1-Math[_0x2ecdae(0x117)](0x1,Math[_0x2ecdae(0x1be)](0x0,_0x489554)/_0x180692),_0x191614=_0x45dfc9*(2.5+_0x129c3d*0x2);_0x513e12=smoothedShipX+_0x3e86fc*_0x191614;}}}}}if(!_0x391118){const _0x3b6cf1=AI_COLLISION_LOOKAHEAD,_0x219d2a=NORMAL_WAVE_ATTACKING_DODGE_BUFFER_MULTIPLIER,_0x4f8e7c=BEE_DODGE_BUFFER_HORIZONTAL_FACTOR;let _0x48ac2c=Infinity;for(const _0x1632cc of enemies){if(_0x1632cc&&_0x1632cc[_0x2ecdae(0x167)]===_0x2ecdae(0x162)&&_0x1632cc['y']+_0x1632cc[_0x2ecdae(0xe6)]>0x0&&_0x1632cc['y']<_0x20fe6b){let _0x47ab33=FINAL_DODGE_BUFFER_BASE*_0x219d2a;_0x1632cc['type']===ENEMY1_TYPE&&(_0x47ab33*=_0x4f8e7c);const _0xabb0ed={'x':ship['x']-_0x47ab33/0x2,'y':ship['y']-_0x3b6cf1,'width':_0x45dfc9+_0x47ab33,'height':_0x3b6cf1+ship[_0x2ecdae(0xe6)]},_0x56b589={'x':_0x1632cc['x'],'y':_0x1632cc['y'],'width':_0x1632cc[_0x2ecdae(0x166)],'height':_0x1632cc['height']};if(checkCollision(_0xabb0ed,_0x56b589)){const _0x1e27b6=_0x5c81a2-(_0x1632cc['y']+_0x1632cc['height']);if(_0x1e27b6<_0x48ac2c){_0x48ac2c=_0x1e27b6,_0x391118=!![];const _0x334cee=_0x1632cc['x']+_0x1632cc[_0x2ecdae(0x166)]/0x2,_0x389846=_0x4154f9<_0x334cee?-0x1:0x1,_0x3c0d5c=0x1-Math['min'](0x1,Math[_0x2ecdae(0x1be)](0x0,_0x1e27b6)/_0x3b6cf1),_0xd9b60=_0x45dfc9*(0x2+_0x3c0d5c*1.8);_0x513e12=smoothedShipX+_0x389846*_0xd9b60;}}}}}if(!_0x391118&&!isFullGridWave){const _0x17413c=AI_COLLISION_LOOKAHEAD;let _0x357bba=Infinity;for(const _0x15f709 of enemies){const _0x5d5dff=_0x15f709&&(_0x15f709['state']===_0x2ecdae(0x10e)||_0x15f709[_0x2ecdae(0x167)]==='returning');if(_0x5d5dff&&_0x15f709['y']+_0x15f709['height']>0x0&&_0x15f709['y']<_0x20fe6b){let _0xbf1596=FINAL_DODGE_BUFFER_BASE;_0x15f709[_0x2ecdae(0x16b)]===ENEMY1_TYPE&&(_0xbf1596*=BEE_DODGE_BUFFER_HORIZONTAL_FACTOR);const _0x4d4f0d={'x':ship['x']-_0xbf1596/0x2,'y':ship['y']-_0x17413c,'width':_0x45dfc9+_0xbf1596,'height':_0x17413c+ship[_0x2ecdae(0xe6)]},_0x462e01={'x':_0x15f709['x'],'y':_0x15f709['y'],'width':_0x15f709[_0x2ecdae(0x166)],'height':_0x15f709[_0x2ecdae(0xe6)]};if(checkCollision(_0x4d4f0d,_0x462e01)){const _0x4cd49e=_0x5c81a2-(_0x15f709['y']+_0x15f709[_0x2ecdae(0xe6)]);if(_0x4cd49e<_0x357bba){_0x357bba=_0x4cd49e,_0x391118=!![];const _0x4118ca=_0x15f709['x']+_0x15f709[_0x2ecdae(0x166)]/0x2,_0x2a62e2=_0x4154f9<_0x4118ca?-0x1:0x1,_0x144fb9=0x1-Math[_0x2ecdae(0x117)](0x1,Math[_0x2ecdae(0x1be)](0x0,_0x4cd49e)/_0x17413c),_0x3aab32=_0x45dfc9*(0x2+_0x144fb9*1.8);_0x513e12=smoothedShipX+_0x2a62e2*_0x3aab32;}}}}}}if(_0x391118&&!isInvincible){const _0x21aeb2=Math[_0x2ecdae(0x1be)](AI_ANTI_CORNER_BUFFER,Math[_0x2ecdae(0x117)](_0x56e4ca-_0x45dfc9-AI_ANTI_CORNER_BUFFER,_0x513e12));_0x191189=_0x21aeb2,_0x43783e=null,_0x452711=![];}else{if(fallingShips[_0x2ecdae(0xe9)]>0x0&&!isShipCaptured&&!isWaitingForRespawn){const _0x276c84=fallingShips[0x0];if(_0x276c84){const _0x3598a6=_0x276c84['x']+_0x276c84['width']/0x2;_0x191189=_0x3598a6-_0x45dfc9/0x2,_0x191189=Math['max'](AI_EDGE_BUFFER,Math[_0x2ecdae(0x117)](_0x56e4ca-_0x45dfc9-AI_EDGE_BUFFER,_0x191189)),_0x43783e=null;let _0x428b1b=-Infinity,_0x6a3970=null;for(const _0x1d2c7b of enemies){if(_0x1d2c7b&&_0x1d2c7b['y']<_0x5c81a2){const _0x207b41=_0x1d2c7b['x']+_0x1d2c7b['width']/0x2,_0x66fe1b=Math[_0x2ecdae(0x12e)](_0x207b41-_0x4154f9),_0x1de344=_0x5c81a2-(_0x1d2c7b['y']+_0x1d2c7b[_0x2ecdae(0xe6)]);if(_0x66fe1b<_0x45dfc9*1.5&&_0x1de344>0x0){const _0xb2040e=_0x20fe6b-_0x1d2c7b['y']-_0x66fe1b*0x2-_0x1de344;_0xb2040e>_0x428b1b&&(_0x428b1b=_0xb2040e,_0x6a3970=_0x1d2c7b);}}}if(_0x6a3970){let _0x421f48=!![];const _0x1f0c2d={'x':ship['x']-ENTRANCE_SHOOT_BULLET_CHECK_BUFFER/0x2,'y':ship['y']-ENTRANCE_SHOOT_BULLET_CHECK_LOOKAHEAD,'width':_0x45dfc9+ENTRANCE_SHOOT_BULLET_CHECK_BUFFER,'height':ENTRANCE_SHOOT_BULLET_CHECK_LOOKAHEAD+ship[_0x2ecdae(0xe6)]};for(const _0x2e4ee3 of enemyBullets){if(_0x2e4ee3&&_0x2e4ee3['y']+_0x2e4ee3['height']>0x0&&_0x2e4ee3['y']<_0x20fe6b){const _0x1973d3={'x':_0x2e4ee3['x'],'y':_0x2e4ee3['y'],'width':_0x2e4ee3[_0x2ecdae(0x166)],'height':_0x2e4ee3[_0x2ecdae(0xe6)]};if(checkCollision(_0x1f0c2d,_0x1973d3)){_0x421f48=![];break;}}}_0x421f48&&!(_0x6a3970[_0x2ecdae(0x16b)]===ENEMY3_TYPE&&_0x6a3970[_0x2ecdae(0x167)]===_0x2ecdae(0xfe))&&(_0x452711=!![],_0x43783e=_0x6a3970);}}}else{let _0x51c3b9=![],_0x1ddba3=null;if(!isFullGridWave&&!isManualControl&&captureBeamActive&&capturingBossId&&playerLives>0x1&&!isShipCaptured&&!isInvincible){_0x1ddba3=enemies['find'](_0x5276b8=>_0x5276b8['id']===capturingBossId);if(_0x1ddba3&&_0x1ddba3['state']===_0x2ecdae(0x130)){_0x51c3b9=!![];const _0x56f670=_0x115b71-_0x1ddba3[_0x2ecdae(0x122)];if(_0x56f670>=AI_CAPTURE_WAIT_DURATION_MS){_0x4e88a9=!![];const _0x573ebc=_0x1ddba3['x']+_0x1ddba3[_0x2ecdae(0x166)]/0x2;_0x191189=_0x573ebc-_0x45dfc9/0x2,_0x43783e=null,_0x452711=![];}}}if(!_0x4e88a9){_0x43783e=null;if(isEntrancePhaseActive&&!isChallengingStage&&!isFullGridWave){_0x191189=_0x542434;let _0x43140f=-Infinity,_0x5a4922=null;for(const _0x57e5e5 of enemies){if(_0x57e5e5&&(_0x57e5e5[_0x2ecdae(0x167)]===_0x2ecdae(0x10e)||_0x57e5e5[_0x2ecdae(0x167)]===_0x2ecdae(0x14d))&&_0x57e5e5['y']<_0x5c81a2){const _0x42de6c=_0x57e5e5['x']+_0x57e5e5[_0x2ecdae(0x166)]/0x2,_0xb4cb6a=_0x57e5e5['y']+_0x57e5e5[_0x2ecdae(0xe6)]/0x2,_0x444d61=_0x42de6c-_0x4154f9,_0xe0ff14=_0x5c81a2-_0xb4cb6a,_0x2ac9c6=Math[_0x2ecdae(0x127)](_0x444d61*_0x444d61+_0xe0ff14*_0xe0ff14),_0x5b8bce=Math[_0x2ecdae(0x1be)](0x0,_0x45dfc9*1.5-Math[_0x2ecdae(0x12e)](_0x444d61)),_0x3be108=(_0x20fe6b-_0x57e5e5['y'])*1.5+_0x5b8bce-_0x2ac9c6*0.5;_0x3be108>_0x43140f&&(_0x43140f=_0x3be108,_0x5a4922=_0x57e5e5);}}if(_0x5a4922){_0x43783e=_0x5a4922;const _0x1575f0=_0x43783e['x']+_0x43783e['width']/0x2,_0x5d0b76=Math[_0x2ecdae(0x12e)](_0x4154f9-_0x1575f0),_0x952620=_0x45dfc9*ENTRANCE_SHOOT_ALIGNMENT_FACTOR;let _0x3540ab=!![];const _0x587636={'x':ship['x']-ENTRANCE_SHOOT_BULLET_CHECK_BUFFER/0x2,'y':ship['y']-ENTRANCE_SHOOT_BULLET_CHECK_LOOKAHEAD,'width':_0x45dfc9+ENTRANCE_SHOOT_BULLET_CHECK_BUFFER,'height':ENTRANCE_SHOOT_BULLET_CHECK_LOOKAHEAD+ship[_0x2ecdae(0xe6)]};for(const _0x38f932 of enemyBullets){if(_0x38f932&&_0x38f932['y']+_0x38f932['height']>0x0&&_0x38f932['y']<_0x20fe6b){const _0x558177={'x':_0x38f932['x'],'y':_0x38f932['y'],'width':_0x38f932['width'],'height':_0x38f932[_0x2ecdae(0xe6)]};if(checkCollision(_0x587636,_0x558177)){_0x3540ab=![];break;}}}_0x3540ab&&_0x5d0b76<_0x952620&&((isDualShipActive||_0x43783e['type']!==ENEMY3_TYPE||captureAttemptMadeThisLevel||isShipCaptured)&&(_0x452711=!![]));}}else{if(isChallengingStage){let _0x27a5eb=Infinity;_0x43783e=null;for(const _0x1b4aae of enemies){if(_0x1b4aae&&_0x1b4aae[_0x2ecdae(0x167)]===_0x2ecdae(0xd9)&&_0x1b4aae['y']<_0x5c81a2){const _0x285342=_0x1b4aae['x']+_0x1b4aae[_0x2ecdae(0x166)]/0x2,_0x164b43=Math['abs'](_0x285342-_0x4154f9),_0x33e35f=(0x1-Math[_0x2ecdae(0x117)](0x1,_0x1b4aae['y']/_0x5c81a2))*0x2,_0x10c6b2=_0x164b43/_0x56e4ca*0.5,_0x501ec8=_0x33e35f+_0x10c6b2;_0x501ec8<_0x27a5eb&&(_0x27a5eb=_0x501ec8,_0x43783e=_0x1b4aae);}}let _0x247fbd=_0x4154f9;if(_0x43783e){const _0x49b254=_0x43783e['x']+_0x43783e[_0x2ecdae(0x166)]/0x2,_0xb46ea2=_0x43783e['y']+_0x43783e[_0x2ecdae(0xe6)]/0x2,_0x1d4aaf=_0x5c81a2-_0xb46ea2;let _0xa80918=_0x49b254;const _0x3abf8e=_0x43783e[_0x2ecdae(0x10f)]===0x2||_0x43783e[_0x2ecdae(0x10f)]===0x3;if(!_0x3abf8e&&_0x1d4aaf>0x0&&PLAYER_BULLET_SPEED>0.1){const _0x31caa0=Math[_0x2ecdae(0x117)](MAX_PREDICTION_TIME_CS,_0x1d4aaf/PLAYER_BULLET_SPEED),_0x35709f=0.4,_0x5546e3=(_0x43783e[_0x2ecdae(0x110)]||0x0)*_0x31caa0;_0xa80918=_0x49b254+_0x5546e3*_0x35709f,_0xa80918=Math[_0x2ecdae(0x1be)](_0x43783e['width']/0x2,Math[_0x2ecdae(0x117)](_0x56e4ca-_0x43783e[_0x2ecdae(0x166)]/0x2,_0xa80918));}_0x247fbd=_0xa80918,_0x191189=_0x247fbd-_0x45dfc9/0x2,_0x191189=Math[_0x2ecdae(0x1be)](AI_EDGE_BUFFER,Math['min'](_0x56e4ca-_0x45dfc9-AI_EDGE_BUFFER,_0x191189));const _0x7ff88c=_0x45dfc9*1.5,_0x29588b=Math[_0x2ecdae(0x12e)](_0x4154f9-_0x247fbd);_0x29588b<_0x7ff88c&&(_0x452711=!![]);}else{const _0xed76bb=Math[_0x2ecdae(0xba)](_0x115b71/AI_WIGGLE_PERIOD*0x2*Math['PI'])*AI_WIGGLE_AMPLITUDE*0.5;_0x191189=_0x542434+_0xed76bb,_0x191189=Math[_0x2ecdae(0x1be)](AI_EDGE_BUFFER,Math[_0x2ecdae(0x117)](_0x56e4ca-_0x45dfc9-AI_EDGE_BUFFER,_0x191189));}}else{let _0x4d516c=-Infinity;_0x43783e=null;const _0xef90e2=_0x51c3b9&&!_0x4e88a9;for(const _0x99992a of enemies){if(!_0x99992a)continue;if(_0xef90e2&&_0x99992a['id']===capturingBossId)continue;let _0x360488=![],_0x336e8f=0x0;switch(_0x99992a['state']){case _0x2ecdae(0x11e):_0x360488=!![],_0x336e8f=_0xef90e2?0x4e20:0x4650;break;case'moving_to_grid':case _0x2ecdae(0x1d7):_0x360488=!![],_0x336e8f=0x2328;break;case _0x2ecdae(0x1bd):_0x360488=!![],_0x336e8f=0x1b58;break;case _0x2ecdae(0x162):_0x360488=!![],_0x336e8f=0x1770;break;case _0x2ecdae(0xfe):_0x360488=!![],_0x336e8f=0x61a8;break;}if(_0x360488){let _0x260016=_0x336e8f,_0x5066b9=_0x99992a[_0x2ecdae(0x14b)]&&_0x99992a[_0x2ecdae(0x16b)]===ENEMY3_TYPE?0x1388:0x0,_0x3c1401=(_0x20fe6b-_0x99992a['y'])*0x2,_0x373be1=Math[_0x2ecdae(0x1be)](0x0,_0x45dfc9*0x1-Math[_0x2ecdae(0x12e)](_0x99992a['x']+_0x99992a['width']/0x2-_0x4154f9))*0x1;_0x260016+=_0x3c1401+_0x5066b9+_0x373be1,_0x260016>_0x4d516c&&(_0x4d516c=_0x260016,_0x43783e=_0x99992a);}}let _0x55f917=_0x542434+_0x45dfc9/0x2;if(_0x43783e){const _0x285e0b=_0x43783e['x']+_0x43783e['width']/0x2,_0x585e5b=_0x43783e['y']+_0x43783e['height']/0x2,_0x3e81e4=_0x5c81a2-_0x585e5b;let _0x1dfbab=_0x285e0b;if(_0x43783e['state']!=='in_grid'&&_0x43783e['state']!==_0x2ecdae(0xfe)){if(_0x3e81e4>0x0&&PLAYER_BULLET_SPEED>0.1){const _0x3e636c=Math['min'](MAX_PREDICTION_TIME,_0x3e81e4/PLAYER_BULLET_SPEED);let _0x3855f8=_0x285e0b+(_0x43783e[_0x2ecdae(0x110)]||0x0)*_0x3e636c;_0x1dfbab=Math[_0x2ecdae(0x1be)](_0x43783e['width']/0x2,Math[_0x2ecdae(0x117)](_0x56e4ca-_0x43783e[_0x2ecdae(0x166)]/0x2,_0x3855f8));}}_0x55f917=_0x1dfbab,_0x191189=_0x55f917-_0x45dfc9/0x2;if(_0x43783e[_0x2ecdae(0x167)]==='in_grid'||_0x43783e[_0x2ecdae(0x167)]==='preparing_capture')_0x191189=Math['max'](AI_EDGE_BUFFER,Math[_0x2ecdae(0x117)](_0x56e4ca-_0x45dfc9-AI_EDGE_BUFFER,_0x191189));else{const _0x48c194=_0x56e4ca*0.6/0x2,_0x220a6d=_0x20ddaa-_0x48c194,_0x593c84=_0x20ddaa+_0x48c194-_0x45dfc9;_0x191189=Math[_0x2ecdae(0x1be)](_0x220a6d,Math[_0x2ecdae(0x117)](_0x593c84,_0x191189)),_0x191189=Math[_0x2ecdae(0x1be)](AI_EDGE_BUFFER,Math[_0x2ecdae(0x117)](_0x56e4ca-_0x45dfc9-AI_EDGE_BUFFER,_0x191189));}let _0x534708=![],_0xc7d7f5=Math[_0x2ecdae(0x12e)](_0x4154f9-_0x55f917),_0x57fb8e=_0x43783e[_0x2ecdae(0x167)]==='in_grid'||_0x43783e[_0x2ecdae(0x167)]===_0x2ecdae(0xfe)?_0x45dfc9*GRID_SHOOT_ALIGNMENT_FACTOR:_0x45dfc9*FINAL_SHOOT_ALIGNMENT_THRESHOLD;const _0x583edf=ship['x']<AI_EDGE_BUFFER*AI_EDGE_SHOOT_BUFFER_FACTOR,_0x23f042=ship['x']>_0x56e4ca-_0x45dfc9-AI_EDGE_SHOOT_BUFFER_FACTOR,_0x33b556=_0x55f917>_0x56e4ca*AI_EDGE_SHOOT_TARGET_THRESHOLD_FACTOR,_0x4edbda=_0x55f917<_0x56e4ca*(0x1-AI_EDGE_SHOOT_TARGET_THRESHOLD_FACTOR);(_0x583edf&&_0x33b556||_0x23f042&&_0x4edbda)&&(_0x534708=!![]);if(!_0x534708&&_0xc7d7f5<_0x57fb8e){let _0x5f1707=![];if(_0x43783e[_0x2ecdae(0x167)]!==_0x2ecdae(0x11e)&&_0x43783e[_0x2ecdae(0x167)]!=='preparing_capture')for(const _0x17f2ec of enemies){if(!_0x17f2ec||_0x17f2ec===_0x43783e)continue;if(_0xef90e2&&_0x17f2ec['id']===capturingBossId)continue;if(_0x17f2ec['y']<_0x5c81a2&&_0x17f2ec['y']+_0x17f2ec['height']>_0x43783e['y']){const _0x2a2992=_0x17f2ec['x']-AI_SHOT_CLEARANCE_BUFFER,_0x26a49e=_0x17f2ec['x']+_0x17f2ec['width']+AI_SHOT_CLEARANCE_BUFFER;if(_0x55f917>_0x2a2992&&_0x55f917<_0x26a49e){_0x5f1707=!![];break;}}}!_0x5f1707&&((!_0xef90e2||_0x43783e['id']!==capturingBossId)&&(_0x452711=!![]));}}else{const _0x567ecf=Math[_0x2ecdae(0xba)](_0x115b71/AI_WIGGLE_PERIOD*0x2*Math['PI'])*AI_WIGGLE_AMPLITUDE;_0x191189=_0x542434+_0x567ecf,_0x191189=Math[_0x2ecdae(0x1be)](AI_EDGE_BUFFER,Math[_0x2ecdae(0x117)](_0x56e4ca-_0x45dfc9-AI_EDGE_BUFFER,_0x191189));}}}}}}}ship[_0x2ecdae(0x153)]=_0x191189;if(_0x452711&&!_0x391118&&!_0x4e88a9){let _0x4cc415=!![];!isChallengingStage&&(_0x4cc415=_0x115b71>=aiCanShootTime),_0x4cc415&&_0x115b71-aiLastShotTime>=AI_SHOOT_COOLDOWN&&(firePlayerBullet(!![])&&(aiLastShotTime=_0x115b71));}}catch(_0x16253b){console[_0x2ecdae(0x195)](_0x2ecdae(0xfc),_0x16253b,_0x16253b[_0x2ecdae(0x183)]);if(ship)ship[_0x2ecdae(0x153)]=ship['x'];aiNeedsStabilization=!![],smoothedShipX=undefined;}}function findAndDetachEnemy(){const _0x5a27c8=_0x8deb;try{if(!isFullGridWave&&isShipCaptured){const _0x186ac9=enemies[_0x5a27c8(0x15a)](_0x346f73=>_0x346f73&&_0x346f73['type']===ENEMY3_TYPE&&_0x346f73[_0x5a27c8(0x1c5)]&&_0x346f73[_0x5a27c8(0x167)]===_0x5a27c8(0x11e));if(_0x186ac9){console[_0x5a27c8(0x16d)](_0x5a27c8(0xdb)+_0x186ac9['id']+_0x5a27c8(0x139)),_0x186ac9[_0x5a27c8(0x156)]=!![],_0x186ac9[_0x5a27c8(0xee)]=_0x5a27c8(0x1cd);const _0x11ebab=new Set([_0x186ac9['id']]);return resetJustReturnedFlags(_0x11ebab),[_0x186ac9];}}if(isEntrancePhaseActive)return null;let _0x19b0c8=enemies[_0x5a27c8(0x103)](_0x210d5e=>_0x210d5e&&_0x210d5e['state']===_0x5a27c8(0x11e)&&!_0x210d5e[_0x5a27c8(0x156)]);if(_0x19b0c8['length']===0x0){_0x19b0c8=enemies[_0x5a27c8(0x103)](_0x16df84=>_0x16df84&&_0x16df84[_0x5a27c8(0x167)]===_0x5a27c8(0x11e));if(_0x19b0c8['length']===0x0)return null;}if(_0x19b0c8['length']===0x0)return null;_0x19b0c8[_0x5a27c8(0x1b8)]((_0x22a8a9,_0x16a9b6)=>(_0x16a9b6[_0x5a27c8(0x1c3)]||0x0)-(_0x22a8a9['gridRow']||0x0));const _0xfb24d1=_0x19b0c8[_0x5a27c8(0xe9)]<=0x3;let _0x4feb65=[];const _0x3ae7de=_0x5a27c8(0x1cd);gridJustCompleted&&(gridJustCompleted=![]);let _0x527699=![];if(level>0x1&&!_0xfb24d1&&_0x19b0c8['length']>=0x3){const _0x5955e8=_0x19b0c8[_0x5a27c8(0x103)](_0xcaa0be=>_0xcaa0be[_0x5a27c8(0x16b)]===ENEMY3_TYPE&&!_0xcaa0be[_0x5a27c8(0x1c5)]);for(const _0x29d665 of _0x5955e8){const _0x5420bb=_0x19b0c8[_0x5a27c8(0x15a)](_0x185965=>_0x185965[_0x5a27c8(0x16b)]===ENEMY2_TYPE&&_0x185965[_0x5a27c8(0x1c3)]===_0x29d665['gridRow']&&_0x185965[_0x5a27c8(0x159)]===_0x29d665[_0x5a27c8(0x159)]-0x1),_0x17c7ca=_0x19b0c8[_0x5a27c8(0x15a)](_0x28f531=>_0x28f531['type']===ENEMY2_TYPE&&_0x28f531[_0x5a27c8(0x1c3)]===_0x29d665[_0x5a27c8(0x1c3)]&&_0x28f531[_0x5a27c8(0x159)]===_0x29d665[_0x5a27c8(0x159)]+0x1);if(_0x5420bb&&_0x17c7ca){_0x4feb65=[_0x29d665,_0x5420bb,_0x17c7ca],_0x527699=!![];break;}}}if(!_0x527699&&!_0xfb24d1){const _0x31a036=_0x19b0c8[_0x5a27c8(0x103)](_0x510893=>_0x510893[_0x5a27c8(0x16b)]===ENEMY1_TYPE),_0x49232b=scaleValue(level,BASE_BEE_GROUP_ATTACK_PROBABILITY,MAX_BEE_GROUP_ATTACK_PROBABILITY)*1.2;if(_0x31a036['length']>=0x2&&Math[_0x5a27c8(0xce)]()<_0x49232b){const _0x4484c7=scaleValue(level,BASE_BEE_TRIPLE_ATTACK_PROBABILITY,MAX_BEE_TRIPLE_ATTACK_PROBABILITY)*1.1,_0xbdeaf4=_0x31a036[_0x5a27c8(0xe9)]>=0x3&&Math[_0x5a27c8(0xce)]()<_0x4484c7?0x3:0x2;let _0xda6505=![];_0x31a036['sort'](()=>Math[_0x5a27c8(0xce)]()-0.5);for(let _0xf74045=0x0;_0xf74045<_0x31a036['length'];_0xf74045++){const _0x4bda99=_0x31a036[_0xf74045];let _0xbc06e2=[_0x4bda99];const _0xc2467a=_0x31a036['filter'](_0x67880b=>_0x67880b['id']!==_0x4bda99['id']&&_0x67880b['gridRow']===_0x4bda99[_0x5a27c8(0x1c3)]);_0xc2467a[_0x5a27c8(0x1b8)]((_0x3e688a,_0x254602)=>Math['abs'](_0x3e688a[_0x5a27c8(0x159)]-_0x4bda99[_0x5a27c8(0x159)])-Math[_0x5a27c8(0x12e)](_0x254602[_0x5a27c8(0x159)]-_0x4bda99[_0x5a27c8(0x159)]));for(let _0x15efcc=0x0;_0x15efcc<_0xc2467a[_0x5a27c8(0xe9)]&&_0xbc06e2[_0x5a27c8(0xe9)]<_0xbdeaf4;_0x15efcc++){_0xbc06e2[_0x5a27c8(0x155)](_0xc2467a[_0x15efcc]);}if(_0xbc06e2[_0x5a27c8(0xe9)]===_0xbdeaf4){_0x4feb65=_0xbc06e2,_0x527699=!![],_0xda6505=!![];break;}}!_0xda6505&&_0x31a036[_0x5a27c8(0xe9)]>=_0xbdeaf4&&(_0x4feb65=_0x31a036[_0x5a27c8(0x1c1)](0x0,_0xbdeaf4),_0x527699=!![]);}}if(!_0x527699&&!_0xfb24d1){const _0xb57288=_0x19b0c8[_0x5a27c8(0x103)](_0x58891b=>_0x58891b['type']===ENEMY2_TYPE),_0x57c9d7=0.2;if(_0xb57288['length']>=0x2&&Math[_0x5a27c8(0xce)]()<_0x57c9d7){const _0x1b2416=0x2;let _0x4bd093=![];_0xb57288['sort'](()=>Math[_0x5a27c8(0xce)]()-0.5);for(let _0xd5ba66=0x0;_0xd5ba66<_0xb57288[_0x5a27c8(0xe9)];_0xd5ba66++){const _0x35529c=_0xb57288[_0xd5ba66];let _0xb2b594=[_0x35529c];const _0x1dad20=_0xb57288['filter'](_0x26e879=>_0x26e879['id']!==_0x35529c['id']&&_0x26e879['gridRow']===_0x35529c[_0x5a27c8(0x1c3)]);_0x1dad20[_0x5a27c8(0x1b8)]((_0x1ff6cc,_0x1ba122)=>Math[_0x5a27c8(0x12e)](_0x1ff6cc[_0x5a27c8(0x159)]-_0x35529c[_0x5a27c8(0x159)])-Math[_0x5a27c8(0x12e)](_0x1ba122[_0x5a27c8(0x159)]-_0x35529c['gridCol']));for(let _0x26d037=0x0;_0x26d037<_0x1dad20[_0x5a27c8(0xe9)]&&_0xb2b594[_0x5a27c8(0xe9)]<_0x1b2416;_0x26d037++){_0xb2b594[_0x5a27c8(0x155)](_0x1dad20[_0x26d037]);}if(_0xb2b594[_0x5a27c8(0xe9)]===_0x1b2416){_0x4feb65=_0xb2b594,_0x527699=!![],_0x4bd093=!![];break;}}!_0x4bd093&&_0xb57288[_0x5a27c8(0xe9)]>=_0x1b2416&&(_0x4feb65=_0xb57288['slice'](0x0,_0x1b2416),_0x527699=!![]);}}if(!_0x527699&&_0x19b0c8['length']>0x0){const _0x1755b8=_0x19b0c8[0x0];_0x4feb65[_0x5a27c8(0x155)](_0x1755b8);if(_0x19b0c8[_0x5a27c8(0xe9)]>0x1&&!_0xfb24d1&&Math[_0x5a27c8(0xce)]()<0.2){const _0x3d74d2=_0x19b0c8['find'](_0x3cfe0b=>_0x3cfe0b['id']!==_0x1755b8['id']&&_0x3cfe0b[_0x5a27c8(0x1c3)]===_0x1755b8[_0x5a27c8(0x1c3)]&&_0x3cfe0b['gridCol']===_0x1755b8[_0x5a27c8(0x159)]-0x1),_0x3f305a=_0x19b0c8['find'](_0xe397ef=>_0xe397ef['id']!==_0x1755b8['id']&&_0xe397ef[_0x5a27c8(0x1c3)]===_0x1755b8[_0x5a27c8(0x1c3)]&&_0xe397ef[_0x5a27c8(0x159)]===_0x1755b8[_0x5a27c8(0x159)]+0x1),_0x517daf=_0x3d74d2||_0x3f305a;if(_0x517daf){const _0x5e4b39=_0x1755b8['type']===ENEMY3_TYPE&&_0x517daf[_0x5a27c8(0x16b)]===ENEMY3_TYPE;!_0x5e4b39&&_0x4feb65[_0x5a27c8(0x155)](_0x517daf);}}_0x527699=!![];}if(_0x4feb65[_0x5a27c8(0xe9)]>0x0){_0x4feb65=_0x4feb65[_0x5a27c8(0x103)](_0x502d1a=>_0x502d1a);if(_0x4feb65[_0x5a27c8(0xe9)]===0x0)return null;_0x4feb65[_0x5a27c8(0x17b)](_0x3fbd53=>{const _0x314eb2=_0x5a27c8;_0x3fbd53&&(_0x3fbd53[_0x314eb2(0x156)]=!![],_0x3fbd53[_0x314eb2(0xee)]=_0x3ae7de);});const _0x194389=new Set(_0x4feb65['map'](_0x308667=>_0x308667['id']));return resetJustReturnedFlags(_0x194389),_0x4feb65;}return null;}catch(_0x2f4fed){return console[_0x5a27c8(0x195)](_0x5a27c8(0x11b),_0x2f4fed),null;}}function triggerImmediateCaptureDive(){const _0x13b504=_0x8deb;try{if(playerLives<=0x1||isChallengingStage||isShipCaptured||isDualShipActive||captureAttemptMadeThisLevel)return;const _0x2e8cba=enemies[_0x13b504(0x103)](_0x28ff2f=>_0x28ff2f&&_0x28ff2f[_0x13b504(0x167)]===_0x13b504(0x11e)&&_0x28ff2f[_0x13b504(0x16b)]===ENEMY3_TYPE&&!_0x28ff2f[_0x13b504(0x1c5)]);if(_0x2e8cba[_0x13b504(0xe9)]>0x0){const _0x5c29f7=_0x2e8cba[Math[_0x13b504(0x10c)](Math[_0x13b504(0xce)]()*_0x2e8cba[_0x13b504(0xe9)])],_0x242a42=Date[_0x13b504(0x154)]();captureAttemptMadeThisLevel=!![],_0x5c29f7[_0x13b504(0x156)]=!![];const _0x150e2d=new Set([_0x5c29f7['id']]);resetJustReturnedFlags(_0x150e2d);const _0x78c3ba=Math[_0x13b504(0xce)]()<0.5?'left':_0x13b504(0xd6),_0x54e432=_0x78c3ba===_0x13b504(0x105)?gameCanvas[_0x13b504(0x166)]*CAPTURE_DIVE_SIDE_MARGIN_FACTOR:gameCanvas[_0x13b504(0x166)]*(0x1-CAPTURE_DIVE_SIDE_MARGIN_FACTOR)-BOSS_WIDTH,_0x50f978=gameCanvas[_0x13b504(0xe6)]*CAPTURE_DIVE_BOTTOM_HOVER_Y_FACTOR;_0x5c29f7['state']=_0x13b504(0xfe),_0x5c29f7[_0x13b504(0x153)]=_0x54e432,_0x5c29f7[_0x13b504(0x1a8)]=_0x50f978,_0x5c29f7['diveStartTime']=_0x242a42,playSound(bossGalagaDiveSound);const _0x29420f=_0x5c29f7['id'];_0x5c29f7[_0x13b504(0xf6)]=setTimeout(()=>{const _0x54565b=_0x13b504,_0x2bc252=enemies[_0x54565b(0x15a)](_0x356c20=>_0x356c20?.['id']===_0x29420f);_0x2bc252&&_0x2bc252[_0x54565b(0x167)]===_0x54565b(0xfe)&&(_0x2bc252[_0x54565b(0x167)]=_0x54565b(0xf8));if(_0x2bc252)_0x2bc252[_0x54565b(0xf6)]=null;const _0x22a8ca=enemySpawnTimeouts[_0x54565b(0x147)](_0x38ec2c=>_0x38ec2c===_0x5c29f7[_0x54565b(0xf6)]);if(_0x22a8ca>-0x1)enemySpawnTimeouts[_0x54565b(0x102)](_0x22a8ca,0x1);},0x12c),enemySpawnTimeouts[_0x13b504(0x155)](_0x5c29f7[_0x13b504(0xf6)]);}else{}}catch(_0x49b036){console[_0x13b504(0x195)]('Error\x20in\x20triggerImmediateCaptureDive:',_0x49b036);}}function resetJustReturnedFlags(_0x57bf8a){const _0x14d56b=_0x8deb;enemies[_0x14d56b(0x17b)](_0x4ad391=>{const _0x58151e=_0x14d56b;let _0x2ec20b=![];if(_0x57bf8a instanceof Set)_0x2ec20b=_0x57bf8a[_0x58151e(0x1c6)](_0x4ad391['id']);else typeof _0x57bf8a==='string'&&(_0x2ec20b=_0x4ad391['id']===_0x57bf8a);_0x4ad391&&_0x4ad391[_0x58151e(0x167)]===_0x58151e(0x11e)&&_0x4ad391['justReturned']&&!_0x2ec20b&&(_0x4ad391[_0x58151e(0x156)]=![]);});}function updateFloatingScores(){const _0x444f7b=_0x8deb;if(isPaused)return;try{const _0x4067a3=Date[_0x444f7b(0x154)]();floatingScores=floatingScores[_0x444f7b(0x103)](_0x394c66=>_0x4067a3-_0x394c66['creationTime']<FLOATING_SCORE_DURATION+FLOATING_SCORE_APPEAR_DELAY);}catch(_0x59eb41){console['error'](_0x444f7b(0x1c9),_0x59eb41),floatingScores=[];}}function updateExplosions(){const _0x1f61d2=_0x8deb;if(isPaused)return;try{const _0x468dba=Date[_0x1f61d2(0x154)]();for(let _0x293fba=explosions[_0x1f61d2(0xe9)]-0x1;_0x293fba>=0x0;_0x293fba--){const _0x587606=explosions[_0x293fba],_0x5c273d=_0x468dba-_0x587606[_0x1f61d2(0x119)];if(_0x5c273d>_0x587606[_0x1f61d2(0x125)]){explosions['splice'](_0x293fba,0x1);continue;}_0x587606[_0x1f61d2(0x111)]['forEach'](_0x7ad772=>{const _0x42378c=_0x1f61d2;_0x7ad772['x']+=_0x7ad772['vx'],_0x7ad772['y']+=_0x7ad772['vy'],_0x7ad772[_0x42378c(0x10b)]=Math[_0x42378c(0x1be)](0x0,0x1-_0x5c273d/_0x587606[_0x42378c(0x125)]*EXPLOSION_FADE_SPEED);});}}catch(_0xdac8e){console[_0x1f61d2(0x195)](_0x1f61d2(0xdf),_0xdac8e),explosions=[];}}function moveEntities(){const _0x1b4a7b=_0x8deb;if(isPaused)return;try{if(ship&&isInGameState&&playerLives>0x0&&gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage&&!isWaitingForRespawn){let _0x37e6c4=ship[_0x1b4a7b(0x166)];isDualShipActive&&(_0x37e6c4+=DUAL_SHIP_OFFSET_X);let _0x3ffe34=ship['x'];if(isManualControl){let _0x528a65=![],_0x522f5f=![];currentPlayer===0x1||!isTwoPlayerMode?(_0x528a65=leftPressed,_0x522f5f=rightPressed):(_0x528a65=p2LeftPressed,_0x522f5f=p2RightPressed);if(_0x528a65&&ship['x']>0x0)_0x3ffe34=ship['x']-ship[_0x1b4a7b(0x19f)];else _0x522f5f&&ship['x']<gameCanvas[_0x1b4a7b(0x166)]-_0x37e6c4&&(_0x3ffe34=ship['x']+ship['speed']);ship['x']=Math['max'](0x0,Math[_0x1b4a7b(0x117)](gameCanvas[_0x1b4a7b(0x166)]-_0x37e6c4,_0x3ffe34)),ship['targetX']=ship['x'];}else{if(typeof smoothedShipX!==_0x1b4a7b(0x158)){const _0x493c8e=0.1,_0x363672=1.2;smoothedShipX+=(ship[_0x1b4a7b(0x153)]-smoothedShipX)*AI_SMOOTHING_FACTOR_MOVE;const _0x4dc07f=smoothedShipX-ship['x'],_0x355026=ship[_0x1b4a7b(0x19f)]*_0x363672;let _0x30dd33=0x0;if(Math[_0x1b4a7b(0x12e)](_0x4dc07f)>_0x493c8e){const _0x2b8d02=isChallengingStage?CS_AI_MOVE_FRACTION:NORMAL_MOVE_FRACTION;_0x30dd33=_0x4dc07f*_0x2b8d02,_0x30dd33=Math[_0x1b4a7b(0x1be)](-_0x355026,Math[_0x1b4a7b(0x117)](_0x355026,_0x30dd33)),Math[_0x1b4a7b(0x12e)](_0x30dd33)>Math['abs'](_0x4dc07f)&&(_0x30dd33=_0x4dc07f),ship['x']+=_0x30dd33,ship['x']=Math[_0x1b4a7b(0x1be)](0x0,Math[_0x1b4a7b(0x117)](gameCanvas[_0x1b4a7b(0x166)]-_0x37e6c4,ship['x']));}}else ship['x']=Math['max'](0x0,Math[_0x1b4a7b(0x117)](gameCanvas['width']-_0x37e6c4,ship['targetX']));}}const _0x2b5e70=Date[_0x1b4a7b(0x154)]();for(let _0x1623e7=bullets['length']-0x1;_0x1623e7>=0x0;_0x1623e7--){const _0x451a2d=bullets[_0x1623e7];_0x451a2d?(_0x451a2d['y']-=_0x451a2d[_0x1b4a7b(0x19f)],_0x451a2d['y']+PLAYER_BULLET_HEIGHT<0x0&&bullets[_0x1b4a7b(0x102)](_0x1623e7,0x1)):bullets[_0x1b4a7b(0x102)](_0x1623e7,0x1);}for(let _0x7fe0f4=enemyBullets[_0x1b4a7b(0xe9)]-0x1;_0x7fe0f4>=0x0;_0x7fe0f4--){const _0x5cbfa4=enemyBullets[_0x7fe0f4];if(!_0x5cbfa4){enemyBullets[_0x1b4a7b(0x102)](_0x7fe0f4,0x1);continue;}_0x5cbfa4['x']+=_0x5cbfa4['vx'],_0x5cbfa4['y']+=_0x5cbfa4['vy'],(_0x5cbfa4['y']>gameCanvas[_0x1b4a7b(0xe6)]||_0x5cbfa4['y']<-ENEMY_BULLET_HEIGHT||_0x5cbfa4['x']<-ENEMY_BULLET_WIDTH||_0x5cbfa4['x']>gameCanvas['width'])&&enemyBullets[_0x1b4a7b(0x102)](_0x7fe0f4,0x1);}for(let _0x540d05=fallingShips['length']-0x1;_0x540d05>=0x0;_0x540d05--){const _0x1827f4=fallingShips[_0x540d05];if(!_0x1827f4){fallingShips[_0x1b4a7b(0x102)](_0x540d05,0x1);continue;}_0x1827f4['y']+=FALLING_SHIP_SPEED;const _0x354c12=_0x2b5e70-_0x1827f4[_0x1b4a7b(0x119)];typeof _0x1827f4['tintProgress']===_0x1b4a7b(0x160)?_0x1827f4[_0x1b4a7b(0xd4)]=Math[_0x1b4a7b(0x1be)](0x0,0x1-_0x354c12/FALLING_SHIP_FADE_DURATION_MS):_0x1827f4[_0x1b4a7b(0xd4)]=0x0;if(typeof _0x1827f4['rotation']===_0x1b4a7b(0x160)){const _0x154c5d=Math[_0x1b4a7b(0x117)](0x1,_0x354c12/FALLING_SHIP_ROTATION_DURATION_MS);_0x1827f4[_0x1b4a7b(0x1cb)]=_0x154c5d*0x2*(0x2*Math['PI']);}else _0x1827f4['rotation']=0x0;if(ship&&!isDualShipActive&&!isShipCaptured&&!isWaitingForRespawn&&_0x1827f4['y']+_0x1827f4[_0x1b4a7b(0xe6)]>=gameCanvas['height']-AUTO_DOCK_THRESHOLD){fallingShips[_0x1b4a7b(0x102)](_0x540d05,0x1),isDualShipActive=!![];currentPlayer===0x1?player1IsDualShipActive=!![]:player2IsDualShipActive=!![];playSound(dualShipSound);continue;}_0x1827f4['y']>gameCanvas[_0x1b4a7b(0xe6)]+_0x1827f4[_0x1b4a7b(0xe6)]&&fallingShips[_0x1b4a7b(0x102)](_0x540d05,0x1);}let _0x4f6755=0x0;const _0x21ba8e=enemies[_0x1b4a7b(0x1d2)](_0x76252d=>_0x76252d?.[_0x1b4a7b(0x167)]===_0x1b4a7b(0x11e)),_0x226953=!isChallengingStage&&!isWaveTransitioning&&_0x21ba8e&&!isShowingPlayerGameOverMessage;if(_0x226953){!isGridSoundPlaying&&(isGridSoundPlaying=!![],playSound(gridBackgroundSound));const _0x765d24=enemies[_0x1b4a7b(0x103)](_0x3c690c=>_0x3c690c?.[_0x1b4a7b(0x167)]===_0x1b4a7b(0x11e));if(_0x765d24[_0x1b4a7b(0xe9)]>0x0){let _0x56cc93=gameCanvas['width'],_0x338637=0x0;_0x765d24[_0x1b4a7b(0x17b)](_0x6c273e=>{const _0x5b54a2=_0x1b4a7b;_0x6c273e&&(_0x56cc93=Math[_0x5b54a2(0x117)](_0x56cc93,_0x6c273e['x']),_0x338637=Math[_0x5b54a2(0x1be)](_0x338637,_0x6c273e['x']+_0x6c273e[_0x5b54a2(0x166)]));});const _0x362a06=gameCanvas[_0x1b4a7b(0x166)]*GRID_HORIZONTAL_MARGIN_PERCENT,_0x2833ad=gameCanvas[_0x1b4a7b(0x166)]*(0x1-GRID_HORIZONTAL_MARGIN_PERCENT);if(gridMoveDirection===0x1&&_0x338637>=_0x2833ad)gridMoveDirection=-0x1;else gridMoveDirection===-0x1&&_0x56cc93<=_0x362a06&&(gridMoveDirection=0x1);const _0x1f93cc=scaleValue(level,BASE_GRID_MOVE_SPEED,MAX_GRID_MOVE_SPEED);_0x4f6755=_0x1f93cc*gridMoveDirection,currentGridOffsetX+=_0x4f6755,enemies[_0x1b4a7b(0x17b)](_0x241331=>{const _0x4a0b12=_0x1b4a7b;if(_0x241331&&(_0x241331[_0x4a0b12(0x167)]===_0x4a0b12(0x1d7)||_0x241331[_0x4a0b12(0x167)]===_0x4a0b12(0x11e)||_0x241331['state']===_0x4a0b12(0x14d)))try{const _0x238c8a=_0x241331[_0x4a0b12(0x16b)]===ENEMY3_TYPE?BOSS_WIDTH:_0x241331['type']===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,{x:_0x3ea1c3,y:_0xb6a6bb}=getCurrentGridSlotPosition(_0x241331[_0x4a0b12(0x1c3)],_0x241331['gridCol'],_0x238c8a);_0x241331[_0x4a0b12(0x161)]=_0x3ea1c3,_0x241331[_0x4a0b12(0x126)]=_0xb6a6bb;}catch(_0x3a3981){console[_0x4a0b12(0x195)](_0x4a0b12(0x194)+_0x241331?.['id']+_0x4a0b12(0xdd)+_0x241331?.['state']+_0x4a0b12(0x1c7),_0x3a3981);}});}}else isGridSoundPlaying&&(stopSound(gridBackgroundSound),isGridSoundPlaying=![]),_0x4f6755=0x0;for(let _0x28a72a=enemies[_0x1b4a7b(0xe9)]-0x1;_0x28a72a>=0x0;_0x28a72a--){let _0x58dac9=enemies[_0x28a72a];if(!_0x58dac9)continue;const _0x4c6035=_0x58dac9['id'];if(_0x58dac9[_0x1b4a7b(0xf6)]&&_0x58dac9['state']!==_0x1b4a7b(0xfe)){clearTimeout(_0x58dac9[_0x1b4a7b(0xf6)]);const _0x301ffd=enemySpawnTimeouts['indexOf'](_0x58dac9[_0x1b4a7b(0xf6)]);if(_0x301ffd>-0x1)enemySpawnTimeouts[_0x1b4a7b(0x102)](_0x301ffd,0x1);_0x58dac9[_0x1b4a7b(0xf6)]=null;}const _0x12e24e=_0x58dac9['type']===ENEMY3_TYPE?BOSS_WIDTH:_0x58dac9[_0x1b4a7b(0x16b)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x211d6a=_0x58dac9['type']===ENEMY3_TYPE?BOSS_HEIGHT:_0x58dac9['type']===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT;switch(_0x58dac9[_0x1b4a7b(0x167)]){case _0x1b4a7b(0xd9):{let _0x455ebc=CS_ENTRANCE_PATH_SPEED;const _0x386ff7=_0x58dac9['pathSpeedMultiplier']||0x1;_0x455ebc*=_0x386ff7;if(!isChallengingStage){enemies[_0x1b4a7b(0x102)](_0x28a72a,0x1),_0x58dac9=null;break;}let _0x3f3206=challengingStagePaths,_0x4bfc3b=_0x3f3206[_0x58dac9[_0x1b4a7b(0x1a2)]];if(!_0x4bfc3b||_0x58dac9[_0x1b4a7b(0x1af)]>=_0x4bfc3b[_0x1b4a7b(0xe9)]){enemies[_0x1b4a7b(0x102)](_0x28a72a,0x1),_0x58dac9=null;break;}const _0x12dd32=_0x4bfc3b[_0x58dac9[_0x1b4a7b(0x1af)]];if(!_0x12dd32||!_0x12dd32['p0']||!_0x12dd32['p1']||!_0x12dd32['p2']||!_0x12dd32['p3']){console[_0x1b4a7b(0x195)](_0x1b4a7b(0x1ca)+_0x58dac9[_0x1b4a7b(0x1af)]+_0x1b4a7b(0xe3)+_0x58dac9[_0x1b4a7b(0x1a2)]+_0x1b4a7b(0x1a1)+_0x58dac9['id']),enemies[_0x1b4a7b(0x102)](_0x28a72a,0x1),_0x58dac9=null;break;}_0x58dac9[_0x1b4a7b(0xcb)]+=_0x455ebc;let _0x556226,_0x47ac19,_0x43a2dc=_0x58dac9['x'],_0x17c1cd=_0x58dac9['y'];if(_0x58dac9[_0x1b4a7b(0xcb)]>=0x1){_0x58dac9[_0x1b4a7b(0xcb)]=0x0,_0x58dac9[_0x1b4a7b(0x1af)]++;if(_0x58dac9[_0x1b4a7b(0x1af)]>=_0x4bfc3b['length'])enemies[_0x1b4a7b(0x102)](_0x28a72a,0x1),_0x58dac9=null;else{const _0x456ad6=_0x4bfc3b[_0x58dac9[_0x1b4a7b(0x1af)]];_0x456ad6?.['p0']?(_0x556226=_0x456ad6['p0']['x'],_0x47ac19=_0x456ad6['p0']['y']):(console['error'](_0x1b4a7b(0xc7)+_0x58dac9[_0x1b4a7b(0x1af)]+_0x1b4a7b(0xe3)+_0x58dac9[_0x1b4a7b(0x1a2)]+_0x1b4a7b(0x1a1)+_0x4c6035),enemies[_0x1b4a7b(0x102)](_0x28a72a,0x1),_0x58dac9=null);}}else try{_0x556226=calculateBezierPoint(_0x58dac9[_0x1b4a7b(0xcb)],_0x12dd32['p0']['x'],_0x12dd32['p1']['x'],_0x12dd32['p2']['x'],_0x12dd32['p3']['x']),_0x47ac19=calculateBezierPoint(_0x58dac9[_0x1b4a7b(0xcb)],_0x12dd32['p0']['y'],_0x12dd32['p1']['y'],_0x12dd32['p2']['y'],_0x12dd32['p3']['y']);}catch(_0x3f9cbb){console['error'](_0x1b4a7b(0x104)+_0x4c6035+':',_0x3f9cbb),enemies[_0x1b4a7b(0x102)](_0x28a72a,0x1),_0x58dac9=null;}_0x58dac9&&(isNaN(_0x556226)||isNaN(_0x47ac19)?(console[_0x1b4a7b(0x195)](_0x1b4a7b(0x101)+_0x4c6035+_0x1b4a7b(0x196)),enemies[_0x1b4a7b(0x102)](_0x28a72a,0x1),_0x58dac9=null):(_0x58dac9[_0x1b4a7b(0x110)]=_0x556226-_0x43a2dc,_0x58dac9['velocityY']=_0x47ac19-_0x17c1cd,_0x58dac9['x']=_0x556226,_0x58dac9['y']=_0x47ac19));break;}case _0x1b4a7b(0x10e):{if(isChallengingStage){enemies['splice'](_0x28a72a,0x1),_0x58dac9=null;break;}let _0x1a7542=normalWaveEntrancePaths,_0xdb951f=_0x1a7542[_0x58dac9[_0x1b4a7b(0x1a2)]],_0x5665e2;_0x58dac9[_0x1b4a7b(0x1a2)]===_0x1b4a7b(0x1d5)||_0x58dac9[_0x1b4a7b(0x1a2)]==='boss_loop_right'?_0x5665e2=BOSS_LOOP_ENTRANCE_PATH_SPEED:_0x5665e2=NORMAL_ENTRANCE_PATH_SPEED;if(!_0xdb951f){console['warn'](_0x1b4a7b(0xfd)+_0x4c6035+_0x1b4a7b(0x19d)+_0x58dac9['entrancePathId']+'.\x20Switching\x20to\x20moving_to_grid.');try{_0x58dac9['targetGridX']=_0x58dac9[_0x1b4a7b(0x161)]??gameCanvas['width']/0x2,_0x58dac9[_0x1b4a7b(0x126)]=_0x58dac9[_0x1b4a7b(0x126)]??ENEMY_TOP_MARGIN;}catch(_0x108462){console[_0x1b4a7b(0x195)]('Error\x20getting\x20grid\x20pos\x20for\x20'+_0x4c6035+_0x1b4a7b(0x152),_0x108462),_0x58dac9[_0x1b4a7b(0x161)]=gameCanvas[_0x1b4a7b(0x166)]/0x2,_0x58dac9[_0x1b4a7b(0x126)]=ENEMY_TOP_MARGIN;}_0x58dac9[_0x1b4a7b(0x167)]=_0x1b4a7b(0x14d),_0x58dac9['pathT']=0x0,_0x58dac9['pathSegmentIndex']=0x0,_0x58dac9[_0x1b4a7b(0x110)]=0x0,_0x58dac9[_0x1b4a7b(0xf3)]=0x0;_0x58dac9[_0x1b4a7b(0x10f)]!==undefined&&squadronCompletionStatus[_0x58dac9[_0x1b4a7b(0x10f)]]&&squadronCompletionStatus[_0x58dac9[_0x1b4a7b(0x10f)]][_0x1b4a7b(0xd2)]++;break;}if(_0x58dac9['pathSegmentIndex']>=_0xdb951f[_0x1b4a7b(0xe9)]){console[_0x1b4a7b(0x113)]('Enemy\x20'+_0x4c6035+'\x20path\x20index\x20'+_0x58dac9[_0x1b4a7b(0x1af)]+_0x1b4a7b(0x1ac)+_0x58dac9[_0x1b4a7b(0x1a2)]+'.\x20Switching\x20to\x20moving_to_grid.');try{_0x58dac9[_0x1b4a7b(0x161)]=_0x58dac9['targetGridX']??gameCanvas[_0x1b4a7b(0x166)]/0x2,_0x58dac9['targetGridY']=_0x58dac9[_0x1b4a7b(0x126)]??ENEMY_TOP_MARGIN;}catch(_0x424c98){console['error'](_0x1b4a7b(0xf2)+_0x4c6035+_0x1b4a7b(0x1b5),_0x424c98),_0x58dac9[_0x1b4a7b(0x161)]=gameCanvas[_0x1b4a7b(0x166)]/0x2,_0x58dac9[_0x1b4a7b(0x126)]=ENEMY_TOP_MARGIN;}_0x58dac9[_0x1b4a7b(0x167)]=_0x1b4a7b(0x14d),_0x58dac9[_0x1b4a7b(0xcb)]=0x0,_0x58dac9[_0x1b4a7b(0x1af)]=0x0,_0x58dac9['velocityX']=0x0,_0x58dac9[_0x1b4a7b(0xf3)]=0x0;_0x58dac9[_0x1b4a7b(0x10f)]!==undefined&&squadronCompletionStatus[_0x58dac9[_0x1b4a7b(0x10f)]]&&squadronCompletionStatus[_0x58dac9[_0x1b4a7b(0x10f)]][_0x1b4a7b(0xd2)]++;break;}const _0x293ab3=_0xdb951f[_0x58dac9[_0x1b4a7b(0x1af)]];if(!_0x293ab3||!_0x293ab3['p0']||!_0x293ab3['p1']||!_0x293ab3['p2']||!_0x293ab3['p3']){console['error'](_0x1b4a7b(0x189)+_0x58dac9['pathSegmentIndex']+_0x1b4a7b(0x107)+_0x58dac9[_0x1b4a7b(0x1a2)]+_0x1b4a7b(0x1a1)+_0x4c6035+_0x1b4a7b(0x19b));try{_0x58dac9['targetGridX']=_0x58dac9['targetGridX']??gameCanvas[_0x1b4a7b(0x166)]/0x2,_0x58dac9['targetGridY']=_0x58dac9[_0x1b4a7b(0x126)]??ENEMY_TOP_MARGIN+_0x58dac9[_0x1b4a7b(0x1c3)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}catch(_0x28e332){console[_0x1b4a7b(0x195)](_0x1b4a7b(0xf2)+_0x4c6035+_0x1b4a7b(0x187),_0x28e332),_0x58dac9['targetGridX']=gameCanvas[_0x1b4a7b(0x166)]/0x2,_0x58dac9[_0x1b4a7b(0x126)]=ENEMY_TOP_MARGIN;}_0x58dac9[_0x1b4a7b(0x167)]=_0x1b4a7b(0x14d),_0x58dac9[_0x1b4a7b(0xcb)]=0x0,_0x58dac9[_0x1b4a7b(0x1af)]=0x0,_0x58dac9[_0x1b4a7b(0x110)]=0x0,_0x58dac9[_0x1b4a7b(0xf3)]=0x0;_0x58dac9['squadronId']!==undefined&&squadronCompletionStatus[_0x58dac9['squadronId']]&&squadronCompletionStatus[_0x58dac9[_0x1b4a7b(0x10f)]][_0x1b4a7b(0xd2)]++;break;}_0x58dac9['pathT']+=_0x5665e2;let _0x5ad6f6,_0x3c88f3,_0x432206=_0x58dac9['x'],_0x2ee8a5=_0x58dac9['y'];if(_0x58dac9['pathT']>=0x1){_0x58dac9[_0x1b4a7b(0xcb)]=0x0,_0x58dac9[_0x1b4a7b(0x1af)]++;if(_0x58dac9[_0x1b4a7b(0x1af)]>=_0xdb951f[_0x1b4a7b(0xe9)]){let _0x4ec02c,_0x14c751;try{_0x4ec02c=calculateBezierPoint(0x1,_0x293ab3['p0']['x'],_0x293ab3['p1']['x'],_0x293ab3['p2']['x'],_0x293ab3['p3']['x']),_0x14c751=calculateBezierPoint(0x1,_0x293ab3['p0']['y'],_0x293ab3['p1']['y'],_0x293ab3['p2']['y'],_0x293ab3['p3']['y']);}catch(_0x12a81f){console['error'](_0x1b4a7b(0x120)+_0x4c6035+'\x20at\x20end\x20of\x20normal\x20path\x20'+_0x58dac9['entrancePathId'],_0x12a81f),_0x4ec02c=_0x293ab3['p3']['x'],_0x14c751=_0x293ab3['p3']['y'];}_0x58dac9['x']=_0x4ec02c,_0x58dac9['y']=_0x14c751;try{_0x58dac9[_0x1b4a7b(0x161)]=_0x58dac9['targetGridX']??gameCanvas[_0x1b4a7b(0x166)]/0x2,_0x58dac9['targetGridY']=_0x58dac9[_0x1b4a7b(0x126)]??ENEMY_TOP_MARGIN;}catch(_0x11036a){console[_0x1b4a7b(0x195)](_0x1b4a7b(0xc8)+_0x4c6035+_0x1b4a7b(0x182)+_0x58dac9[_0x1b4a7b(0x1a2)],_0x11036a),_0x58dac9[_0x1b4a7b(0x161)]=_0x58dac9['x'],_0x58dac9[_0x1b4a7b(0x126)]=ENEMY_TOP_MARGIN+_0x58dac9['gridRow']*(ENEMY_HEIGHT+ENEMY_V_SPACING);}const _0x2ff111=_0x58dac9[_0x1b4a7b(0x167)];_0x58dac9['state']=_0x1b4a7b(0x14d),_0x58dac9[_0x1b4a7b(0x110)]=0x0,_0x58dac9[_0x1b4a7b(0xf3)]=0x0,_0x58dac9[_0x1b4a7b(0x1af)]=0x0;_0x2ff111===_0x1b4a7b(0x10e)&&_0x58dac9[_0x1b4a7b(0x10f)]!==undefined&&squadronCompletionStatus[_0x58dac9[_0x1b4a7b(0x10f)]]&&squadronCompletionStatus[_0x58dac9[_0x1b4a7b(0x10f)]][_0x1b4a7b(0xd2)]++;break;}else{const _0x1d137e=_0xdb951f[_0x58dac9[_0x1b4a7b(0x1af)]];if(_0x1d137e?.['p0'])_0x5ad6f6=_0x1d137e['p0']['x'],_0x3c88f3=_0x1d137e['p0']['y'];else{console[_0x1b4a7b(0x195)](_0x1b4a7b(0x1bb)+_0x58dac9[_0x1b4a7b(0x1af)]+_0x1b4a7b(0x107)+_0x58dac9[_0x1b4a7b(0x1a2)]+'.\x20Enemy\x20'+_0x4c6035+_0x1b4a7b(0x19b));try{_0x58dac9[_0x1b4a7b(0x161)]=_0x58dac9['targetGridX']??gameCanvas[_0x1b4a7b(0x166)]/0x2,_0x58dac9[_0x1b4a7b(0x126)]=_0x58dac9['targetGridY']??ENEMY_TOP_MARGIN;}catch(_0x3a857b){console['error'](_0x1b4a7b(0xf2)+_0x4c6035+'\x20after\x20bad\x20next\x20segment',_0x3a857b),_0x58dac9[_0x1b4a7b(0x161)]=gameCanvas['width']/0x2,_0x58dac9['targetGridY']=ENEMY_TOP_MARGIN;}_0x58dac9['state']=_0x1b4a7b(0x14d),_0x58dac9['pathT']=0x0,_0x58dac9[_0x1b4a7b(0x1af)]=0x0,_0x58dac9['velocityX']=0x0,_0x58dac9[_0x1b4a7b(0xf3)]=0x0;_0x58dac9[_0x1b4a7b(0x10f)]!==undefined&&squadronCompletionStatus[_0x58dac9[_0x1b4a7b(0x10f)]]&&squadronCompletionStatus[_0x58dac9['squadronId']][_0x1b4a7b(0xd2)]++;break;}}}else try{_0x5ad6f6=calculateBezierPoint(_0x58dac9[_0x1b4a7b(0xcb)],_0x293ab3['p0']['x'],_0x293ab3['p1']['x'],_0x293ab3['p2']['x'],_0x293ab3['p3']['x']),_0x3c88f3=calculateBezierPoint(_0x58dac9[_0x1b4a7b(0xcb)],_0x293ab3['p0']['y'],_0x293ab3['p1']['y'],_0x293ab3['p2']['y'],_0x293ab3['p3']['y']);}catch(_0x3cfbbc){console[_0x1b4a7b(0x195)](_0x1b4a7b(0x1d0)+_0x4c6035+':',_0x3cfbbc);try{_0x58dac9[_0x1b4a7b(0x161)]=_0x58dac9[_0x1b4a7b(0x161)]??gameCanvas[_0x1b4a7b(0x166)]/0x2,_0x58dac9[_0x1b4a7b(0x126)]=_0x58dac9[_0x1b4a7b(0x126)]??ENEMY_TOP_MARGIN;}catch(_0x44c90a){console[_0x1b4a7b(0x195)](_0x1b4a7b(0xf2)+_0x4c6035+'\x20after\x20bezier\x20error',_0x44c90a),_0x58dac9[_0x1b4a7b(0x161)]=gameCanvas[_0x1b4a7b(0x166)]/0x2,_0x58dac9[_0x1b4a7b(0x126)]=ENEMY_TOP_MARGIN;}_0x58dac9[_0x1b4a7b(0x167)]='moving_to_grid',_0x58dac9['pathT']=0x0,_0x58dac9[_0x1b4a7b(0x1af)]=0x0,_0x58dac9[_0x1b4a7b(0x110)]=0x0,_0x58dac9[_0x1b4a7b(0xf3)]=0x0;_0x58dac9['squadronId']!==undefined&&squadronCompletionStatus[_0x58dac9['squadronId']]&&squadronCompletionStatus[_0x58dac9[_0x1b4a7b(0x10f)]]['completed']++;break;}if(_0x58dac9&&_0x58dac9[_0x1b4a7b(0x167)]===_0x1b4a7b(0x10e)){if(isNaN(_0x5ad6f6)||isNaN(_0x3c88f3)){console[_0x1b4a7b(0x195)](_0x1b4a7b(0x151)+_0x4c6035+_0x1b4a7b(0x19b));try{_0x58dac9[_0x1b4a7b(0x161)]=_0x58dac9[_0x1b4a7b(0x161)]??gameCanvas['width']/0x2,_0x58dac9[_0x1b4a7b(0x126)]=_0x58dac9[_0x1b4a7b(0x126)]??ENEMY_TOP_MARGIN;}catch(_0x3d954f){console[_0x1b4a7b(0x195)](_0x1b4a7b(0xf2)+_0x4c6035+_0x1b4a7b(0xfa),_0x3d954f),_0x58dac9[_0x1b4a7b(0x161)]=gameCanvas[_0x1b4a7b(0x166)]/0x2,_0x58dac9['targetGridY']=ENEMY_TOP_MARGIN;}_0x58dac9[_0x1b4a7b(0x167)]=_0x1b4a7b(0x14d),_0x58dac9['pathT']=0x0,_0x58dac9[_0x1b4a7b(0x1af)]=0x0,_0x58dac9[_0x1b4a7b(0x110)]=0x0,_0x58dac9[_0x1b4a7b(0xf3)]=0x0,_0x58dac9['squadronId']!==undefined&&squadronCompletionStatus[_0x58dac9[_0x1b4a7b(0x10f)]]&&squadronCompletionStatus[_0x58dac9[_0x1b4a7b(0x10f)]][_0x1b4a7b(0xd2)]++;}else{let _0x360c4c=_0x5ad6f6;const _0x3a177e=currentWavePatternIndex===0x1&&(_0x58dac9['squadronId']===0x2||_0x58dac9[_0x1b4a7b(0x10f)]===0x3),_0x5e1108=typeof _0x58dac9['squadronEnemyIndex']==='number'&&_0x58dac9[_0x1b4a7b(0x134)]%0x2!==0x0;if(_0x3a177e&&_0x5e1108){const _0x529abc=_0x12e24e+ENTRANCE_PAIR_HORIZONTAL_GAP;_0x360c4c=_0x5ad6f6+_0x529abc;}_0x58dac9['velocityX']=_0x360c4c-_0x432206,_0x58dac9[_0x1b4a7b(0xf3)]=_0x3c88f3-_0x2ee8a5,_0x58dac9['x']=_0x360c4c,_0x58dac9['y']=_0x3c88f3;}}break;}case _0x1b4a7b(0x14d):{if(_0x58dac9[_0x1b4a7b(0x161)]==null||_0x58dac9[_0x1b4a7b(0x126)]==null){console['warn'](_0x1b4a7b(0xfd)+_0x4c6035+_0x1b4a7b(0x1c2));try{const {x:_0x4140b1,y:_0x293e09}=getCurrentGridSlotPosition(_0x58dac9[_0x1b4a7b(0x1c3)],_0x58dac9[_0x1b4a7b(0x159)],_0x12e24e);_0x58dac9[_0x1b4a7b(0x161)]=_0x4140b1,_0x58dac9[_0x1b4a7b(0x126)]=_0x293e09;}catch(_0x614c1d){console[_0x1b4a7b(0x195)](_0x1b4a7b(0xf2)+_0x4c6035+_0x1b4a7b(0xde),_0x614c1d),_0x58dac9[_0x1b4a7b(0x167)]=_0x1b4a7b(0x11e),_0x58dac9['x']=gameCanvas[_0x1b4a7b(0x166)]/0x2,_0x58dac9['y']=ENEMY_TOP_MARGIN;break;}}const _0x4e0c7a=_0x58dac9[_0x1b4a7b(0x161)],_0x33bb06=_0x58dac9[_0x1b4a7b(0x126)],_0x2aa1b8=_0x4e0c7a-_0x58dac9['x'],_0xc265de=_0x33bb06-_0x58dac9['y'],_0x30e56b=Math[_0x1b4a7b(0x127)](_0x2aa1b8*_0x2aa1b8+_0xc265de*_0xc265de),_0x16c1c9=ENTRANCE_SPEED*1.2,_0x2df025=_0x16c1c9*0.5;if(_0x30e56b>_0x2df025)_0x58dac9[_0x1b4a7b(0x110)]=_0x2aa1b8/_0x30e56b*_0x16c1c9,_0x58dac9[_0x1b4a7b(0xf3)]=_0xc265de/_0x30e56b*_0x16c1c9,_0x58dac9['x']+=_0x58dac9[_0x1b4a7b(0x110)],_0x58dac9['y']+=_0x58dac9[_0x1b4a7b(0xf3)];else{_0x58dac9['x']=_0x4e0c7a,_0x58dac9['y']=_0x33bb06,_0x58dac9[_0x1b4a7b(0x110)]=0x0,_0x58dac9['velocityY']=0x0;const _0x569c3e=_0x58dac9[_0x1b4a7b(0x167)];_0x58dac9['state']='in_grid',_0x58dac9[_0x1b4a7b(0x156)]=![];!isGridSoundPlaying&&!isChallengingStage&&(isGridSoundPlaying=!![],playSound(gridBackgroundSound));GRID_BREATH_ENABLED&&!isGridBreathingActive&&!isChallengingStage&&(isGridBreathingActive=!![],gridBreathStartTime=_0x2b5e70,currentGridBreathFactor=0x0);!firstEnemyLanded&&!isFullGridWave&&!isChallengingStage&&(lastGridFireCheckTime=Date['now'](),firstEnemyLanded=!![]);if(_0x569c3e===_0x1b4a7b(0x14d)&&!isChallengingStage&&!isFullGridWave&&_0x58dac9[_0x1b4a7b(0x10f)]!==undefined){const _0x381da4=_0x58dac9[_0x1b4a7b(0x10f)],_0x421c01=squadronCompletionStatus[_0x381da4];if(_0x421c01&&!_0x421c01['hasFiredPostLanding']){const _0x360d17=enemies[_0x1b4a7b(0xca)](_0x545384=>{const _0x476283=_0x1b4a7b;if(_0x545384&&_0x545384[_0x476283(0x10f)]===_0x381da4)return _0x545384[_0x476283(0x167)]===_0x476283(0x11e)||!enemies[_0x476283(0x1d2)](_0x26fe37=>_0x26fe37['id']===_0x545384['id']);return!![];});if(_0x360d17){_0x421c01[_0x1b4a7b(0x140)]=!![];const _0x558bc9=enemies[_0x1b4a7b(0x103)](_0x4c22f6=>_0x4c22f6&&_0x4c22f6[_0x1b4a7b(0x10f)]===_0x381da4&&_0x4c22f6[_0x1b4a7b(0x167)]===_0x1b4a7b(0x11e)&&(_0x4c22f6[_0x1b4a7b(0x16b)]===ENEMY2_TYPE||_0x4c22f6[_0x1b4a7b(0x16b)]===ENEMY3_TYPE)&&!(_0x4c22f6[_0x1b4a7b(0x16b)]===ENEMY3_TYPE&&_0x4c22f6['hasCapturedShip']));if(_0x558bc9[_0x1b4a7b(0xe9)]>0x0){const _0x40b810=_0x558bc9[Math[_0x1b4a7b(0x10c)](Math['random']()*_0x558bc9[_0x1b4a7b(0xe9)])],_0x511b71=_0x40b810['id'],_0x4a51e5=0xc8+Math[_0x1b4a7b(0xce)]()*0x190,_0x3df575=setTimeout(()=>{const _0xb90cc6=_0x1b4a7b;try{const _0x624a38=enemySpawnTimeouts[_0xb90cc6(0x1b9)](_0x3df575);if(_0x624a38>-0x1)enemySpawnTimeouts[_0xb90cc6(0x102)](_0x624a38,0x1);if(isPaused||!isInGameState||playerLives<=0x0||isChallengingStage||isWaveTransitioning||isShipCaptured)return;const _0x234804=enemies[_0xb90cc6(0x15a)](_0x4f7cb8=>_0x4f7cb8&&_0x4f7cb8['id']===_0x511b71);_0x234804&&_0x234804['state']===_0xb90cc6(0x11e)&&(createBulletSimple(_0x234804)&&(playSound(enemyShootSound),_0x234804[_0xb90cc6(0x1b1)]=Date['now']()));}catch(_0x167269){console[_0xb90cc6(0x195)](_0xb90cc6(0x1b4)+_0x511b71+':',_0x167269);}},_0x4a51e5);enemySpawnTimeouts[_0x1b4a7b(0x155)](_0x3df575);}}}}}break;}case _0x1b4a7b(0x11e):{try{const _0x407678=_0x58dac9['type']===ENEMY3_TYPE?BOSS_WIDTH:_0x58dac9['type']===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,{x:_0x2b6437,y:_0x17f1e2}=getCurrentGridSlotPosition(_0x58dac9[_0x1b4a7b(0x1c3)],_0x58dac9[_0x1b4a7b(0x159)],_0x407678);typeof _0x2b6437===_0x1b4a7b(0x160)&&!isNaN(_0x2b6437)&&(_0x58dac9['x']=_0x2b6437),typeof _0x17f1e2===_0x1b4a7b(0x160)&&!isNaN(_0x17f1e2)&&(_0x58dac9['y']=_0x17f1e2),_0x58dac9[_0x1b4a7b(0x161)]=_0x2b6437,_0x58dac9[_0x1b4a7b(0x126)]=_0x17f1e2;}catch(_0x192b20){console['error'](_0x1b4a7b(0xd8)+_0x58dac9['id']+':',_0x192b20);}_0x58dac9[_0x1b4a7b(0x110)]=_0x226953?_0x4f6755:0x0,_0x58dac9['velocityY']=0x0;_0x58dac9[_0x1b4a7b(0x16b)]===ENEMY3_TYPE&&_0x58dac9[_0x1b4a7b(0x1c5)]&&_0x58dac9[_0x1b4a7b(0x13e)]&&(_0x58dac9[_0x1b4a7b(0x1d8)]=_0x58dac9['x']+CAPTURED_SHIP_OFFSET_X,_0x58dac9[_0x1b4a7b(0xc5)]=_0x58dac9['y']+CAPTURED_SHIP_OFFSET_Y);break;}case'preparing_attack':{_0x58dac9[_0x1b4a7b(0x110)]=0x0,_0x58dac9[_0x1b4a7b(0xf3)]=0x0;break;}case _0x1b4a7b(0xfe):{_0x58dac9[_0x1b4a7b(0x110)]=0x0,_0x58dac9[_0x1b4a7b(0xf3)]=0x0;break;}case _0x1b4a7b(0xf8):{if(isShipCaptured){_0x58dac9[_0x1b4a7b(0x167)]=_0x1b4a7b(0x1d7);try{const {x:_0x51cefa,y:_0x12912c}=getCurrentGridSlotPosition(_0x58dac9['gridRow'],_0x58dac9['gridCol'],_0x12e24e);_0x58dac9[_0x1b4a7b(0x161)]=_0x51cefa,_0x58dac9[_0x1b4a7b(0x126)]=_0x12912c;}catch(_0x296634){console['error'](_0x1b4a7b(0xd5)+_0x58dac9['id']+':',_0x296634),_0x58dac9[_0x1b4a7b(0x161)]=gameCanvas[_0x1b4a7b(0x166)]/0x2,_0x58dac9[_0x1b4a7b(0x126)]=ENEMY_TOP_MARGIN;}break;}const _0x16a5c7=_0x58dac9[_0x1b4a7b(0x153)],_0x31feae=_0x58dac9['targetY'];if(_0x16a5c7==null||_0x31feae==null){console[_0x1b4a7b(0x195)](_0x1b4a7b(0x164)+_0x58dac9['id']+'\x20diving\x20to\x20capture\x20without\x20targetX/Y!\x20Aborting.'),_0x58dac9[_0x1b4a7b(0x167)]=_0x1b4a7b(0x1d7);try{const {x:_0x377058,y:_0x46781a}=getCurrentGridSlotPosition(_0x58dac9[_0x1b4a7b(0x1c3)],_0x58dac9['gridCol'],_0x12e24e);_0x58dac9['targetGridX']=_0x377058,_0x58dac9[_0x1b4a7b(0x126)]=_0x46781a;}catch(_0x2f21f0){console[_0x1b4a7b(0x195)](_0x1b4a7b(0xd5)+_0x58dac9['id']+':',_0x2f21f0),_0x58dac9[_0x1b4a7b(0x161)]=gameCanvas['width']/0x2,_0x58dac9[_0x1b4a7b(0x126)]=ENEMY_TOP_MARGIN;}break;}const _0x6207cc=_0x16a5c7-_0x58dac9['x'],_0x126f53=_0x31feae-_0x58dac9['y'],_0x59d964=Math[_0x1b4a7b(0x127)](_0x6207cc*_0x6207cc+_0x126f53*_0x126f53),_0x2672b5=BOSS_CAPTURE_DIVE_SPEED_FACTOR*BASE_ENEMY_ATTACK_SPEED,_0x44f964=_0x2672b5*0.6;_0x59d964>_0x44f964?(_0x58dac9[_0x1b4a7b(0x110)]=_0x6207cc/_0x59d964*_0x2672b5,_0x58dac9[_0x1b4a7b(0xf3)]=_0x126f53/_0x59d964*_0x2672b5,_0x58dac9['x']+=_0x58dac9[_0x1b4a7b(0x110)],_0x58dac9['y']+=_0x58dac9[_0x1b4a7b(0xf3)]):(_0x58dac9['x']=_0x16a5c7,_0x58dac9['y']=_0x31feae,_0x58dac9['velocityX']=0x0,_0x58dac9[_0x1b4a7b(0xf3)]=0x0,_0x58dac9['state']='capturing',_0x58dac9[_0x1b4a7b(0x122)]=_0x2b5e70,capturingBossId=_0x58dac9['id'],captureBeamActive=!![],captureBeamSource={'x':_0x58dac9['x']+_0x12e24e/0x2,'y':_0x58dac9['y']+_0x211d6a},captureBeamTargetY=_0x58dac9['y'],captureBeamProgress=0x0,playSound(captureSound));break;}case'capturing':{_0x58dac9[_0x1b4a7b(0x110)]=0x0,_0x58dac9['velocityY']=0x0;if(isShipCaptured&&_0x58dac9['id']!==capturedBossIdWithMessage){console['warn']('[Capture\x20State]\x20Boss\x20'+_0x58dac9['id']+_0x1b4a7b(0xdc)+capturedBossIdWithMessage+')\x20was\x20already\x20captured.\x20Returning.'),captureBeamActive=![];if(capturingBossId===_0x58dac9['id'])capturingBossId=null;_0x58dac9[_0x1b4a7b(0x167)]=_0x1b4a7b(0x1d7);try{const {x:_0x3cc329,y:_0xbe425c}=getCurrentGridSlotPosition(_0x58dac9[_0x1b4a7b(0x1c3)],_0x58dac9[_0x1b4a7b(0x159)],_0x12e24e);_0x58dac9['targetGridX']=_0x3cc329,_0x58dac9[_0x1b4a7b(0x126)]=_0xbe425c;}catch(_0x524925){console[_0x1b4a7b(0x195)](_0x1b4a7b(0xd5)+_0x58dac9['id']+':',_0x524925),_0x58dac9[_0x1b4a7b(0x161)]=gameCanvas[_0x1b4a7b(0x166)]/0x2,_0x58dac9['targetGridY']=ENEMY_TOP_MARGIN;}stopSound(captureSound);break;}const _0x2bd200=_0x2b5e70-_0x58dac9[_0x1b4a7b(0x122)],_0x16b7cc=CAPTURE_BEAM_ANIMATION_DURATION_MS/0x2,_0x21e555=CAPTURE_BEAM_DURATION_MS;if(_0x2bd200<_0x16b7cc)captureBeamProgress=_0x2bd200/_0x16b7cc;else{if(_0x2bd200<_0x21e555-_0x16b7cc)captureBeamProgress=0x1;else{if(_0x2bd200<_0x21e555)captureBeamProgress=0x1-(_0x2bd200-(_0x21e555-_0x16b7cc))/_0x16b7cc;else{captureBeamProgress=0x0,captureBeamActive=![],capturingBossId=null,stopSound(captureSound),_0x58dac9[_0x1b4a7b(0x167)]=_0x1b4a7b(0x162),_0x58dac9[_0x1b4a7b(0xcc)]=generateAttackPath(_0x58dac9),_0x58dac9[_0x1b4a7b(0x16e)]=0x0,_0x58dac9[_0x1b4a7b(0xbe)]=0x0,_0x58dac9[_0x1b4a7b(0x19f)]=BASE_ENEMY_ATTACK_SPEED*ENEMY3_ATTACK_SPEED_FACTOR,_0x58dac9[_0x1b4a7b(0x1b1)]=0x0,_0x58dac9[_0x1b4a7b(0xff)]=!![],_0x58dac9[_0x1b4a7b(0x12c)]=0x0,_0x58dac9[_0x1b4a7b(0x181)]=null;break;}}}captureBeamProgress=Math[_0x1b4a7b(0x1be)](0x0,Math[_0x1b4a7b(0x117)](0x1,captureBeamProgress));if(ship&&captureBeamActive&&captureBeamProgress>=0.95&&!isShipCaptured&&!isInvincible){const _0x202c93=BOSS_WIDTH*CAPTURE_BEAM_WIDTH_TOP_FACTOR,_0x30f49c=SHIP_WIDTH*CAPTURE_BEAM_WIDTH_BOTTOM_FACTOR,_0x46d894=_0x58dac9['x']+_0x12e24e/0x2,_0x36c444=_0x58dac9['y']+_0x211d6a,_0xc37191=gameCanvas['height']-LIFE_ICON_MARGIN_BOTTOM-LIFE_ICON_SIZE-0xa,_0xf513c5=Math['max'](_0x202c93,_0x30f49c),_0x2ef3bc=_0x46d894-_0xf513c5/0x2,_0x55196a=_0x36c444,_0x34a8cd=_0xc37191-_0x36c444;if(_0x34a8cd>0x0){const _0x3d6030={'x':_0x2ef3bc,'y':_0x55196a,'width':_0xf513c5,'height':_0x34a8cd},_0x151e31={'x':ship['x'],'y':ship['y'],'width':ship['width'],'height':ship['height']};if(checkCollision(_0x151e31,_0x3d6030)){isShipCaptured=!![],_0x58dac9[_0x1b4a7b(0x13e)]={'width':ship[_0x1b4a7b(0x166)],'height':ship[_0x1b4a7b(0xe6)]},_0x58dac9[_0x1b4a7b(0x1c5)]=!![],stopSound(captureSound),_0x58dac9[_0x1b4a7b(0x167)]=_0x1b4a7b(0xd3),_0x58dac9[_0x1b4a7b(0x161)]=null,_0x58dac9[_0x1b4a7b(0x126)]=null,_0x58dac9[_0x1b4a7b(0x13c)]=ship['y'],_0x58dac9[_0x1b4a7b(0x10d)]=0x0,isShowingCaptureMessage=!![],captureMessageStartTime=_0x2b5e70,capturedBossIdWithMessage=_0x58dac9['id'],playSound(shipCapturedSound);const _0x3beef1=currentPlayer;playerLives--,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastChainHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![];if(playerLives<=0x0){if(_0x3beef1===0x1)player1Lives=0x0;if(_0x3beef1===0x2)player2Lives=0x0;if(isTwoPlayerMode){isShowingPlayerGameOverMessage=!![],playerGameOverMessageStartTime=_0x2b5e70,playerWhoIsGameOver=_0x3beef1;const _0x59148e=_0x3beef1===0x1?0x2:0x1,_0x518dc8=_0x59148e===0x1?player1Lives:player2Lives;_0x518dc8>0x0?nextActionAfterPlayerGameOver=_0x1b4a7b(0x1a0):nextActionAfterPlayerGameOver=_0x1b4a7b(0xbc);bullets=[],enemyBullets=[],explosions=[],fallingShips=[],isDualShipActive=![];if(_0x3beef1===0x1)player1IsDualShipActive=![];else player2IsDualShipActive=![];playSound(gameOverSound);}else triggerFinalGameOverSequence();break;}else{if(isTwoPlayerMode){if(_0x3beef1===0x1)player1Lives=playerLives;else player2Lives=playerLives;}ship&&gameCanvas&&(ship['y']=gameCanvas[_0x1b4a7b(0xe6)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,!isManualControl&&(aiNeedsStabilization=!![])),(!isManualControl||isTwoPlayerMode)&&(forceCenterShipNextReset=!![]),isShipCaptured=![],isInvincible=!![],invincibilityEndTime=_0x2b5e70+INVINCIBILITY_DURATION_MS;}}}else console[_0x1b4a7b(0x113)](_0x1b4a7b(0xe8),_0x34a8cd);}break;}case _0x1b4a7b(0xd3):{_0x58dac9[_0x1b4a7b(0x110)]=0x0,_0x58dac9[_0x1b4a7b(0xf3)]=0x0;if(_0x58dac9[_0x1b4a7b(0x1c5)]&&_0x58dac9[_0x1b4a7b(0x13e)]&&typeof _0x58dac9[_0x1b4a7b(0x13c)]===_0x1b4a7b(0x160)){const _0x4ed732=_0x2b5e70-captureMessageStartTime,_0x2c55ba=Math[_0x1b4a7b(0x117)](0x1,_0x4ed732/CAPTURE_MESSAGE_DURATION),_0x430913=_0x58dac9['y']+CAPTURED_SHIP_OFFSET_Y,_0x5af9af=_0x58dac9[_0x1b4a7b(0x13c)];_0x58dac9['capturedShipY']=_0x5af9af+(_0x430913-_0x5af9af)*_0x2c55ba,_0x58dac9['capturedShipX']=_0x58dac9['x']+CAPTURED_SHIP_OFFSET_X;}else _0x58dac9[_0x1b4a7b(0x1d8)]=_0x58dac9['x']+CAPTURED_SHIP_OFFSET_X,_0x58dac9[_0x1b4a7b(0xc5)]=_0x58dac9['y']+CAPTURED_SHIP_OFFSET_Y;break;}case'attacking':{if(isEntrancePhaseActive)break;const _0x33840a=_0x58dac9[_0x1b4a7b(0xcc)],_0x31fca9=3.8;if(!_0x33840a||_0x33840a[_0x1b4a7b(0xe9)]===0x0){console[_0x1b4a7b(0x195)](_0x1b4a7b(0xfd)+_0x4c6035+_0x1b4a7b(0x180)),_0x58dac9[_0x1b4a7b(0x167)]=_0x1b4a7b(0x1d7);try{const {x:_0x248c1e,y:_0x522859}=getCurrentGridSlotPosition(_0x58dac9[_0x1b4a7b(0x1c3)],_0x58dac9[_0x1b4a7b(0x159)],_0x12e24e);_0x58dac9[_0x1b4a7b(0x161)]=_0x248c1e,_0x58dac9['targetGridY']=_0x522859;}catch(_0x10d121){console['error'](_0x1b4a7b(0x197)+_0x4c6035+_0x1b4a7b(0x14a),_0x10d121),_0x58dac9[_0x1b4a7b(0x161)]=gameCanvas['width']/0x2,_0x58dac9[_0x1b4a7b(0x126)]=ENEMY_TOP_MARGIN;}break;}if(_0x58dac9['attackPathSegmentIndex']>=_0x33840a[_0x1b4a7b(0xe9)]){console[_0x1b4a7b(0x113)]('Enemy\x20'+_0x4c6035+_0x1b4a7b(0x174)+_0x58dac9[_0x1b4a7b(0x16e)]+'\x20out\x20of\x20bounds\x20('+_0x33840a[_0x1b4a7b(0xe9)]+_0x1b4a7b(0xc3)),_0x58dac9[_0x1b4a7b(0x167)]=_0x1b4a7b(0x1d7);try{const {x:_0x50e24c,y:_0x3d8c8d}=getCurrentGridSlotPosition(_0x58dac9['gridRow'],_0x58dac9[_0x1b4a7b(0x159)],_0x12e24e);_0x58dac9[_0x1b4a7b(0x161)]=_0x50e24c,_0x58dac9[_0x1b4a7b(0x126)]=_0x3d8c8d;}catch(_0x4b77ec){console[_0x1b4a7b(0x195)]('Error\x20getting\x20grid\x20pos\x20for\x20returning\x20enemy\x20'+_0x4c6035+_0x1b4a7b(0x168),_0x4b77ec),_0x58dac9[_0x1b4a7b(0x161)]=gameCanvas[_0x1b4a7b(0x166)]/0x2,_0x58dac9['targetGridY']=ENEMY_TOP_MARGIN;}break;}const _0x3895d7=_0x33840a[_0x58dac9[_0x1b4a7b(0x16e)]];if(!_0x3895d7||!_0x3895d7['p0']||!_0x3895d7['p1']||!_0x3895d7['p2']||!_0x3895d7['p3']){console['error'](_0x1b4a7b(0xfd)+_0x4c6035+_0x1b4a7b(0xec)+_0x58dac9[_0x1b4a7b(0x16e)]+'!\x20Returning.'),_0x58dac9[_0x1b4a7b(0x167)]=_0x1b4a7b(0x1d7);try{const {x:_0x19aabc,y:_0x12c6f6}=getCurrentGridSlotPosition(_0x58dac9['gridRow'],_0x58dac9['gridCol'],_0x12e24e);_0x58dac9[_0x1b4a7b(0x161)]=_0x19aabc,_0x58dac9[_0x1b4a7b(0x126)]=_0x12c6f6;}catch(_0x145992){console[_0x1b4a7b(0x195)](_0x1b4a7b(0x197)+_0x4c6035+_0x1b4a7b(0xf4),_0x145992),_0x58dac9[_0x1b4a7b(0x161)]=gameCanvas[_0x1b4a7b(0x166)]/0x2,_0x58dac9[_0x1b4a7b(0x126)]=ENEMY_TOP_MARGIN;}break;}const _0x1041a7=_0x58dac9['speed']/0x3e8*_0x31fca9;_0x58dac9[_0x1b4a7b(0xbe)]+=_0x1041a7;let _0x33079d,_0x21d8fb;const _0x8c0574=_0x58dac9['x'],_0x4a2a73=_0x58dac9['y'];if(_0x58dac9['attackPathT']>=0x1){try{_0x33079d=calculateBezierPoint(0x1,_0x3895d7['p0']['x'],_0x3895d7['p1']['x'],_0x3895d7['p2']['x'],_0x3895d7['p3']['x']),_0x21d8fb=calculateBezierPoint(0x1,_0x3895d7['p0']['y'],_0x3895d7['p1']['y'],_0x3895d7['p2']['y'],_0x3895d7['p3']['y']);}catch(_0x2271e3){console['error'](_0x1b4a7b(0x10a)+_0x58dac9['id']+':',_0x2271e3),_0x33079d=_0x58dac9['x'],_0x21d8fb=_0x58dac9['y'],_0x58dac9[_0x1b4a7b(0x167)]='returning';try{const {x:_0x408a30,y:_0x17408e}=getCurrentGridSlotPosition(_0x58dac9[_0x1b4a7b(0x1c3)],_0x58dac9['gridCol'],_0x12e24e);_0x58dac9[_0x1b4a7b(0x161)]=_0x408a30,_0x58dac9[_0x1b4a7b(0x126)]=_0x17408e;}catch(_0x353d94){console[_0x1b4a7b(0x195)](_0x1b4a7b(0x118)+_0x58dac9['id']+':',_0x353d94),_0x58dac9[_0x1b4a7b(0x161)]=gameCanvas['width']/0x2,_0x58dac9[_0x1b4a7b(0x126)]=ENEMY_TOP_MARGIN;}break;}_0x58dac9[_0x1b4a7b(0xbe)]=0x0,_0x58dac9[_0x1b4a7b(0x16e)]++;if(_0x58dac9[_0x1b4a7b(0x16e)]>=_0x33840a['length']){_0x58dac9[_0x1b4a7b(0x167)]=_0x1b4a7b(0x1d7),_0x58dac9[_0x1b4a7b(0x1b1)]=0x0,_0x58dac9[_0x1b4a7b(0x12c)]=0x0,_0x58dac9[_0x1b4a7b(0x181)]=null;try{const {x:_0x5b16eb,y:_0x1c447b}=getCurrentGridSlotPosition(_0x58dac9[_0x1b4a7b(0x1c3)],_0x58dac9[_0x1b4a7b(0x159)],_0x12e24e);_0x58dac9[_0x1b4a7b(0x161)]=_0x5b16eb,_0x58dac9['targetGridY']=_0x1c447b;}catch(_0x680932){console[_0x1b4a7b(0x195)]('Error\x20getting\x20grid\x20pos\x20for\x20returning\x20enemy\x20'+_0x4c6035+_0x1b4a7b(0x128),_0x680932),_0x58dac9[_0x1b4a7b(0x161)]=gameCanvas[_0x1b4a7b(0x166)]/0x2,_0x58dac9[_0x1b4a7b(0x126)]=ENEMY_TOP_MARGIN;}}else{const _0x4d7250=_0x33840a[_0x58dac9['attackPathSegmentIndex']];if(!_0x4d7250?.['p0']){console['error']('Enemy\x20'+_0x4c6035+_0x1b4a7b(0x169)+_0x58dac9[_0x1b4a7b(0x16e)]+_0x1b4a7b(0x106)),_0x33079d=_0x58dac9['x'],_0x21d8fb=_0x58dac9['y'],_0x58dac9['state']=_0x1b4a7b(0x1d7);try{const {x:_0x6f79cc,y:_0xc0a64f}=getCurrentGridSlotPosition(_0x58dac9[_0x1b4a7b(0x1c3)],_0x58dac9[_0x1b4a7b(0x159)],_0x12e24e);_0x58dac9['targetGridX']=_0x6f79cc,_0x58dac9[_0x1b4a7b(0x126)]=_0xc0a64f;}catch(_0x4a8de9){console['error'](_0x1b4a7b(0x179)+_0x58dac9['id']+':',_0x4a8de9),_0x58dac9[_0x1b4a7b(0x161)]=gameCanvas[_0x1b4a7b(0x166)]/0x2,_0x58dac9[_0x1b4a7b(0x126)]=ENEMY_TOP_MARGIN;}break;}}}else try{_0x33079d=calculateBezierPoint(_0x58dac9[_0x1b4a7b(0xbe)],_0x3895d7['p0']['x'],_0x3895d7['p1']['x'],_0x3895d7['p2']['x'],_0x3895d7['p3']['x']),_0x21d8fb=calculateBezierPoint(_0x58dac9['attackPathT'],_0x3895d7['p0']['y'],_0x3895d7['p1']['y'],_0x3895d7['p2']['y'],_0x3895d7['p3']['y']);}catch(_0x4ea0d9){console['error'](_0x1b4a7b(0x1ab)+_0x58dac9['id']+':',_0x4ea0d9),_0x33079d=_0x58dac9['x'],_0x21d8fb=_0x58dac9['y'],_0x58dac9[_0x1b4a7b(0x167)]=_0x1b4a7b(0x1d7);try{const {x:_0x1f88cc,y:_0x171c9e}=getCurrentGridSlotPosition(_0x58dac9['gridRow'],_0x58dac9['gridCol'],_0x12e24e);_0x58dac9[_0x1b4a7b(0x161)]=_0x1f88cc,_0x58dac9[_0x1b4a7b(0x126)]=_0x171c9e;}catch(_0x85be5e){console[_0x1b4a7b(0x195)](_0x1b4a7b(0x17d)+_0x58dac9['id']+':',_0x85be5e),_0x58dac9[_0x1b4a7b(0x161)]=gameCanvas[_0x1b4a7b(0x166)]/0x2,_0x58dac9[_0x1b4a7b(0x126)]=ENEMY_TOP_MARGIN;}break;}if(_0x58dac9&&_0x58dac9[_0x1b4a7b(0x167)]===_0x1b4a7b(0x162)){const _0x1a61d8=_0x58dac9['attackFormationOffsetX']||0x0,_0x327b14=_0x33079d+_0x1a61d8,_0x44516a=_0x21d8fb;_0x58dac9[_0x1b4a7b(0x110)]=_0x327b14-_0x8c0574,_0x58dac9[_0x1b4a7b(0xf3)]=_0x44516a-_0x4a2a73,_0x58dac9['x']=_0x327b14,_0x58dac9['y']=_0x44516a;if(_0x58dac9['y']>gameCanvas[_0x1b4a7b(0xe6)]+_0x211d6a*1.5){_0x58dac9[_0x1b4a7b(0x167)]=_0x1b4a7b(0x1d7),_0x58dac9['attackPathSegmentIndex']=0x0,_0x58dac9[_0x1b4a7b(0xbe)]=0x0,_0x58dac9[_0x1b4a7b(0x1b1)]=0x0,_0x58dac9[_0x1b4a7b(0x12c)]=0x0,_0x58dac9[_0x1b4a7b(0x181)]=null,_0x58dac9['y']=-_0x211d6a*(1.1+Math['random']()*0.4),_0x58dac9['x']=Math['random']()*(gameCanvas['width']-_0x12e24e),_0x58dac9[_0x1b4a7b(0x110)]=0x0,_0x58dac9[_0x1b4a7b(0xf3)]=0x0;try{const {x:_0x192168,y:_0x368ab6}=getCurrentGridSlotPosition(_0x58dac9['gridRow'],_0x58dac9['gridCol'],_0x12e24e);_0x58dac9[_0x1b4a7b(0x161)]=_0x192168,_0x58dac9[_0x1b4a7b(0x126)]=_0x368ab6;}catch(_0x178155){console['error'](_0x1b4a7b(0x197)+_0x4c6035+_0x1b4a7b(0xc1),_0x178155),_0x58dac9[_0x1b4a7b(0x161)]=gameCanvas['width']/0x2,_0x58dac9[_0x1b4a7b(0x126)]=ENEMY_TOP_MARGIN;}}}break;}case _0x1b4a7b(0x1d7):{if(isEntrancePhaseActive)break;if(_0x58dac9['targetGridX']==null||_0x58dac9[_0x1b4a7b(0x126)]==null){console[_0x1b4a7b(0x113)](_0x1b4a7b(0xfd)+_0x4c6035+'\x20returning\x20without\x20target\x20coords.\x20Recalculating.');try{const {x:_0xa7aad0,y:_0x333749}=getCurrentGridSlotPosition(_0x58dac9[_0x1b4a7b(0x1c3)],_0x58dac9[_0x1b4a7b(0x159)],_0x12e24e);_0x58dac9[_0x1b4a7b(0x161)]=_0xa7aad0,_0x58dac9['targetGridY']=_0x333749;}catch(_0x8d94a5){console[_0x1b4a7b(0x195)](_0x1b4a7b(0xf2)+_0x4c6035+'\x20in\x20returning',_0x8d94a5),_0x58dac9[_0x1b4a7b(0x167)]=_0x1b4a7b(0x11e),_0x58dac9['x']=gameCanvas[_0x1b4a7b(0x166)]/0x2,_0x58dac9['y']=ENEMY_TOP_MARGIN;break;}}const _0x19ae93=_0x58dac9['targetGridX'],_0x18016c=_0x58dac9[_0x1b4a7b(0x126)],_0x5e9421=_0x19ae93-_0x58dac9['x'],_0x8da912=_0x18016c-_0x58dac9['y'],_0x427f71=Math['sqrt'](_0x5e9421*_0x5e9421+_0x8da912*_0x8da912),_0xd1864a=scaleValue(level,BASE_RETURN_SPEED_FACTOR,MAX_RETURN_SPEED_FACTOR),_0x3dc03c=BASE_RETURN_SPEED*_0xd1864a,_0x5df6f6=_0x3dc03c*0.5;_0x427f71>_0x5df6f6?(_0x58dac9['velocityX']=_0x5e9421/_0x427f71*_0x3dc03c,_0x58dac9[_0x1b4a7b(0xf3)]=_0x8da912/_0x427f71*_0x3dc03c,_0x58dac9['x']+=_0x58dac9[_0x1b4a7b(0x110)],_0x58dac9['y']+=_0x58dac9[_0x1b4a7b(0xf3)]):(_0x58dac9['x']=_0x19ae93,_0x58dac9['y']=_0x18016c,_0x58dac9[_0x1b4a7b(0x110)]=0x0,_0x58dac9[_0x1b4a7b(0xf3)]=0x0,_0x58dac9[_0x1b4a7b(0x167)]=_0x1b4a7b(0x11e),_0x58dac9[_0x1b4a7b(0x156)]=!![],_0x58dac9['attackFormationOffsetX']=0x0,_0x58dac9[_0x1b4a7b(0x181)]=null,_0x58dac9['hasOwnProperty'](_0x1b4a7b(0xe1))&&delete _0x58dac9[_0x1b4a7b(0xe1)],!isGridSoundPlaying&&!isChallengingStage&&(isGridSoundPlaying=!![],playSound(gridBackgroundSound)));break;}}if(_0x58dac9&&!isShowingPlayerGameOverMessage&&!(isShipCaptured&&_0x58dac9['state']==='capturing')){const _0x296131={'x':0x0,'y':0x0,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT},_0x2a8f91={'x':_0x58dac9['x'],'y':_0x58dac9['y'],'width':_0x12e24e,'height':_0x211d6a};for(let _0x43a1d7=bullets[_0x1b4a7b(0xe9)]-0x1;_0x43a1d7>=0x0;_0x43a1d7--){const _0x38d61d=bullets[_0x43a1d7];if(!_0x38d61d)continue;_0x296131['x']=_0x38d61d['x'],_0x296131['y']=_0x38d61d['y'];if(checkCollision(_0x296131,_0x2a8f91)){const _0x22a249=handleEnemyHit(_0x58dac9);bullets[_0x1b4a7b(0x102)](_0x43a1d7,0x1);if(_0x22a249[_0x1b4a7b(0x171)]){enemies[_0x1b4a7b(0x102)](_0x28a72a,0x1),_0x58dac9=null;break;}}}}if(_0x58dac9&&ship&&!isShipCaptured&&!isWaitingForRespawn&&!isShowingPlayerGameOverMessage&&!isInvincible){const _0x5028b9=[_0x1b4a7b(0x162),_0x1b4a7b(0x10e),'following_bezier_path',_0x1b4a7b(0xf8)];if(_0x5028b9[_0x1b4a7b(0x1a5)](_0x58dac9['state'])){const _0x343265={'x':_0x58dac9['x'],'y':_0x58dac9['y'],'width':_0x12e24e,'height':_0x211d6a},_0x22f9bc={'x':ship['x'],'y':ship['y'],'width':ship[_0x1b4a7b(0x166)],'height':ship[_0x1b4a7b(0xe6)]},_0x1969dd=isDualShipActive?{'x':ship['x']+DUAL_SHIP_OFFSET_X,'y':ship['y'],'width':ship[_0x1b4a7b(0x166)],'height':ship[_0x1b4a7b(0xe6)]}:null;let _0x3b22bb=![],_0x5a3a9a=![];if(checkCollision(_0x343265,_0x22f9bc))_0x3b22bb=!![],_0x5a3a9a=![];else _0x1969dd&&checkCollision(_0x343265,_0x1969dd)&&(_0x3b22bb=!![],_0x5a3a9a=!![]);if(_0x3b22bb){createExplosion(_0x58dac9['x']+_0x12e24e/0x2,_0x58dac9['y']+_0x211d6a/0x2),playSound(lostLifeSound),enemies['splice'](_0x28a72a,0x1),_0x58dac9=null;if(isDualShipActive){isDualShipActive=![];if(currentPlayer===0x1)player1IsDualShipActive=![];else player2IsDualShipActive=![];_0x5a3a9a?createExplosion(_0x1969dd['x']+ship[_0x1b4a7b(0x166)]/0x2,_0x1969dd['y']+ship[_0x1b4a7b(0xe6)]/0x2):createExplosion(_0x22f9bc['x']+ship[_0x1b4a7b(0x166)]/0x2,_0x22f9bc['y']+ship[_0x1b4a7b(0xe6)]/0x2),isInvincible=!![],invincibilityEndTime=_0x2b5e70+INVINCIBILITY_DURATION_MS;}else{playerLives--,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastChainHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],fallingShips=[],isInvincible=!![],invincibilityEndTime=_0x2b5e70+INVINCIBILITY_DURATION_MS;ship&&gameCanvas?(ship['y']=gameCanvas[_0x1b4a7b(0xe6)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,!isManualControl&&(aiNeedsStabilization=!![])):console[_0x1b4a7b(0x195)](_0x1b4a7b(0x176));if(playerLives<=0x0){const _0x1e7c34=currentPlayer;if(_0x1e7c34===0x1)player1Lives=0x0;if(_0x1e7c34===0x2)player2Lives=0x0;if(isTwoPlayerMode){isShowingPlayerGameOverMessage=!![],playerGameOverMessageStartTime=_0x2b5e70,playerWhoIsGameOver=_0x1e7c34;const _0x3274db=_0x1e7c34===0x1?0x2:0x1,_0x3f30ef=_0x3274db===0x1?player1Lives:player2Lives;_0x3f30ef>0x0?nextActionAfterPlayerGameOver=_0x1b4a7b(0x1a0):nextActionAfterPlayerGameOver=_0x1b4a7b(0xbc),bullets=[],enemyBullets=[],explosions=[],playSound(gameOverSound);}else triggerFinalGameOverSequence();break;}else{if(isTwoPlayerMode){if(currentPlayer===0x1)player1Lives=playerLives;else player2Lives=playerLives;}break;}}}}}}if(ship&&!isShowingPlayerGameOverMessage&&!isShipCaptured&&!isWaitingForRespawn&&!isInvincible){const _0x5c1d51={'x':ship['x'],'y':ship['y'],'width':ship[_0x1b4a7b(0x166)],'height':ship[_0x1b4a7b(0xe6)]},_0x5ebc31=isDualShipActive?{'x':ship['x']+DUAL_SHIP_OFFSET_X,'y':ship['y'],'width':ship['width'],'height':ship[_0x1b4a7b(0xe6)]}:null;for(let _0x4f16ad=enemyBullets[_0x1b4a7b(0xe9)]-0x1;_0x4f16ad>=0x0;_0x4f16ad--){const _0x5eb2b5=enemyBullets[_0x4f16ad];if(!_0x5eb2b5){enemyBullets[_0x1b4a7b(0x102)](_0x4f16ad,0x1);continue;}const _0x286dc9={'x':_0x5eb2b5['x'],'y':_0x5eb2b5['y'],'width':_0x5eb2b5['width'],'height':_0x5eb2b5[_0x1b4a7b(0xe6)]};let _0x44640f=checkCollision(_0x5c1d51,_0x286dc9),_0x1626f3=0x0;!_0x44640f&&_0x5ebc31&&checkCollision(_0x5ebc31,_0x286dc9)&&(_0x44640f=!![],_0x1626f3=0x1);if(_0x44640f){enemyBullets['splice'](_0x4f16ad,0x1);if(isDualShipActive){isDualShipActive=![];if(currentPlayer===0x1)player1IsDualShipActive=![];else player2IsDualShipActive=![];_0x1626f3===0x1?createExplosion(_0x5ebc31['x']+ship[_0x1b4a7b(0x166)]/0x2,_0x5ebc31['y']+ship[_0x1b4a7b(0xe6)]/0x2):createExplosion(_0x5c1d51['x']+ship[_0x1b4a7b(0x166)]/0x2,_0x5c1d51['y']+ship['height']/0x2),playSound(lostLifeSound),isInvincible=!![],invincibilityEndTime=_0x2b5e70+INVINCIBILITY_DURATION_MS;}else{playerLives--,playSound(lostLifeSound),createExplosion(ship['x']+ship[_0x1b4a7b(0x166)]/0x2,ship['y']+ship[_0x1b4a7b(0xe6)]/0x2),csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastChainHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],fallingShips=[],isInvincible=!![],invincibilityEndTime=_0x2b5e70+INVINCIBILITY_DURATION_MS;ship&&gameCanvas?(ship['y']=gameCanvas['height']-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,!isManualControl&&(aiNeedsStabilization=!![])):console[_0x1b4a7b(0x195)]('Cannot\x20reposition\x20ship\x20Y\x20-\x20ship\x20or\x20canvas\x20not\x20ready.');if(playerLives<=0x0){const _0x39fb50=currentPlayer;if(_0x39fb50===0x1)player1Lives=0x0;if(_0x39fb50===0x2)player2Lives=0x0;if(isTwoPlayerMode){isShowingPlayerGameOverMessage=!![],playerGameOverMessageStartTime=_0x2b5e70,playerWhoIsGameOver=_0x39fb50;const _0x2f2ed1=_0x39fb50===0x1?0x2:0x1,_0x41adeb=_0x2f2ed1===0x1?player1Lives:player2Lives;_0x41adeb>0x0?nextActionAfterPlayerGameOver='switch_player':nextActionAfterPlayerGameOver=_0x1b4a7b(0xbc),bullets=[],enemyBullets=[],explosions=[],playSound(gameOverSound);}else triggerFinalGameOverSequence();break;}else{if(isTwoPlayerMode){if(currentPlayer===0x1)player1Lives=playerLives;else player2Lives=playerLives;}break;}}}}}if(ship&&!isShipCaptured&&!isWaitingForRespawn&&!isDualShipActive&&fallingShips[_0x1b4a7b(0xe9)]>0x0&&!isInvincible){const _0x322e8b={'x':ship['x'],'y':ship['y'],'width':ship[_0x1b4a7b(0x166)],'height':ship[_0x1b4a7b(0xe6)]};for(let _0x45da14=fallingShips[_0x1b4a7b(0xe9)]-0x1;_0x45da14>=0x0;_0x45da14--){const _0x490898=fallingShips[_0x45da14];if(!_0x490898)continue;const _0x4b0a58={'x':_0x490898['x'],'y':_0x490898['y'],'width':_0x490898['width'],'height':_0x490898[_0x1b4a7b(0xe6)]};if(checkCollision(_0x322e8b,_0x4b0a58)){fallingShips[_0x1b4a7b(0x102)](_0x45da14,0x1),isDualShipActive=!![];if(currentPlayer===0x1)player1IsDualShipActive=!![];else player2IsDualShipActive=!![];playSound(dualShipSound);break;}}}updateHitSparks();}catch(_0x6a241d){console['error']('FATAL\x20Error\x20in\x20moveEntities:',_0x6a241d,_0x6a241d['stack']),isGridSoundPlaying=![],stopSound(gridBackgroundSound),isEntrancePhaseActive=![],stopSound(entranceSound),isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',isShipCaptured=![],captureBeamActive=![],capturingBossId=null,stopSound(captureSound),stopSound(shipCapturedSound),isWaitingForRespawn=![],fallingShips=[],isDualShipActive=![],player1IsDualShipActive=![],player2IsDualShipActive=![],isInvincible=![],invincibilityEndTime=0x0,hitSparks=[];if(typeof showMenuState===_0x1b4a7b(0x16c))showMenuState();if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null,alert(_0x1b4a7b(0x11f));}}function switchPlayerTurn(){const _0x4ed6b2=_0x8deb;if(!isTwoPlayerMode)return![];stopSound(hiScoreSound),highScore=Math[_0x4ed6b2(0x1be)](highScore,score);currentPlayer===0x1?(player1Score=score,player1IsDualShipActive=isDualShipActive):(player2Score=score,player2IsDualShipActive=isDualShipActive);const _0x329cb9=currentPlayer===0x1?0x2:0x1,_0x1afff3=_0x329cb9===0x1?player1Lives:player2Lives;if(_0x1afff3<=0x0){const _0x456435=currentPlayer===0x1?player1Lives:player2Lives;return _0x456435<=0x0?(triggerFinalGameOverSequence(),![]):(forceCenterShipNextReset=![],![]);}return currentPlayer=_0x329cb9,score=currentPlayer===0x1?player1Score:player2Score,playerLives=currentPlayer===0x1?player1Lives:player2Lives,isDualShipActive=currentPlayer===0x1?player1IsDualShipActive:player2IsDualShipActive,forceCenterShipNextReset=!![],scoreEarnedThisCS=0x0,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastChainHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],isShipCaptured=![],captureBeamActive=![],capturingBossId=null,isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,fallingShips=[],hitSparks=[],showExtraLifeMessage=![],extraLifeMessageStartTime=0x0,!![];}function triggerGridFiring(){const _0x42249f=_0x8deb;if(isPaused||!isInGameState||playerLives<=0x0||isChallengingStage||isWaveTransitioning||isShipCaptured)return;const _0x486f1c=enemies['filter'](_0x56e644=>_0x56e644&&_0x56e644[_0x42249f(0x167)]===_0x42249f(0x11e));if(_0x486f1c['length']===0x0)return;const _0x280719=Date[_0x42249f(0x154)](),_0x5c0d81=scaleValue(level,BASE_GRID_FIRE_INTERVAL,MIN_GRID_FIRE_INTERVAL);if(_0x280719-lastGridFireCheckTime<_0x5c0d81)return;lastGridFireCheckTime=_0x280719;const _0xf39ac8=scaleValue(level,BASE_GRID_FIRE_PROBABILITY,MAX_GRID_FIRE_PROBABILITY),_0x57c2ed=Math[_0x42249f(0x177)](scaleValue(level,BASE_GRID_MAX_FIRING_ENEMIES,MAX_GRID_MAX_FIRING_ENEMIES));let _0x5bd72e=0x0;_0x486f1c[_0x42249f(0x1b8)](()=>Math[_0x42249f(0xce)]()-0.5);for(const _0xfe302 of _0x486f1c){if(_0x5bd72e>=_0x57c2ed)break;if(_0xfe302['type']===ENEMY2_TYPE||_0xfe302['type']===ENEMY3_TYPE){if(_0xfe302[_0x42249f(0x16b)]===ENEMY3_TYPE&&_0xfe302[_0x42249f(0x1c5)])continue;Math[_0x42249f(0xce)]()<_0xf39ac8&&(createBulletSimple(_0xfe302)&&(playSound(enemyShootSound),_0xfe302['lastFiredTime']=_0x280719,_0x5bd72e++));}}}function runSingleGameUpdate(_0x3fbe18){const _0x17f2a3=_0x8deb;try{const _0x17a0c3=Date[_0x17f2a3(0x154)]();if(isManualControl&&connectedGamepadIndex!==null&&playerLives>0x0&&gameOverSequenceStartTime===0x0&&!isPaused&&!isShipCaptured){const _0x46cbfb=navigator[_0x17f2a3(0xc6)]();if(_0x46cbfb?.[connectedGamepadIndex]){const _0x4e7a7d=_0x46cbfb[connectedGamepadIndex],_0x3a1bb8=processSingleController(_0x4e7a7d,previousButtonStates);previousButtonStates=_0x3a1bb8[_0x17f2a3(0x1a3)];if(_0x3a1bb8[_0x17f2a3(0xea)]){stopGameAndShowMenu();return;}}else{if(previousButtonStates[_0x17f2a3(0xe9)]>0x0)previousButtonStates=[];}}else{if(connectedGamepadIndex===null){if(previousButtonStates[_0x17f2a3(0xe9)]>0x0)previousButtonStates=[];}}if(connectedGamepadIndexP2===null){if(previousGameButtonStatesP2[_0x17f2a3(0xe9)]>0x0)previousGameButtonStatesP2=[];}if(isPaused){renderGame();return;}if(isShowingPlayerGameOverMessage&&isTwoPlayerMode){if(_0x17a0c3-playerGameOverMessageStartTime>=PLAYER_GAME_OVER_MESSAGE_DURATION){isShowingPlayerGameOverMessage=![];if(nextActionAfterPlayerGameOver===_0x17f2a3(0x1a0)){if(switchPlayerTurn()){let _0x53264b=level;if(playerWhoIsGameOver===0x1&&currentPlayer===0x2){}else playerWhoIsGameOver===0x2&&currentPlayer===0x1&&player1CompletedLevel===level&&(level++,player1CompletedLevel=-0x1,_0x53264b=level);currentPlayer===0x1?player1MaxLevelReached=Math[_0x17f2a3(0x1be)](player1MaxLevelReached,level):player2MaxLevelReached=Math['max'](player2MaxLevelReached,level),resetWave();}else triggerFinalGameOverSequence();}else nextActionAfterPlayerGameOver===_0x17f2a3(0xbc)?triggerFinalGameOverSequence():(console['error'](_0x17f2a3(0xb7),nextActionAfterPlayerGameOver),triggerFinalGameOverSequence());renderGame();return;}else{renderGame();return;}}if(isShowingCaptureMessage){const _0x56ce4a=enemies[_0x17f2a3(0x15a)](_0x3262ed=>_0x3262ed['id']===capturedBossIdWithMessage);if(_0x56ce4a&&_0x56ce4a[_0x17f2a3(0x167)]==='showing_capture_message'){const _0x2c42ec=_0x17a0c3-captureMessageStartTime,_0x5f48f5=Math[_0x17f2a3(0x117)](0x1,_0x2c42ec/CAPTURE_MESSAGE_DURATION);_0x56ce4a[_0x17f2a3(0x10d)]=_0x5f48f5*0x2*(0x2*Math['PI']);}else _0x56ce4a&&(_0x56ce4a[_0x17f2a3(0x10d)]=0x0);if(_0x17a0c3-captureMessageStartTime>=CAPTURE_MESSAGE_DURATION){isShowingCaptureMessage=![],stopSound(shipCapturedSound),captureBeamActive=![],capturingBossId=null;if(_0x56ce4a&&_0x56ce4a[_0x17f2a3(0x167)]===_0x17f2a3(0xd3)){_0x56ce4a[_0x17f2a3(0x167)]=_0x17f2a3(0x1d7),_0x56ce4a[_0x17f2a3(0x10d)]=0x0;try{const _0x196bc4=_0x56ce4a[_0x17f2a3(0x16b)]===ENEMY3_TYPE?BOSS_WIDTH:ENEMY_WIDTH,{x:_0x45f000,y:_0x4236cd}=getCurrentGridSlotPosition(_0x56ce4a[_0x17f2a3(0x1c3)],_0x56ce4a['gridCol'],_0x196bc4);_0x56ce4a[_0x17f2a3(0x161)]=_0x45f000,_0x56ce4a[_0x17f2a3(0x126)]=_0x4236cd;}catch(_0x40f47e){console[_0x17f2a3(0x195)]('[Capture\x20Message\x20End]\x20Error\x20getting\x20grid\x20pos\x20for\x20returning\x20boss\x20'+_0x56ce4a['id']+':',_0x40f47e),_0x56ce4a['targetGridX']=gameCanvas[_0x17f2a3(0x166)]/0x2,_0x56ce4a[_0x17f2a3(0x126)]=ENEMY_TOP_MARGIN;}}else _0x56ce4a?(console[_0x17f2a3(0x113)]('[Capture\x20Message\x20End]\x20Boss\x20'+capturedBossIdWithMessage+_0x17f2a3(0x186)),_0x56ce4a[_0x17f2a3(0x10d)]=0x0):console['warn'](_0x17f2a3(0x1ae)+capturedBossIdWithMessage+_0x17f2a3(0x137));capturedBossIdWithMessage=null;}isInGameState&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0&&(moveEntities(),updateExplosions(),updateFloatingScores());renderGame();return;}!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0&&!isShipCaptured&&!isShowingCaptureMessage&&(!isManualControl&&isInGameState&&playerLives>0x0&&aiControl(),isInGameState&&isManualControl&&playerLives>0x0&&handlePlayerInput());isInGameState&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0&&!isShowingCaptureMessage&&(moveEntities(),updateExplosions(),updateFloatingScores());isInvincible&&_0x17a0c3>=invincibilityEndTime&&(isInvincible=![],invincibilityEndTime=0x0);if(isCsCompletionDelayActive&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0){if(_0x17a0c3-csCompletionDelayStartTime>=CS_COMPLETION_MESSAGE_DELAY){isCsCompletionDelayActive=![];csCompletionResultIsPerfect?(playSound(csPerfectSound),showCsHitsMessage=!![],csHitsMessageStartTime=_0x17a0c3):(playSound(csClearSound),showCSClearMessage=!![],csClearMessageStartTime=_0x17a0c3);renderGame();return;}else{renderGame();return;}}let _0x3bfb32=![],_0x40bc5b=![];if(!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0){if(showCsHitsMessage)Date['now']()-csHitsMessageStartTime>CS_HITS_MESSAGE_DURATION&&(showCsHitsMessage=![],showPerfectMessage=!![],perfectMessageStartTime=_0x17a0c3),_0x40bc5b=!![];else{if(showPerfectMessage)Date[_0x17f2a3(0x154)]()-perfectMessageStartTime>CS_PERFECT_MESSAGE_DURATION&&(showPerfectMessage=![],showCsBonusScoreMessage=!![],csBonusScoreMessageStartTime=_0x17a0c3),_0x40bc5b=!![];else{if(showCsBonusScoreMessage)Date[_0x17f2a3(0x154)]()-csBonusScoreMessageStartTime>CS_BONUS_MESSAGE_DURATION&&(showCsBonusScoreMessage=![],_0x3bfb32=!![]),_0x40bc5b=!![];else{if(showCSClearMessage)Date[_0x17f2a3(0x154)]()-csClearMessageStartTime>=CS_CLEAR_HITS_DELAY&&!showCsHitsForClearMessage&&(showCsHitsForClearMessage=!![]),Date[_0x17f2a3(0x154)]()-csClearMessageStartTime>=CS_CLEAR_SCORE_DELAY&&!showCsScoreForClearMessage&&(showCsScoreForClearMessage=!![]),Date[_0x17f2a3(0x154)]()-csClearMessageStartTime>=CS_CLEAR_DELAY&&(showCSClearMessage=![],showCsHitsForClearMessage=![],showCsScoreForClearMessage=![],_0x3bfb32=!![]),_0x40bc5b=!![];else{if(showExtraLifeMessage)Date[_0x17f2a3(0x154)]()-extraLifeMessageStartTime>EXTRA_LIFE_MESSAGE_DURATION&&(showExtraLifeMessage=![],_0x3bfb32=!![]),_0x40bc5b=!![];else showReadyMessage&&(Date[_0x17f2a3(0x154)]()-readyMessageStartTime>READY_MESSAGE_DURATION&&(showReadyMessage=![],_0x3bfb32=!![]),_0x40bc5b=!![]);}}}}}if(_0x40bc5b){renderGame();return;}if(isShowingIntro&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0){let _0x137759=![];const _0x54ca7e=_0x17a0c3-introDisplayStartTime,_0x330256=0xbb8,_0x1b907f=INTRO_DURATION_PER_STEP;if(introStep===0x1)isTwoPlayerMode&&!playerIntroSoundPlayed&&(playSound(levelUpSound),playerIntroSoundPlayed=!![]),level===0x1&&currentPlayer===0x1&&!playerIntroSoundPlayed&&(playSound(startSound),playerIntroSoundPlayed=!![]);else{if(introStep===0x2)!isTwoPlayerMode&&level>0x1&&!isChallengingStage&&!stageIntroSoundPlayed&&(playSound(levelUpSound),stageIntroSoundPlayed=!![]);else introStep===0x3&&(!csIntroSoundPlayed&&(playSound(entranceSound),csIntroSoundPlayed=!![]));}if(introStep===0x1){let _0x1a30ed=isTwoPlayerMode?_0x330256:_0x1b907f;if(level===0x1&&!isTwoPlayerMode)_0x1a30ed=_0x1b907f;_0x54ca7e>=_0x1a30ed&&(isChallengingStage?introStep=0x3:introStep=0x2,introDisplayStartTime=_0x17a0c3);}else{if(introStep===0x2){const _0x54b528=_0x1b907f;_0x54ca7e>=_0x54b528&&(_0x137759=!![]);}else introStep===0x3&&(_0x54ca7e>=_0x1b907f&&(_0x137759=!![]));}if(_0x137759){isShowingIntro=![],introStep=0x0;!isChallengingStage?aiCanShootTime=Date[_0x17f2a3(0x154)]()+0xbb8:aiCanShootTime=0x0;if(isChallengingStage)startChallengingStageSequence();else{currentWaveDefinition=generateWaveDefinition(level);if(currentWaveDefinition&&currentWaveDefinition[_0x17f2a3(0xe9)]>0x0)isFullGridWave?startFullGridWave():scheduleEntranceFlightWave();else{console[_0x17f2a3(0x113)]('Wave\x20'+level+_0x17f2a3(0x1bf)),isEntrancePhaseActive=![],stopSound(entranceSound),isWaveTransitioning=!![],readyForNextWaveReset=!![];const _0x5b65c4=0x64;setTimeout(()=>{const _0x54210f=_0x17f2a3;(isInGameState||!isInGameState&&playerLives>0x0)&&typeof resetWave===_0x54210f(0x16c)&&(playerLives>0x0?resetWave():triggerFinalGameOverSequence());},_0x5b65c4);}}}renderGame();return;}gameJustStarted&&(gameJustStarted=![]);if(!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0){if(GRID_BREATH_ENABLED&&isInGameState&&!isChallengingStage&&!isWaveTransitioning&&playerLives>0x0){const _0x532d44=enemies[_0x17f2a3(0x1d2)](_0x3750c1=>_0x3750c1?.[_0x17f2a3(0x167)]==='in_grid');if(_0x532d44&&isGridBreathingActive){const _0x58c644=_0x17a0c3-gridBreathStartTime,_0x4ff687=scaleValue(level,BASE_GRID_BREATH_CYCLE_MS,MIN_GRID_BREATH_CYCLE_MS),_0x3dc4a7=_0x58c644%_0x4ff687;currentGridBreathFactor=(Math['sin'](_0x3dc4a7/_0x4ff687*Math['PI']*0x2-Math['PI']/0x2)+0x1)/0x2;}else{if(!_0x532d44&&isGridBreathingActive)isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0;else _0x532d44&&!isGridBreathingActive&&(isGridBreathingActive=!![],gridBreathStartTime=_0x17a0c3,currentGridBreathFactor=0x0);}}else isGridBreathingActive&&(isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0);if(isEntrancePhaseActive){const _0x33ece3=enemiesSpawnedThisWave>=totalEnemiesScheduledForWave,_0x4a7378=enemies[_0x17f2a3(0x1d2)](_0x107ac9=>_0x107ac9?.['state']===_0x17f2a3(0x10e)||_0x107ac9?.[_0x17f2a3(0x167)]==='moving_to_grid'||_0x107ac9?.[_0x17f2a3(0x167)]===_0x17f2a3(0xd9));if(totalEnemiesScheduledForWave>0x0&&_0x33ece3&&!_0x4a7378){const _0x24f6a4=isEntrancePhaseActive;isEntrancePhaseActive=![],_0x24f6a4&&(stopSound(entranceSound),enemiesSpawnedThisWave=0x0,totalEnemiesScheduledForWave=0x0,enemySpawnTimeouts[_0x17f2a3(0x17b)](clearTimeout),enemySpawnTimeouts=[],gridJustCompleted=!![],!isChallengingStage&&typeof triggerImmediateCaptureDive===_0x17f2a3(0x16c)&&triggerImmediateCaptureDive());}}!isChallengingStage&&!isShowingIntro&&!isPaused&&!isWaveTransitioning&&triggerGridFiring();if(!isWaveTransitioning&&playerLives>0x0&&!isShowingIntro&&!isShipCaptured&&!isShowingCaptureMessage&&!isEntrancePhaseActive){let _0x107d77=enemies[_0x17f2a3(0xe9)]===0x0,_0x33f501=fallingShips[_0x17f2a3(0xe9)]===0x0,_0x3faae3=![];isChallengingStage?_0x107d77&&!isEntrancePhaseActive&&(_0x3faae3=!![]):_0x107d77&&!isEntrancePhaseActive&&_0x33f501&&(_0x3faae3=!![]);if(_0x3faae3){isGridBreathingActive&&(isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0);!isManualControl&&ship&&gameCanvas?.[_0x17f2a3(0x166)]>0x0&&(ship['x']=Math[_0x17f2a3(0x177)](gameCanvas[_0x17f2a3(0x166)]/0x2-ship[_0x17f2a3(0x166)]/0x2),ship['targetX']=ship['x']);isWaveTransitioning=!![];isGridSoundPlaying&&(stopSound(gridBackgroundSound),isGridSoundPlaying=![]);bullets=[],enemyBullets=[],explosions=[],enemySpawnTimeouts['forEach'](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,floatingScores=[];const _0x4ad3c5=currentPlayer;isTwoPlayerMode&&_0x4ad3c5===0x1&&(player1CompletedLevel=level);let _0x194ae1;if(isChallengingStage){csCompletionResultIsPerfect=challengingStageEnemiesHit>=challengingStageTotalEnemies,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,isCsCompletionDelayActive=!![],csCompletionDelayStartTime=_0x17a0c3;if(csCompletionResultIsPerfect){const _0x479052=score;score+=0x2710,highScore=Math[_0x17f2a3(0x1be)](highScore,score);let _0xb93e3=![],_0x3b1752=null;if(!isManualControl)_0xb93e3=player1TriggeredHighScoreSound,_0x3b1752=()=>{player1TriggeredHighScoreSound=!![];};else isTwoPlayerMode?currentPlayer===0x1?(_0xb93e3=player1TriggeredHighScoreSound,_0x3b1752=()=>{player1TriggeredHighScoreSound=!![];}):(_0xb93e3=player2TriggeredHighScoreSound,_0x3b1752=()=>{player2TriggeredHighScoreSound=!![];}):(_0xb93e3=player1TriggeredHighScoreSound,_0x3b1752=()=>{player1TriggeredHighScoreSound=!![];});if(!_0xb93e3&&score>highScore-0x2710){if(_0x3b1752)_0x3b1752();playSound(hiScoreSound);}if(currentPlayer===0x1)player1Score=score;else player2Score=score;checkAndAwardExtraLife(),_0x194ae1=CS_COMPLETION_MESSAGE_DELAY+CS_HITS_MESSAGE_DURATION+CS_PERFECT_MESSAGE_DURATION+CS_BONUS_MESSAGE_DURATION;}else checkAndAwardExtraLife(),_0x194ae1=CS_COMPLETION_MESSAGE_DELAY+CS_CLEAR_DELAY;_0x194ae1+=0x64;}else playSound(waveUpSound),normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastChainHitPosition=null,_0x194ae1=POST_MESSAGE_RESET_DELAY;setTimeout(()=>{const _0x5798ad=_0x17f2a3;let _0x36d19e=![],_0x2f82bf=currentPlayer;if(isTwoPlayerMode){if(currentPlayer===0x1)player1Score=score;else player2Score=score;const _0xa40205=switchPlayerTurn();_0xa40205?(_0x2f82bf=currentPlayer,_0x4ad3c5===0x2&&player1CompletedLevel===level?(_0x36d19e=!![],player1CompletedLevel=-0x1):_0x36d19e=![]):(_0x2f82bf=_0x4ad3c5,_0x36d19e=!![],player1CompletedLevel=-0x1);}else _0x2f82bf=0x1,_0x36d19e=!![];_0x36d19e&&level++;const _0x2b71b7=_0x2f82bf===0x1?player1Lives:player2Lives;_0x2b71b7>0x0?(_0x2f82bf===0x1?player1MaxLevelReached=Math[_0x5798ad(0x1be)](player1MaxLevelReached,level):player2MaxLevelReached=Math['max'](player2MaxLevelReached,level),resetWave()):(console[_0x5798ad(0x195)](_0x5798ad(0x13d)),triggerFinalGameOverSequence());},_0x194ae1),renderGame();return;}if(!isChallengingStage){if(enemies['length']>0x0){let _0x563541=null;const _0x3b7009=enemies[_0x17f2a3(0x103)](_0x28b529=>_0x28b529?.[_0x17f2a3(0x167)]==='in_grid'),_0x44d903=_0x3b7009['length']<=0x3,_0x1a5bac=Math[_0x17f2a3(0x1be)](0x1,Math[_0x17f2a3(0x117)](level,LEVEL_CAP_FOR_SCALING)),_0x1f4e58=0x1068,_0x32ea60=0x320,_0x325c4a=(_0x1a5bac-0x1)*((_0x1f4e58-_0x32ea60)/(LEVEL_CAP_FOR_SCALING-0x1)),_0x4605b2=Math[_0x17f2a3(0x1be)](_0x32ea60,_0x1f4e58-_0x325c4a),_0x147aa6=Math[_0x17f2a3(0x177)](scaleValue(level,BASE_MAX_ATTACKING_ENEMIES,MAX_MAX_ATTACKING_ENEMIES)),_0x361eae=enemies[_0x17f2a3(0x103)](_0x5b816a=>_0x5b816a?.['state']==='attacking'||_0x5b816a?.[_0x17f2a3(0x167)]===_0x17f2a3(0x1bd))[_0x17f2a3(0xe9)];if(_0x44d903||_0x17a0c3-lastEnemyDetachTime>_0x4605b2&&_0x3b7009[_0x17f2a3(0xe9)]>0x0&&_0x361eae<_0x147aa6){_0x563541=findAndDetachEnemy();if(_0x563541&&_0x563541[_0x17f2a3(0xe9)]>0x0){const _0x2a96c3=_0x563541[_0x17f2a3(0x11d)](_0x519057=>enemies[_0x17f2a3(0x15a)](_0x3484be=>_0x3484be?.['id']===_0x519057['id']))['filter'](_0x425274=>_0x425274&&_0x425274[_0x17f2a3(0x167)]===_0x17f2a3(0x11e));if(_0x2a96c3['length']>0x0){const _0x43bd9d=_0x2a96c3[0x0],_0x400002=_0x43bd9d[_0x17f2a3(0xee)];!_0x44d903&&(lastEnemyDetachTime=_0x17a0c3);if(_0x400002===_0x17f2a3(0x1cd)){const _0x7a28a=generateAttackPath(_0x43bd9d);if(_0x7a28a&&_0x7a28a['length']>0x0){_0x2a96c3[_0x17f2a3(0xe9)]===0x3&&_0x43bd9d['type']===ENEMY3_TYPE&&level!==0x1&&playSound(tripleAttackSound);let _0x289d5d=[..._0x2a96c3];const _0x2d1ee5=_0x289d5d[_0x17f2a3(0xe9)];if(_0x2d1ee5>0x1){let _0x5bdd9f=null,_0x355bf7=[];_0x289d5d['forEach'](_0x309d57=>{const _0x4728d1=_0x17f2a3;if(_0x309d57[_0x4728d1(0x16b)]===ENEMY3_TYPE)_0x5bdd9f=_0x309d57;else _0x355bf7[_0x4728d1(0x155)](_0x309d57);});_0x5bdd9f&&level!==0x1&&_0x2d1ee5===0x3&&_0x355bf7[_0x17f2a3(0xe9)]===0x2?_0x289d5d=[_0x355bf7[0x0],_0x5bdd9f,_0x355bf7[0x1]]:_0x289d5d[_0x17f2a3(0x1b8)]((_0x8b82f,_0xf5cf75)=>(_0x8b82f?.[_0x17f2a3(0x159)]??0x0)-(_0xf5cf75?.[_0x17f2a3(0x159)]??0x0));const _0x503d14=0x5;let _0x6c0870=0x0;_0x289d5d=_0x289d5d[_0x17f2a3(0x103)](_0x4146a9=>_0x4146a9&&typeof _0x4146a9['width']===_0x17f2a3(0x160));const _0x5de469=_0x289d5d['length'];for(let _0x41bcfb=0x0;_0x41bcfb<_0x5de469;_0x41bcfb++){_0x6c0870+=_0x289d5d[_0x41bcfb][_0x17f2a3(0x166)];if(_0x41bcfb<_0x5de469-0x1)_0x6c0870+=_0x503d14;}const _0x5b4280=-_0x6c0870/0x2;let _0x42e7da=_0x5b4280;for(let _0x2e24dc=0x0;_0x2e24dc<_0x5de469;_0x2e24dc++){const _0x9d4ee3=_0x289d5d[_0x2e24dc];_0x9d4ee3[_0x17f2a3(0x12c)]=_0x42e7da+_0x9d4ee3[_0x17f2a3(0x166)]/0x2,_0x42e7da+=_0x9d4ee3['width']+_0x503d14;}}else _0x289d5d[_0x17f2a3(0x17b)](_0x3a9b7a=>_0x3a9b7a[_0x17f2a3(0x12c)]=0x0);const _0x1e3dfc=_0x17f2a3(0xc0)+_0x43bd9d['id']+'-'+_0x17a0c3;_0x289d5d['forEach'](_0x41d6ff=>{const _0x42e4ed=_0x17f2a3;if(_0x41d6ff)_0x41d6ff[_0x42e4ed(0x181)]=_0x1e3dfc;});let _0x576948=![],_0x3250e2=GROUP_FIRE_BURST_DELAY;if(_0x43bd9d['type']===ENEMY2_TYPE||_0x43bd9d['type']===ENEMY3_TYPE)_0x576948=!![],_0x43bd9d[_0x17f2a3(0x16b)]===ENEMY2_TYPE&&_0x2d1ee5===0x1&&(_0x3250e2=SOLO_BUTTERFLY_FIRE_DELAY);else _0x43bd9d[_0x17f2a3(0x16b)]===ENEMY1_TYPE&&(_0x576948=!![]);_0x44d903&&level>0x1&&(_0x576948=![]),_0x576948&&_0x289d5d[_0x17f2a3(0x17b)](_0x4c1176=>{const _0x3cb047=_0x17f2a3,_0x103800=_0x4c1176&&!(_0x4c1176[_0x3cb047(0x16b)]===ENEMY3_TYPE&&_0x4c1176[_0x3cb047(0x1c5)]);_0x103800&&fireEnemyBurst(_0x4c1176['id'],_0x3cb047(0x162),_0x3250e2);}),_0x289d5d[_0x17f2a3(0x17b)]((_0x54f71b,_0xfe0ec7)=>{const _0x449ee8=_0x17f2a3;_0x54f71b&&_0x54f71b[_0x449ee8(0x167)]===_0x449ee8(0x11e)&&(_0x54f71b[_0x449ee8(0x167)]='preparing_attack',_0x54f71b['justReturned']=![],_0x54f71b[_0x449ee8(0x110)]=0x0,_0x54f71b[_0x449ee8(0xf3)]=0x0,_0x54f71b['canFireThisDive']=![],setTimeout(()=>{const _0xd59af6=_0x449ee8;if(isPaused)return;const _0x14b787=enemies[_0xd59af6(0x15a)](_0x2a96d4=>_0x2a96d4?.['id']===_0x54f71b['id']);if(_0x14b787&&_0x14b787[_0xd59af6(0x167)]===_0xd59af6(0x1bd))try{const _0x34fc4a=scaleValue(level,BASE_ENEMY_ATTACK_SPEED,MAX_ENEMY_ATTACK_SPEED);let _0x404b9b=0x1;if(_0x14b787[_0xd59af6(0x16b)]===ENEMY1_TYPE)_0x404b9b=ENEMY1_DIVE_SPEED_FACTOR;else{if(_0x14b787[_0xd59af6(0x16b)]===ENEMY2_TYPE)_0x404b9b=ENEMY2_DIVE_SPEED_FACTOR;else{if(_0x14b787['type']===ENEMY3_TYPE)_0x404b9b=ENEMY3_ATTACK_SPEED_FACTOR;}}if(_0x54f71b[_0xd59af6(0x16b)]===ENEMY3_TYPE)playSound(bossGalagaDiveSound);else playSound(butterflyDiveSound);_0x14b787[_0xd59af6(0x167)]=_0xd59af6(0x162),_0x14b787['attackPathSegments']=_0x7a28a,_0x14b787[_0xd59af6(0x16e)]=0x0,_0x14b787[_0xd59af6(0xbe)]=0x0,_0x14b787[_0xd59af6(0x19f)]=_0x34fc4a*_0x404b9b,_0x14b787[_0xd59af6(0x1b1)]=0x0,_0x14b787[_0xd59af6(0xff)]=!![];}catch(_0xa3f4bd){console['error'](_0xd59af6(0x190)+_0x54f71b['id']+':',_0xa3f4bd);}},_0xfe0ec7*GROUP_DETACH_DELAY_MS));});}else console[_0x17f2a3(0x113)]('[DEBUG\x20Attack\x20Path\x20Failed]\x20Could\x20not\x20generate\x20path\x20for\x20leader\x20'+_0x43bd9d?.['id']+'.\x20Skipping\x20attack.'),_0x563541[_0x17f2a3(0x17b)](_0x5a359e=>{if(_0x5a359e)_0x5a359e['justReturned']=![];});}}}}}}enemies['forEach'](_0x451d95=>{const _0x4b129b=_0x17f2a3;if(_0x451d95&&_0x451d95[_0x4b129b(0x16b)]===ENEMY3_TYPE&&_0x451d95[_0x4b129b(0x1c5)]&&_0x451d95[_0x4b129b(0x167)]==='attacking'&&_0x451d95[_0x4b129b(0x13e)]&&typeof _0x451d95[_0x4b129b(0x19c)]==='number'){if(_0x17a0c3-_0x451d95[_0x4b129b(0x19c)]>CAPTURED_SHIP_FIRE_COOLDOWN_MS){const _0xc760a9=_0x451d95['x']+_0x451d95['width']/0x2,_0x2a33d3=_0x451d95['y']+_0x451d95[_0x4b129b(0xe6)]+_0x451d95['capturedShipDimensions'][_0x4b129b(0xe6)]*0.5,_0x68fc28={'x':_0xc760a9,'y':_0x2a33d3};createBulletSimple(_0x451d95,_0x68fc28)&&(_0x451d95[_0x4b129b(0x19c)]=_0x17a0c3,playSound(playerShootSound));}}});}}else{if(gameOverSequenceStartTime>0x0){const _0x582bfb=_0x17a0c3-gameOverSequenceStartTime,_0x2c0665=_0x582bfb>=GAME_OVER_DURATION;_0x2c0665&&!isShowingResultsScreen&&(isShowingResultsScreen=!![],stopSound(gameOverSound),playSound(resultsMusicSound));}}renderGame();}catch(_0x37f545){console[_0x17f2a3(0x195)]('!!!\x20CRITICAL\x20ERROR\x20IN\x20runSingleGameUpdate\x20!!!',_0x37f545,_0x37f545['stack']),isPaused=![];mainLoopId&&(cancelAnimationFrame(mainLoopId),mainLoopId=null);isInGameState=![],isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',alert(_0x17f2a3(0x1b2)),stopAllGameSounds(),isGridSoundPlaying=![],isInvincible=![],invincibilityEndTime=0x0;try{typeof showMenuState===_0x17f2a3(0x16c)&&showMenuState();}catch(_0x4e81c6){console['error'](_0x17f2a3(0x15d),_0x4e81c6);}}}function checkAndAwardExtraLife(){const _0x394ea3=_0x8deb;try{let _0x493266;!isManualControl||!isTwoPlayerMode?_0x493266=player1LifeThresholdsMet:_0x493266=currentPlayer===0x1?player1LifeThresholdsMet:player2LifeThresholdsMet;let _0x1a9aba=![];while(!![]){let _0x56be7b=![],_0x3ea8e9=-0x1;const _0x31c58c=_0x493266['size'];_0x31c58c===0x0?_0x3ea8e9=EXTRA_LIFE_THRESHOLD_1:_0x3ea8e9=EXTRA_LIFE_THRESHOLD_2+(_0x31c58c-0x1)*RECURRING_EXTRA_LIFE_INTERVAL;if(_0x3ea8e9!==-0x1&&score>=_0x3ea8e9&&!_0x493266[_0x394ea3(0x1c6)](_0x3ea8e9)){playerLives++,_0x493266[_0x394ea3(0x193)](_0x3ea8e9),_0x1a9aba=!![],_0x56be7b=!![];if(isTwoPlayerMode){if(currentPlayer===0x1)player1Lives=playerLives;else player2Lives=playerLives;}}if(!_0x56be7b)break;}_0x1a9aba&&!showExtraLifeMessage&&(showExtraLifeMessage=!![],extraLifeMessageStartTime=Date[_0x394ea3(0x154)](),playSound(extraLifeSound));}catch(_0x36a5b5){console[_0x394ea3(0x195)](_0x394ea3(0x1cc),_0x36a5b5);}}